var GA=Object.defineProperty,YA=Object.defineProperties,XA=Object.getOwnPropertyDescriptors,Al=Object.getOwnPropertySymbols,Fw=Object.prototype.hasOwnProperty,Uw=Object.prototype.propertyIsEnumerable,Iw=(Xt,$t,ge)=>$t in Xt?GA(Xt,$t,{enumerable:!0,configurable:!0,writable:!0,value:ge}):Xt[$t]=ge,it=(Xt,$t)=>{for(var ge in $t||($t={}))Fw.call($t,ge)&&Iw(Xt,ge,$t[ge]);if(Al)for(var ge of Al($t))Uw.call($t,ge)&&Iw(Xt,ge,$t[ge]);return Xt},kt=(Xt,$t)=>YA(Xt,XA($t)),zw=(Xt,$t)=>{var ge={};for(var Xe in Xt)Fw.call(Xt,Xe)&&$t.indexOf(Xe)<0&&(ge[Xe]=Xt[Xe]);if(null!=Xt&&Al)for(var Xe of Al(Xt))$t.indexOf(Xe)<0&&Uw.call(Xt,Xe)&&(ge[Xe]=Xt[Xe]);return ge};!function(){"use strict";var Xt=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},$t=function(t){return{eq:t}},ge=$t(function(t,e){return t===e}),Xe=function(t){return $t(function(e,n){if(e.length!==n.length)return!1;for(var o=e.length,r=0;r<o;r++)if(!t.eq(e[r],n[r]))return!1;return!0})},$m=function(t){return $t(function(e,n){var l,c,u,o=Object.keys(e),r=Object.keys(n);if(!(l=ge,c=Xe(l),u=function(c){return Array.prototype.slice.call(c).sort(void 0)},$t(function(f,m){return c.eq(u(f),u(m))})).eq(o,r))return!1;for(var s=o.length,a=0;a<s;a++){var i=o[a];if(!t.eq(e[i],n[i]))return!1}return!0})},Ol=$t(function(t,e){if(t===e)return!0;var n=Xt(t);return n===Xt(e)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===e:"array"===n?Xe(Ol).eq(t,e):"object"===n&&$m(Ol).eq(t,e))});const jw=Object.getPrototypeOf,Vm=(t,e,n)=>{var o;return!!n(t,e.prototype)||(null===(o=t.constructor)||void 0===o?void 0:o.name)===e.name},Tl=t=>e=>(n=>{const o=typeof n;return null===n?"null":"object"===o&&Array.isArray(n)?"array":"object"===o&&Vm(n,String,(r,s)=>s.isPrototypeOf(r))?"string":o})(e)===t,Bl=t=>e=>typeof e===t,qm=t=>e=>t===e,xa=(t,e)=>pe(t)&&Vm(t,e,(n,o)=>jw(n)===o),lt=Tl("string"),pe=Tl("object"),Wm=t=>xa(t,Object),jt=Tl("array"),yo=qm(null),Co=Bl("boolean"),Se=qm(void 0),Ft=t=>null==t,Q=t=>!Ft(t),yt=Bl("function"),on=Bl("number"),or=(t,e)=>{if(jt(t)){for(let n=0,o=t.length;n<o;++n)if(!e(t[n]))return!1;return!0}return!1},pt=()=>{},wo=(t,e)=>(...n)=>t(e.apply(null,n)),Km=(t,e)=>n=>t(e(n)),G=t=>()=>t,he=t=>t,Hw=(t,e)=>t===e;function et(t,...e){return(...n)=>{const o=e.concat(n);return t.apply(null,o)}}const Dl=t=>e=>!t(e),Pl=t=>t(),Jr=t=>{t()},Tt=G(!1),Ut=G(!0);class y{constructor(e,n){this.tag=e,this.value=n}static some(e){return new y(!0,e)}static none(){return y.singletonNone}fold(e,n){return this.tag?n(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?y.some(e(this.value)):y.none()}bind(e){return this.tag?e(this.value):y.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:y.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return Q(e)?y.some(e):y.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}y.singletonNone=new y(!1);const Ll=Array.prototype.slice,$w=Array.prototype.indexOf,Vw=Array.prototype.push,Gm=(t,e)=>$w.call(t,e),Et=(t,e)=>Gm(t,e)>-1,zt=(t,e)=>{for(let n=0,o=t.length;n<o;n++)if(e(t[n],n))return!0;return!1},bt=(t,e)=>{const n=t.length,o=new Array(n);for(let r=0;r<n;r++)o[r]=e(t[r],r);return o},j=(t,e)=>{for(let n=0,o=t.length;n<o;n++)e(t[n],n)},Ym=(t,e)=>{for(let n=t.length-1;n>=0;n--)e(t[n],n)},Zr=(t,e)=>{const n=[],o=[];for(let r=0,s=t.length;r<s;r++){const a=t[r];(e(a,r)?n:o).push(a)}return{pass:n,fail:o}},ut=(t,e)=>{const n=[];for(let o=0,r=t.length;o<r;o++){const s=t[o];e(s,o)&&n.push(s)}return n},ka=(t,e,n)=>(Ym(t,(o,r)=>{n=e(n,o,r)}),n),Oe=(t,e,n)=>(j(t,(o,r)=>{n=e(n,o,r)}),n),Xm=(t,e,n)=>{for(let o=0,r=t.length;o<r;o++){const s=t[o];if(e(s,o))return y.some(s);if(n(s,o))break}return y.none()},Vt=(t,e)=>Xm(t,e,Tt),ts=(t,e)=>{for(let n=0,o=t.length;n<o;n++)if(e(t[n],n))return y.some(n);return y.none()},Qm=t=>{const e=[];for(let n=0,o=t.length;n<o;++n){if(!jt(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);Vw.apply(e,t[n])}return e},Ln=(t,e)=>Qm(bt(t,e)),rr=(t,e)=>{for(let n=0,o=t.length;n<o;++n)if(!0!==e(t[n],n))return!1;return!0},es=t=>{const e=Ll.call(t,0);return e.reverse(),e},Ml=(t,e)=>ut(t,n=>!Et(e,n)),Il=(t,e)=>{const n={};for(let o=0,r=t.length;o<r;o++){const s=t[o];n[String(s)]=e(s,o)}return n},ns=(t,e)=>{const n=Ll.call(t,0);return n.sort(e),n},Fl=(t,e)=>e>=0&&e<t.length?y.some(t[e]):y.none(),_e=t=>Fl(t,0),xo=t=>Fl(t,t.length-1),be=yt(Array.from)?Array.from:t=>Ll.call(t),sr=(t,e)=>{for(let n=0;n<t.length;n++){const o=e(t[n],n);if(o.isSome())return o}return y.none()},Pe=Object.keys,qw=Object.hasOwnProperty,Nt=(t,e)=>{const n=Pe(t);for(let o=0,r=n.length;o<r;o++){const s=n[o];e(t[s],s)}},Sa=(t,e)=>Ww(t,(n,o)=>({k:o,v:e(n,o)})),Ww=(t,e)=>{const n={};return Nt(t,(o,r)=>{const s=e(o,r);n[s.k]=s.v}),n},Ul=t=>(e,n)=>{t[n]=e},Jm=(t,e,n,o)=>{Nt(t,(r,s)=>{(e(r,s)?n:o)(r,s)})},os=(t,e)=>{const n={};return Jm(t,e,Ul(n),pt),n},zl=(t,e)=>{const n=[];return Nt(t,(o,r)=>{n.push(e(o,r))}),n},jl=t=>zl(t,he),Rt=(t,e)=>gt(t,e)?y.from(t[e]):y.none(),gt=(t,e)=>qw.call(t,e),ar=(t,e)=>gt(t,e)&&null!=t[e],Zm=t=>{const e={};return j(t,n=>{e[n]={}}),Pe(e)},tf=t=>void 0!==t.length,Hl=Array.isArray,_a=(t,e,n)=>{if(!t)return!1;if(n=n||t,tf(t)){for(let o=0,r=t.length;o<r;o++)if(!1===e.call(n,t[o],o,t))return!1}else for(const o in t)if(gt(t,o)&&!1===e.call(n,t[o],o,t))return!1;return!0},$l=(t,e)=>{const n=[];return _a(t,(o,r)=>{n.push(e(o,r,t))}),n},rs=(t,e)=>{const n=[];return _a(t,(o,r)=>{e&&!e(o,r,t)||n.push(o)}),n},Ea=(t,e,n,o)=>{let r=Se(n)?t[0]:n;for(let s=0;s<t.length;s++)r=e.call(o,r,t[s],s);return r},ef=(t,e,n)=>{for(let o=0,r=t.length;o<r;o++)if(e.call(n,t[o],o,t))return o;return-1},ko=t=>t[t.length-1],So=t=>{let e,n=!1;return(...o)=>(n||(n=!0,e=t.apply(null,o)),e)},nf=()=>Vl(0,0),Vl=(t,e)=>({major:t,minor:e}),ss={nu:Vl,detect:(t,e)=>{const n=String(e).toLowerCase();return 0===t.length?nf():((o,r)=>{const s=((i,l)=>{for(let d=0;d<i.length;d++){const c=i[d];if(c.test(l))return c}})(o,r);if(!s)return{major:0,minor:0};const a=i=>Number(r.replace(s,"$"+i));return Vl(a(1),a(2))})(t,n)},unknown:nf},of=(t,e)=>{const n=String(e).toLowerCase();return Vt(t,o=>o.search(n))},rf=(t,e,n)=>""===e||t.length>=e.length&&t.substr(n,n+e.length)===e,re=(t,e,n=0,o)=>{const r=t.indexOf(e,n);return-1!==r&&(!!Se(o)||r+e.length<=o)},ne=(t,e)=>rf(t,e,0),sf=(t,e)=>rf(t,e,t.length-e.length),ql=t=>e=>e.replace(t,""),ir=ql(/^\s+|\s+$/g),Kw=ql(/^\s+/g),af=ql(/\s+$/g),hn=t=>t.length>0,as=t=>!hn(t),Na=(t,e=10)=>{const n=parseInt(t,e);return isNaN(n)?y.none():y.some(n)},Wl=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Mn=t=>e=>re(e,t),Gw=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>re(t,"edge/")&&re(t,"chrome")&&re(t,"safari")&&re(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Wl],search:t=>re(t,"chrome")&&!re(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>re(t,"msie")||re(t,"trident")},{name:"Opera",versionRegexes:[Wl,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Mn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Mn("firefox")},{name:"Safari",versionRegexes:[Wl,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(re(t,"safari")||re(t,"mobile/"))&&re(t,"applewebkit")}],Yw=[{name:"Windows",search:Mn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>re(t,"iphone")||re(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Mn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Mn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Mn("linux"),versionRegexes:[]},{name:"Solaris",search:Mn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Mn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Mn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],lf={browsers:G(Gw),oses:G(Yw)},cf="Chromium",mf="Firefox",gf=t=>{const e=t.current,o=r=>()=>e===r;return{current:e,version:t.version,isEdge:o("Edge"),isChromium:o(cf),isIE:o("IE"),isOpera:o("Opera"),isFirefox:o(mf),isSafari:o("Safari")}},Xw=()=>gf({current:void 0,version:ss.unknown()}),Qw=gf,pf=(G("Edge"),G(cf),G("IE"),G("Opera"),G(mf),G("Safari"),"Windows"),hf="Android",yf="Solaris",Cf="FreeBSD",wf="ChromeOS",xf=t=>{const e=t.current,o=r=>()=>e===r;return{current:e,version:t.version,isWindows:o(pf),isiOS:o("iOS"),isAndroid:o(hf),isMacOS:o("macOS"),isLinux:o("Linux"),isSolaris:o(yf),isFreeBSD:o(Cf),isChromeOS:o(wf)}},Jw=()=>xf({current:void 0,version:ss.unknown()}),Zw=xf,tx=(G(pf),G("iOS"),G(hf),G("Linux"),G("macOS"),G(yf),G(Cf),G(wf),t=>window.matchMedia(t).matches);let ex=So(()=>((t,e,n)=>{const o=lf.browsers(),r=lf.oses(),s=e.bind(l=>{return d=o,sr(l.brands,u=>{const f=u.brand.toLowerCase();return Vt(d,m=>{var g;return f===(null===(g=m.brand)||void 0===g?void 0:g.toLowerCase())}).map(m=>({current:m.name,version:ss.nu(parseInt(u.version,10),0)}))});var d}).orThunk(()=>{return of(o,d=t).map(c=>{const u=ss.detect(c.versionRegexes,d);return{current:c.name,version:u}});var d}).fold(Xw,Qw),a=(l=r,d=t,of(l,d).map(c=>{const u=ss.detect(c.versionRegexes,d);return{current:c.name,version:u}})).fold(Jw,Zw),i=((l,d,c,u)=>{const f=l.isiOS()&&!0===/ipad/i.test(c),m=l.isiOS()&&!f,g=l.isiOS()||l.isAndroid(),h=g||u("(pointer:coarse)"),p=f||!m&&g&&u("(min-device-width:768px)"),v=m||g&&!p,b=d.isSafari()&&l.isiOS()&&!1===/safari/i.test(c),C=!v&&!p&&!b;return{isiPad:G(f),isiPhone:G(m),isTablet:G(p),isPhone:G(v),isTouch:G(h),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:G(b),isDesktop:G(C)}})(a,s,t,n);var l,d;return{browser:s,os:a,deviceType:i}})(navigator.userAgent,y.from(navigator.userAgentData),tx));const _o=()=>ex(),nx=navigator.userAgent,Kl=_o(),bn=Kl.browser,vn=Kl.os,Eo=Kl.deviceType,ox=-1!==nx.indexOf("Windows Phone"),vt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:bn.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!bn.isIE(),windowsPhone:ox,browser:{current:bn.current,version:bn.version,isChromium:bn.isChromium,isEdge:bn.isEdge,isFirefox:bn.isFirefox,isIE:bn.isIE,isOpera:bn.isOpera,isSafari:bn.isSafari},os:{current:vn.current,version:vn.version,isAndroid:vn.isAndroid,isChromeOS:vn.isChromeOS,isFreeBSD:vn.isFreeBSD,isiOS:vn.isiOS,isLinux:vn.isLinux,isMacOS:vn.isMacOS,isSolaris:vn.isSolaris,isWindows:vn.isWindows},deviceType:{isDesktop:Eo.isDesktop,isiPad:Eo.isiPad,isiPhone:Eo.isiPhone,isPhone:Eo.isPhone,isTablet:Eo.isTablet,isTouch:Eo.isTouch,isWebView:Eo.isWebView}},rx=/^\s*|\s*$/g,kf=t=>Ft(t)?"":(""+t).replace(rx,""),Sf=function(t,e,n,o){o=o||this,t&&(n&&(t=t[n]),_a(t,(r,s)=>!1!==e.call(o,r,s,n)&&(Sf(r,e,n,o),!0)))},H={trim:kf,isArray:Hl,is:(t,e)=>e?!("array"!==e||!Hl(t))||typeof t===e:void 0!==t,toArray:t=>{if(Hl(t))return t;{const e=[];for(let n=0,o=t.length;n<o;n++)e[n]=t[n];return e}},makeMap:(t,e,n={})=>{const o=lt(t)?t.split(e||","):t||[];let r=o.length;for(;r--;)n[o[r]]={};return n},each:_a,map:$l,grep:rs,inArray:(t,e)=>{if(t)for(let n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1},hasOwn:gt,extend:(t,...e)=>{for(let n=0;n<e.length;n++){const o=e[n];for(const r in o)if(gt(o,r)){const s=o[r];void 0!==s&&(t[r]=s)}}return t},walk:Sf,resolve:(t,e=window)=>{const n=t.split(".");for(let o=0,r=n.length;o<r&&(e=e[n[o]]);o++);return e},explode:(t,e)=>jt(t)?t:""===t?[]:$l(t.split(e||","),kf),_addCacheSuffix:t=>{const e=vt.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},lr=(t,e,n=Hw)=>t.exists(o=>n(o,e)),ve=(t,e,n)=>t.isSome()&&e.isSome()?y.some(n(t.getOrDie(),e.getOrDie())):y.none(),is=(t,e)=>t?y.some(e):y.none();"undefined"!=typeof window||Function("return this;")();const Bt=t=>t.dom.nodeName.toLowerCase(),_f=t=>t.dom.nodeType,Ra=t=>e=>_f(e)===t,Qe=Ra(1),Le=Ra(3),sx=Ra(9),ax=Ra(11),Gl=t=>e=>Qe(e)&&Bt(e)===t,Ef=(t,e,n)=>{if(!(lt(n)||Co(n)||on(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Qt=(t,e,n)=>{Ef(t.dom,e,n)},Qn=(t,e)=>{const n=t.dom;Nt(e,(o,r)=>{Ef(n,r,o)})},Je=(t,e)=>{const n=t.dom.getAttribute(e);return null===n?void 0:n},In=(t,e)=>y.from(Je(t,e)),Aa=(t,e)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},se=(t,e)=>{t.dom.removeAttribute(e)},Nf=t=>Oe(t.dom.attributes,(e,n)=>(e[n.name]=n.value,e),{}),Yl=(t,e)=>{const n=Je(t,e);return void 0===n||""===n?[]:n.split(" ")},ls=t=>void 0!==t.dom.classList,Rf=t=>Yl(t,"class"),Af=(t,e)=>((n,o,r)=>{const s=Yl(n,o).concat([r]);return Qt(n,o,s.join(" ")),!0})(t,"class",e),Of=(t,e)=>((n,o,r)=>{const s=ut(Yl(n,o),a=>a!==r);return s.length>0?Qt(n,o,s.join(" ")):se(n,o),!1})(t,"class",e),ds=(t,e)=>{ls(t)?t.dom.classList.add(e):Af(t,e)},Tf=t=>{0===(ls(t)?t.dom.classList:Rf(t)).length&&se(t,"class")},Oa=(t,e)=>{ls(t)?t.dom.classList.remove(e):Of(t,e),Tf(t)},Xl=(t,e)=>ls(t)&&t.dom.classList.contains(e),cs=t=>void 0!==t.style&&yt(t.style.getPropertyValue),us=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},Ta=(t,e)=>{const n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,t),new Error(o)}return us(n.childNodes[0])},Jt=(t,e)=>{const n=(e||document).createElement(t);return us(n)},dr=(t,e)=>{const n=(e||document).createTextNode(t);return us(n)},R=us,Bf=(t,e)=>{const n=[],o=s=>(n.push(s),e(s));let r=e(t);do{r=r.bind(o)}while(r.isSome());return n},rn=(t,e)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const o=n;if(void 0!==o.matches)return o.matches(e);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(e);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},Df=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,wt=(t,e)=>t.dom===e.dom,Fn=(t,e)=>{const n=t.dom,o=e.dom;return n!==o&&n.contains(o)},Pf=t=>R(t.dom.ownerDocument),Un=t=>sx(t)?t:Pf(t),ms=t=>R(Un(t).dom.defaultView),Me=t=>y.from(t.dom.parentNode).map(R),No=t=>y.from(t.dom.previousSibling).map(R),fs=t=>y.from(t.dom.nextSibling).map(R),Lf=t=>es(Bf(t,No)),Mf=t=>Bf(t,fs),ae=t=>bt(t.dom.childNodes,R),Ba=(t,e)=>y.from(t.dom.childNodes[e]).map(R),If=t=>Ba(t,0),Ql=t=>Ba(t,t.dom.childNodes.length-1),Ff=t=>t.dom.childNodes.length,Jl=t=>ax(t)&&Q(t.dom.host),Uf=yt(Element.prototype.attachShadow)&&yt(Node.prototype.getRootNode),lx=G(Uf),Jn=Uf?t=>R(t.dom.getRootNode()):Un,Zl=t=>Jl(t)?t:(e=>{const n=e.dom.head;if(null==n)throw new Error("Head is not available yet");return R(n)})(Un(t)),dx=t=>R(t.dom.host),zf=t=>{if(lx()&&Q(t.target)){const e=R(t.target);if(Qe(e)&&cx(e)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return _e(n)}}return y.from(t.target)},cx=t=>Q(t.dom.shadowRoot),cr=t=>{const e=Le(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;const n=e.ownerDocument;return(o=>{const r=Jn(o);return Jl(r)?y.some(r):y.none()})(R(e)).fold(()=>n.body.contains(e),Km(cr,dx))},jf=(t,e,n)=>{if(!lt(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);cs(t)&&t.style.setProperty(e,n)},Hf=(t,e,n)=>{jf(t.dom,e,n)},Da=(t,e)=>{const n=t.dom;Nt(e,(o,r)=>{jf(n,r,o)})},yn=(t,e)=>{const n=t.dom,o=window.getComputedStyle(n).getPropertyValue(e);return""!==o||cr(t)?o:$f(n,e)},$f=(t,e)=>cs(t)?t.style.getPropertyValue(e):"",Pa=(t,e)=>{const o=$f(t.dom,e);return y.from(o).filter(r=>r.length>0)},Vf=t=>{const e={},n=t.dom;if(cs(n))for(let o=0;o<n.style.length;o++){const r=n.style.item(o);e[r]=n.style[r]}return e},qf=(t,e)=>{var n,o;o=e,cs(n=t.dom)&&n.style.removeProperty(o),lr(In(t,"style").map(ir),"")&&se(t,"style")},Ie=(t,e)=>{Me(t).each(n=>{n.dom.insertBefore(e.dom,t.dom)})},Zn=(t,e)=>{fs(t).fold(()=>{Me(t).each(n=>{qt(n,e)})},n=>{Ie(n,e)})},Wf=(t,e)=>{If(t).fold(()=>{qt(t,e)},n=>{t.dom.insertBefore(e.dom,n.dom)})},qt=(t,e)=>{t.dom.appendChild(e.dom)},Ro=(t,e)=>{j(e,n=>{qt(t,n)})},gs=t=>{t.dom.textContent="",j(ae(t),e=>{Ot(e)})},Ot=t=>{const e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},to=t=>{const e=ae(t);var n,o;e.length>0&&(n=t,j(o=e,(r,s)=>{Zn(0===s?n:o[s-1],r)})),Ot(t)},Kf=t=>t.dom.innerHTML,La=(t,e)=>{const n=Pf(t).dom,o=R(n.createDocumentFragment()),r=((s,a)=>{const i=(a||document).createElement("div");return i.innerHTML=s,ae(R(i))})(e,n);Ro(o,r),gs(t),qt(t,o)},mx=(t,e,n,o)=>{t.dom.removeEventListener(e,n,o)},Gf=(t,e)=>({left:t,top:e,translate:(n,o)=>Gf(t+n,e+o)}),ur=Gf,Ma=(t,e)=>void 0!==t?t:void 0!==e?e:0,td=t=>{const e=t.dom,n=e.ownerDocument.body;return n===e?ur(n.offsetLeft,n.offsetTop):cr(t)?(o=>{const r=o.getBoundingClientRect();return ur(r.left,r.top)})(e):ur(0,0)},ed=t=>{const e=void 0!==t?t.dom:document;return ur(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)},Yf=(t,e,n)=>{const o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(t,e)},Xf=(t,e)=>{_o().browser.isSafari()&&yt(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},Qf=(t,e,n,o)=>({x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}),Jf=t=>{const e=void 0===t?window:t,o=ed(R(e.document));return(r=>{const s=void 0===r?window:r;return _o().browser.isFirefox()?y.none():y.from(s.visualViewport)})(e).fold(()=>{const r=e.document.documentElement;return Qf(o.left,o.top,r.clientWidth,r.clientHeight)},r=>Qf(Math.max(r.pageLeft,o.left),Math.max(r.pageTop,o.top),r.width,r.height))},Ao=t=>e=>!!e&&e.nodeType===t,Ia=t=>!!t&&!Object.getPrototypeOf(t),J=Ao(1),nd=t=>{const e=t.toLowerCase();return n=>Q(n)&&n.nodeName.toLowerCase()===e},sn=t=>{const e=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const o=n.nodeName.toLowerCase();return Et(e,o)}return!1}},Fa=(t,e)=>{const n=e.toLowerCase().split(" ");return o=>{if(J(o)){const r=o.ownerDocument.defaultView;if(r)for(let s=0;s<n.length;s++){const a=r.getComputedStyle(o,null);if((a?a.getPropertyValue(t):null)===n[s])return!0}}return!1}},Zf=t=>e=>J(e)&&e.hasAttribute(t),Oo=t=>J(t)&&t.hasAttribute("data-mce-bogus"),zn=t=>J(t)&&"TABLE"===t.tagName,tg=t=>e=>!(!J(e)||e.contentEditable!==t&&e.getAttribute("data-mce-contenteditable")!==t),od=sn(["textarea","input"]),z=Ao(3),fx=Ao(4),gx=Ao(7),eo=Ao(8),ps=Ao(9),rd=Ao(11),It=nd("br"),eg=nd("img"),Cn=tg("true"),At=tg("false"),Ua=sn(["td","th"]),ng=sn(["td","th","caption"]),wn=sn(["video","audio","object","embed"]),px=nd("li"),hx=_o().browser,og=t=>Vt(t,Qe),rg=(t,e)=>t.children&&Et(t.children,e);var sg=(t,e,n,o,r)=>t(n,o)?y.some(n):yt(r)&&r(n)?y.none():e(n,o,r);const mr=(t,e,n)=>{let o=t.dom;const r=yt(n)?n:Tt;for(;o.parentNode;){o=o.parentNode;const s=R(o);if(e(s))return y.some(s);if(r(s))break}return y.none()},fr=(t,e,n)=>sg((o,r)=>r(o),mr,t,e,n),hs=(t,e,n)=>mr(t,o=>rn(o,e),n),bs=(t,e)=>((n,o)=>{const r=void 0===o?document:o.dom;return Df(r)?y.none():y.from(r.querySelector(n)).map(R)})(e,t),To=(t,e,n)=>sg((o,r)=>rn(o,r),hs,t,e,n),ag=(t,e={})=>{let n=0;const o={},r=R(t),s=Un(r),a=e.maxLoadTime||5e3,i=d=>new Promise((c,u)=>{let f;const m=H._addCacheSuffix(d),g=Rt(o,m).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0}));o[m]=g,g.count++;const h=(x,E)=>{j(x,Jr),g.status=E,g.passed=[],g.failed=[],f&&(f.onload=null,f.onerror=null,f=null)},p=()=>h(g.passed,2),v=()=>h(g.failed,3),b=()=>{var x;x=b,(()=>{const E=t.styleSheets;let S=E.length;for(;S--;){const O=E[S].ownerNode;if(O&&f&&O.id===f.id)return p(),!0}return!1})()||(Date.now()-w<a?setTimeout(x):v())};if(c&&g.passed.push(c),u&&g.failed.push(u),1===g.status)return;if(2===g.status)return void p();if(3===g.status)return void v();g.status=1;const C=Jt("link",s.dom);Qn(C,{rel:"stylesheet",type:"text/css",id:g.id});const w=Date.now();var k;e.contentCssCors&&Qt(C,"crossOrigin","anonymous"),e.referrerPolicy&&Qt(C,"referrerpolicy",e.referrerPolicy),f=C.dom,f.onload=b,f.onerror=v,k=C,qt(Zl(r),k),Qt(C,"href",m)}),l=d=>{const c=H._addCacheSuffix(d);Rt(o,c).each(u=>{0==--u.count&&(delete o[c],(f=>{const m=Zl(r);bs(m,"#"+f).each(Ot)})(u.id))})};return{load:i,loadAll:d=>Promise.allSettled(bt(d,c=>i(c).then(G(c)))).then(c=>{const u=Zr(c,f=>"fulfilled"===f.status);return u.fail.length>0?Promise.reject(bt(u.fail,f=>f.reason)):bt(u.pass,f=>f.value)}),unload:l,unloadAll:d=>{j(d,c=>{l(c)})},_setReferrerPolicy:d=>{e.referrerPolicy=d}}},ig=(()=>{const t=new WeakMap;return{forElement:(e,n)=>{const o=Jn(e).dom;return y.from(t.get(o)).getOrThunk(()=>{const r=ag(o,n);return t.set(o,r),r})}}})();class Ht{constructor(e,n){this.node=e,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,n,o,r){if(e){if(!r&&e[n])return e[n];if(e!==this.rootNode){let s=e[o];if(s)return s;for(let a=e.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(s=a[o],s)return s}}}findPreviousNode(e,n){if(e){const o=e.previousSibling;if(this.rootNode&&o===this.rootNode)return;if(o){if(!n)for(let s=o.lastChild;s;s=s.lastChild)if(!s.lastChild)return s;return o}const r=e.parentNode;if(r&&r!==this.rootNode)return r}}}const bx=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),no=t=>{let e;return n=>(e=e||Il(t,Ut),gt(e,Bt(n)))},an=no(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),sd=t=>Qe(t)&&!an(t),Bo=t=>Qe(t)&&"br"===Bt(t),vx=no(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),ad=no(["ul","ol","dl"]),vs=no(["li","dd","dt"]),yx=no(["thead","tbody","tfoot"]),za=no(["td","th"]),ja=no(["pre","script","textarea","style"]),Cx=no(bx),wx=t=>Cx(t)||sd(t),lg=(t,e,n)=>hs(t,e,n).isSome(),Zt="\xa0",dg=t=>"\ufeff"===t,cg=(t,e)=>{let n=[];return j(ae(t),o=>{e(o)&&(n=n.concat([o])),n=n.concat(cg(o,e))}),n},ye=(t,e)=>((n,o)=>{const r=void 0===o?document:o.dom;return Df(r)?[]:bt(r.querySelectorAll(n),R)})(e,t),ug=((t,e)=>{const n=o=>t(o)?y.from(o.dom.nodeValue):y.none();return{get:o=>{if(!t(o))throw new Error("Can only get text value of a text node");return n(o).getOr("")},getOption:n,set:(o,r)=>{if(!t(o))throw new Error("Can only set raw text value of a text node");o.dom.nodeValue=r}}})(Le),id=t=>ug.get(t),mg=t=>ug.getOption(t),ld=()=>{const t=Jt("br");return Qt(t,"data-mce-bogus","1"),t},Do=t=>{gs(t),qt(t,ld())},xx=t=>{Ql(t).each(e=>{No(e).each(n=>{an(t)&&Bo(e)&&an(n)&&Ot(e)})})},ie="\ufeff",Ha=dg,jn=t=>t.replace(/\uFEFF/g,""),kx=J,gr=z,pr=t=>(gr(t)&&(t=t.parentNode),kx(t)&&t.hasAttribute("data-mce-caret")),hr=t=>gr(t)&&Ha(t.data),Fe=t=>pr(t)||hr(t),fg=t=>t.firstChild!==t.lastChild||!It(t.firstChild),dd=t=>{const e=t.container();return!!z(e)&&(e.data.charAt(t.offset())===ie||t.isAtStart()&&hr(e.previousSibling))},cd=t=>{const e=t.container();return!!z(e)&&(e.data.charAt(t.offset()-1)===ie||t.isAtEnd()&&hr(e.nextSibling))},$a=t=>gr(t)&&t.data[0]===ie,Va=t=>gr(t)&&t.data[t.data.length-1]===ie,ud=t=>t&&t.hasAttribute("data-mce-caret")?((e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Oo(r)&&(null===(n=r.parentNode)||void 0===n||n.removeChild(r))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,gg=t=>pr(t.startContainer),pg=Cn,Sx=At,_x=It,Ex=z,Nx=sn(["script","style","textarea"]),hg=sn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Rx=sn(["table"]),Ax=Fe,Ze=t=>!Ax(t)&&(Ex(t)?!Nx(t.parentNode):hg(t)||_x(t)||Rx(t)||md(t)),md=t=>{return!(J(e=t)&&"true"===e.getAttribute("unselectable"))&&Sx(t);var e},bg=(t,e)=>Ze(t)&&((n,o)=>{for(let r=n.parentNode;r&&r!==o;r=r.parentNode){if(md(r))return!1;if(pg(r))return!0}return!0})(t,e),Ox=/^[ \t\r\n]*$/,Po=t=>Ox.test(t),vg=t=>"\n"===t||"\r"===t,yg=(t,e=4,n=!0,o=!0)=>{const r=(l=e)<=0?"":new Array(l+1).join(" "),s=t.replace(/\t/g,r);var l;return Oe(s,(i,l)=>{return-1!==" \f\t\v".indexOf(l)||l===Zt?i.pcIsSpace||""===i.str&&n||i.str.length===s.length-1&&o||(c=i.str.length+1)<(d=s).length&&c>=0&&vg(d[c])?{pcIsSpace:!1,str:i.str+Zt}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:vg(l),str:i.str+l};var d,c},{pcIsSpace:!1,str:""}).str},qa=(t,e)=>{return Ze(t)&&(o=e,!(z(n=t)&&Po(n.data)&&!((r,s)=>{const a=R(s),i=R(r);return lg(i,"pre,code",et(wt,a))})(n,o)))||(n=>J(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(t)||Tx(t);var n,o},Tx=Zf("data-mce-bookmark"),Bx=Zf("data-mce-bogus"),Dx=t=>J(t)&&"all"===t.getAttribute("data-mce-bogus"),te=(t,e=!0)=>((n,o)=>{let r=0;if(qa(n,n))return!1;{let s=n.firstChild;if(!s)return!0;const a=new Ht(s,n);do{if(o){if(Dx(s)){s=a.next(!0);continue}if(Bx(s)){s=a.next();continue}}if(It(s))r++,s=a.next();else{if(qa(s,n))return!1;s=a.next()}}while(s);return r<=1}})(t.dom,e),Cg=(t,e)=>Q(t)&&(qa(t,e)||sd(R(t))),wg=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),fd=(t,e,n)=>{var o;const r=n||e;if(J(e)&&wg(e))return e;const s=e.childNodes;for(let a=s.length-1;a>=0;a--)fd(t,s[a],r);if(J(e)){const a=e.childNodes;1===a.length&&wg(a[0])&&(null===(o=e.parentNode)||void 0===o||o.insertBefore(a[0],e))}return rd(a=e)||ps(a)||qa(e,r)||(a=>!!J(a)&&a.childNodes.length>0)(e)||((a,i)=>z(a)&&a.data.length>0&&((l,d)=>{const c=new Ht(l,d).prev(!1),u=new Ht(l,d).next(!1),f=Se(c)||Cg(c,d),m=Se(u)||Cg(u,d);return f&&m})(a,i))(e,r)||t.remove(e),e;var a},Px=H.makeMap,Wa=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ka=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Lx=/[<>&\"\']/g,Mx=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Ix={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},Lo={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Fx={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},xg=(t,e)=>{const n={};if(t){const o=t.split(",");e=e||10;for(let r=0;r<o.length;r+=2){const s=String.fromCharCode(parseInt(o[r],e));if(!Lo[s]){const a="&"+o[r+1]+";";n[s]=a,n[a]=s}}return n}},gd=xg("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),kg=(t,e)=>t.replace(e?Wa:Ka,n=>Lo[n]||n),Sg=(t,e)=>t.replace(e?Wa:Ka,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":Lo[n]||"&#"+n.charCodeAt(0)+";"),pd=(t,e,n)=>{const o=n||gd;return t.replace(e?Wa:Ka,r=>Lo[r]||o[r]||r)},oo={encodeRaw:kg,encodeAllRaw:t=>(""+t).replace(Lx,e=>Lo[e]||e),encodeNumeric:Sg,encodeNamed:pd,getEncodeFunc:(t,e)=>{const n=xg(e)||gd,o=Px(t.replace(/\+/g,","));return o.named&&o.numeric?(r,s)=>r.replace(s?Wa:Ka,a=>void 0!==Lo[a]?Lo[a]:void 0!==n[a]?n[a]:a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";"):o.named?e?(r,s)=>pd(r,s,n):pd:o.numeric?Sg:kg},decode:t=>t.replace(Mx,(e,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):Ix[n]||String.fromCharCode(n):Fx[e]||gd[e]||(o=>{const r=Jt("div").dom;return r.innerHTML=o,r.textContent||r.innerText||o})(e))},Ga={},Ya={},Ux={},br=H.makeMap,le=H.each,hd=H.extend,_g=H.explode,zx=H.inArray,oe=(t,e)=>(t=H.trim(t))?t.split(e||" "):[],Eg=(t,e={})=>{const n=br(t," ",br(t.toUpperCase()," "));return hd(n,e)},Ng=t=>Eg("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),bd=(t,e)=>{if(t){const n={};return lt(t)&&(t={"*":t}),le(t,(o,r)=>{n[r]=n[r.toUpperCase()]="map"===e?br(o,/[, ]/):_g(o,/[, ]/)}),n}},ro=(t={})=>{var e;const n={},o={};let r=[];const s={},a={},i=(T,I,q)=>{const X=t[T];if(X)return br(X,/[, ]/,br(X.toUpperCase(),/[, ]/));{let $=Ya[T];return $||($=Eg(I,q),Ya[T]=$),$}},l=null!==(e=t.schema)&&void 0!==e?e:"html5",d=(T=>{const I={};let q,X,$,tt;const W=(xt,Lt="",ue="")=>{const ee=oe(ue),Ge=oe(xt);let Ye=Ge.length;for(;Ye--;){const me=oe([q,Lt].join(" "));I[Ge[Ye]]={attributes:Il(me,()=>({})),attributesOrder:me,children:Il(ee,G(Ux))}}},at=(xt,Lt)=>{const ue=oe(xt),ee=oe(Lt);let Ge=ue.length;for(;Ge--;){const Ye=I[ue[Ge]];for(let me=0,en=ee.length;me<en;me++)Ye.attributes[ee[me]]={},Ye.attributesOrder.push(ee[me])}};if(Ga[T])return Ga[T];if(q="id accesskey class dir lang style tabindex title role",X="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",$="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==T&&(q+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",X+=" article aside details dialog figure main header footer hgroup section nav",$+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==T){q+=" xml:lang";const xt="acronym applet basefont big font strike tt";$=[$,xt].join(" "),le(oe(xt),ue=>{W(ue,"",$)});const Lt="center dir isindex noframes";X=[X,Lt].join(" "),tt=[X,$].join(" "),le(oe(Lt),ue=>{W(ue,"",tt)})}return tt=tt||[X,$].join(" "),W("html","manifest","head body"),W("head","","base command link meta noscript script style title"),W("title hr noscript br"),W("base","href target"),W("link","href rel media hreflang type sizes hreflang"),W("meta","name http-equiv content charset"),W("style","media type scoped"),W("script","src async defer type charset"),W("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",tt),W("address dt dd div caption","",tt),W("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",$),W("blockquote","cite",tt),W("ol","reversed start type","li"),W("ul","","li"),W("li","value",tt),W("dl","","dt dd"),W("a","href target rel media hreflang type",$),W("q","cite",$),W("ins del","cite datetime",tt),W("img","src sizes srcset alt usemap ismap width height"),W("iframe","src name width height",tt),W("embed","src type width height"),W("object","data type typemustmatch name usemap form width height",[tt,"param"].join(" ")),W("param","name value"),W("map","name",[tt,"area"].join(" ")),W("area","alt coords shape href target rel media hreflang type"),W("table","border","caption colgroup thead tfoot tbody tr"+("html4"===T?" col":"")),W("colgroup","span","col"),W("col","span"),W("tbody thead tfoot","","tr"),W("tr","","td th"),W("td","colspan rowspan headers",tt),W("th","colspan rowspan headers scope abbr",tt),W("form","accept-charset action autocomplete enctype method name novalidate target",tt),W("fieldset","disabled form name",[tt,"legend"].join(" ")),W("label","form for",$),W("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),W("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===T?tt:$),W("select","disabled form multiple name required size","option optgroup"),W("optgroup","disabled label","option"),W("option","disabled label selected value"),W("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),W("menu","type label",[tt,"li"].join(" ")),W("noscript","",tt),"html4"!==T&&(W("wbr"),W("ruby","",[$,"rt rp"].join(" ")),W("figcaption","",tt),W("mark rt rp summary bdi","",$),W("canvas","width height",tt),W("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[tt,"track source"].join(" ")),W("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[tt,"track source"].join(" ")),W("picture","","img source"),W("source","src srcset type media sizes"),W("track","kind src srclang label default"),W("datalist","",[$,"option"].join(" ")),W("article section nav aside main header footer","",tt),W("hgroup","","h1 h2 h3 h4 h5 h6"),W("figure","",[tt,"figcaption"].join(" ")),W("time","datetime",$),W("dialog","open",tt),W("command","type label icon disabled checked radiogroup command"),W("output","for form name",$),W("progress","value max",$),W("meter","value min max low high optimum",$),W("details","open",[tt,"summary"].join(" ")),W("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==T&&(at("script","language xml:space"),at("style","xml:space"),at("object","declare classid code codebase codetype archive standby align border hspace vspace"),at("embed","align name hspace vspace"),at("param","valuetype type"),at("a","charset name rev shape coords"),at("br","clear"),at("applet","codebase archive code object alt name width height align hspace vspace"),at("img","name longdesc align border hspace vspace"),at("iframe","longdesc frameborder marginwidth marginheight scrolling align"),at("font basefont","size color face"),at("input","usemap align"),at("select"),at("textarea"),at("h1 h2 h3 h4 h5 h6 div p legend caption","align"),at("ul","type compact"),at("li","type"),at("ol dl menu dir","compact"),at("pre","width xml:space"),at("hr","align noshade size width"),at("isindex","prompt"),at("table","summary width frame rules cellspacing cellpadding align bgcolor"),at("col","width align char charoff valign"),at("colgroup","width align char charoff valign"),at("thead","align char charoff valign"),at("tr","align char charoff valign bgcolor"),at("th","axis align char charoff valign nowrap bgcolor width height"),at("form","accept"),at("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),at("tfoot","align char charoff valign"),at("tbody","align char charoff valign"),at("area","nohref"),at("body","background bgcolor text link vlink alink")),"html4"!==T&&(at("input button select textarea","autofocus"),at("input textarea","placeholder"),at("a","download"),at("link script img","crossorigin"),at("img","loading"),at("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==T&&j([I.video,I.audio],xt=>{delete xt.children.audio,delete xt.children.video}),le(oe("a form meter progress dfn"),xt=>{I[xt]&&delete I[xt].children[xt]}),delete I.caption.children.table,delete I.script,Ga[T]=I,I})(l);!1===t.verify_html&&(t.valid_elements="*[*]");const c=bd(t.valid_styles),u=bd(t.invalid_styles,"map"),f=bd(t.valid_classes,"map"),m=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),g=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),h=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),p=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),v="td th iframe video audio object script code",b=i("non_empty_elements",v+" pre",h),C=i("move_caret_before_on_enter_elements",v+" table",h),w=i("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),k=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",w),x=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp");le("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),T=>{a[T]=new RegExp("</"+T+"[^>]*>","gi")});const E=T=>new RegExp("^"+T.replace(/([?+*])/g,".$1")+"$"),S=T=>{const I=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,q=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,X=/[*?+]/;if(T){const $=oe(T,",");let tt,W;n["@"]&&(tt=n["@"].attributes,W=n["@"].attributesOrder);for(let at=0,xt=$.length;at<xt;at++){let Lt=I.exec($[at]);if(Lt){const ue=Lt[1],ee=Lt[2],Ge=Lt[3],Ye=Lt[5],me={},en=[],Mt={attributes:me,attributesOrder:en};if("#"===ue&&(Mt.paddEmpty=!0),"-"===ue&&(Mt.removeEmpty=!0),"!"===Lt[4]&&(Mt.removeEmptyAttrs=!0),tt&&(Nt(tt,(Be,nn)=>{me[nn]=Be}),W&&en.push(...W)),Ye){const Be=oe(Ye,"|");for(let nn=0,_l=Be.length;nn<_l;nn++)if(Lt=q.exec(Be[nn]),Lt){const Kn={},ya=Lt[1],De=Lt[2].replace(/[\\:]:/g,":"),nr=Lt[3],Gn=Lt[4];if("!"===ya&&(Mt.attributesRequired=Mt.attributesRequired||[],Mt.attributesRequired.push(De),Kn.required=!0),"-"===ya){delete me[De],en.splice(zx(en,De),1);continue}if(nr&&("="===nr&&(Mt.attributesDefault=Mt.attributesDefault||[],Mt.attributesDefault.push({name:De,value:Gn}),Kn.defaultValue=Gn),"~"===nr&&(Mt.attributesForced=Mt.attributesForced||[],Mt.attributesForced.push({name:De,value:Gn}),Kn.forcedValue=Gn),"<"===nr&&(Kn.validValues=br(Gn,"?"))),X.test(De)){const Xr=Kn;Mt.attributePatterns=Mt.attributePatterns||[],Xr.pattern=E(De),Mt.attributePatterns.push(Xr)}else me[De]||en.push(De),me[De]=Kn}}if(tt||"@"!==ee||(tt=me,W=en),Ge&&(Mt.outputName=ee,n[Ge]=Mt),X.test(ee)){const Be=Mt;Be.pattern=E(ee),r.push(Be)}else n[ee]=Mt}}}},O=T=>{r=[],j(Pe(n),I=>{delete n[I]}),S(T),le(d,(I,q)=>{o[q]=I.children})},B=T=>{const I=/^(~)?(.+)$/;T&&(delete Ya.text_block_elements,delete Ya.block_elements,le(oe(T,","),q=>{const X=I.exec(q);if(X){const $="~"===X[1],tt=$?"span":"div",W=X[2];if(o[W]=o[tt],s[W]=tt,b[W.toUpperCase()]={},b[W]={},$||(k[W.toUpperCase()]={},k[W]={}),!n[W]){let at=n[tt];at=hd({},at),delete at.removeEmptyAttrs,delete at.removeEmpty,n[W]=at}le(o,(at,xt)=>{at[tt]&&(o[xt]=at=hd({},o[xt]),at[W]=at[tt])})}}))},_=T=>{const I=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete Ga[l],T&&le(oe(T,","),q=>{const X=I.exec(q);if(X){const $=X[1];let tt;tt=$?o[X[2]]:o[X[2]]={"#comment":{}},tt=o[X[2]],le(oe(X[3],"|"),W=>{"-"===$?delete tt[W]:tt[W]={}})}})},D=T=>{const I=n[T];if(I)return I;let q=r.length;for(;q--;){const X=r[q];if(X.pattern.test(T))return X}};t.valid_elements?O(t.valid_elements):(le(d,(T,I)=>{n[I]={attributes:T.attributes,attributesOrder:T.attributesOrder},o[I]=T.children}),le(oe("strong/b em/i"),T=>{const I=oe(T,"/");n[I[1]].outputName=I[0]}),le(x,(T,I)=>{n[I]&&(t.padd_empty_block_inline_children&&(n[I].paddInEmptyBlock=!0),n[I].removeEmpty=!0)}),le(oe("ol ul blockquote a table tbody"),T=>{n[T]&&(n[T].removeEmpty=!0)}),le(oe("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),T=>{n[T].paddEmpty=!0}),le(oe("span"),T=>{n[T].removeEmptyAttrs=!0})),B(t.custom_elements),_(t.valid_children),S(t.extended_valid_elements),_("+ol[ul|ol],+ul[ul|ol]"),le({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(T,I)=>{n[I]&&(n[I].parentsRequired=oe(T))}),t.invalid_elements&&le(_g(t.invalid_elements),T=>{n[T]&&delete n[T]}),D("span")||S("span[!data-mce-type|*]");const M=G(c),U=G(u),K=G(f),Y=G(p),V=G(k),st=G(w),ht=G(x),St=G(Object.seal(h)),nt=G(g),ct=G(b),mt=G(C),N=G(m),A=G(Object.seal(a)),L=G(s);return{type:l,children:o,elements:n,getValidStyles:M,getValidClasses:K,getBlockElements:V,getInvalidStyles:U,getVoidElements:St,getTextBlockElements:st,getTextInlineElements:ht,getBoolAttrs:Y,getElementRule:D,getSelfClosingElements:nt,getNonEmptyElements:ct,getMoveCaretBeforeOnEnterElements:mt,getWhitespaceElements:N,getSpecialElements:A,isValidChild:(T,I)=>{const q=o[T.toLowerCase()];return!(!q||!q[I.toLowerCase()])},isValid:(T,I)=>{const q=D(T);if(q){if(!I)return!0;{if(q.attributes[I])return!0;const X=q.attributePatterns;if(X){let $=X.length;for(;$--;)if(X[$].pattern.test(I))return!0}}}return!1},getCustomElements:L,addValidElements:S,setValidElements:O,addCustomElements:B,addValidChildren:_}},vd=(t={},e)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/,s={};let a,i;e&&(a=e.getValidStyles(),i=e.getInvalidStyles());const l="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let c=0;c<l.length;c++)s[l[c]]="\ufeff"+c,s["\ufeff"+c]=l[c];const d={parse:c=>{const u={};let f=!1;const m=t.url_converter,g=t.url_converter_scope||d,h=(O,B,_)=>{const D=u[O+"-top"+B];if(!D)return;const M=u[O+"-right"+B];if(!M)return;const U=u[O+"-bottom"+B];if(!U)return;const K=u[O+"-left"+B];if(!K)return;const Y=[D,M,U,K];let V=Y.length-1;for(;V--&&Y[V]===Y[V+1];);V>-1&&_||(u[O+B]=-1===V?Y[0]:Y.join(" "),delete u[O+"-top"+B],delete u[O+"-right"+B],delete u[O+"-bottom"+B],delete u[O+"-left"+B])},p=O=>{const B=u[O];if(!B)return;const _=B.split(" ");let D=_.length;for(;D--;)if(_[D]!==_[0])return!1;return u[O]=_[0],!0},v=O=>(f=!0,s[O]),b=(O,B)=>(f&&(O=O.replace(/\uFEFF[0-9]/g,_=>s[_])),B||(O=O.replace(/\\([\'\";:])/g,"$1")),O),C=O=>String.fromCharCode(parseInt(O.slice(1),16)),w=O=>O.replace(/\\[0-9a-f]+/gi,C),k=(O,B,_,D,M,U)=>{if(M=M||U)return"'"+(M=b(M)).replace(/\'/g,"\\'")+"'";if(B=b(B||_||D||""),!t.allow_script_urls){const K=B.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(K)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(K))return""}return m&&(B=m.call(g,B,"style")),"url('"+B.replace(/\'/g,"\\'")+"')"};if(c){let O;for(c=(c=c.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,v).replace(/\"[^\"]+\"|\'[^\']+\'/g,B=>B.replace(/[;:]/g,v));O=o.exec(c);){o.lastIndex=O.index+O[0].length;let B=O[1].replace(r,"").toLowerCase(),_=O[2].replace(r,"");if(B&&_){if(B=w(B),_=w(_),-1!==B.indexOf("\ufeff")||-1!==B.indexOf('"')||!t.allow_script_urls&&("behavior"===B||/expression\s*\(|\/\*|\*\//.test(_)))continue;"font-weight"===B&&"700"===_?_="bold":"color"!==B&&"background-color"!==B||(_=_.toLowerCase()),_=_.replace(n,k),u[B]=f?b(_,!0):_}}h("border","",!0),h("border","-width"),h("border","-color"),h("border","-style"),h("padding",""),h("margin",""),E="border-style",S="border-color",p(x="border-width")&&p(E)&&p(S)&&(u.border=u[x]+" "+u[E]+" "+u[S],delete u[x],delete u[E],delete u[S]),"medium none"===u.border&&delete u.border,"none"===u["border-image"]&&delete u["border-image"]}var x,E,S;return u},serialize:(c,u)=>{let f="";const m=(g,h)=>{const p=h[g];if(p)for(let v=0,b=p.length;v<b;v++){const C=p[v],w=c[C];w&&(f+=(f.length>0?" ":"")+C+": "+w+";")}};return u&&a?(m("*",a),m(u,a)):Nt(c,(g,h)=>{g&&((p,v)=>{if(!i||!v)return!0;let b=i["*"];return!(b&&b[p]||(b=i[v],b&&b[p]))})(h,u)&&(f+=(f.length>0?" ":"")+h+": "+g+";")}),f}};return d},jx={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Rg=(t,e)=>{const n=null!=e?e:{};for(const o in t)gt(jx,o)||(n[o]=t[o]);return Q(t.composedPath)&&(n.composedPath=()=>t.composedPath()),n},yd=(t,e,n,o)=>{var r;const s=Rg(e,o);return s.type=t,Ft(s.target)&&(s.target=null!==(r=s.srcElement)&&void 0!==r?r:n),(Ft((a=e).preventDefault)||(i=a)instanceof Event||yt(i.initEvent))&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=Ut,yt(e.preventDefault)&&e.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=Ut,yt(e.stopPropagation)&&e.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=Ut,s.stopPropagation()},(a=>a.isDefaultPrevented===Ut||a.isDefaultPrevented===Tt)(s)||(s.isDefaultPrevented=!0===s.defaultPrevented?Ut:Tt,s.isPropagationStopped=!0===s.cancelBubble?Ut:Tt,s.isImmediatePropagationStopped=Tt)),s;var a,i},Hx=/^(?:mouse|contextmenu)|click/,Cd=(t,e,n,o)=>{t.addEventListener(e,n,o||!1)},Xa=(t,e,n,o)=>{t.removeEventListener(e,n,o||!1)},Cs=(t,e)=>{const n=yd(t.type,t,document,e);if(Q(o=t)&&Hx.test(o.type)&&Se(t.pageX)&&!Se(t.clientX)){const o=n.target.ownerDocument||document,r=o.documentElement,s=o.body,a=n;a.pageX=t.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),a.pageY=t.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)}var o;return n},$x=(t,e,n)=>{const o=t.document,r={type:"ready"};if(n.domLoaded)return void e(r);const s=()=>{Xa(t,"DOMContentLoaded",s),Xa(t,"load",s),n.domLoaded||(n.domLoaded=!0,e(r)),t=null};"complete"===o.readyState||"interactive"===o.readyState&&o.body?s():Cd(t,"DOMContentLoaded",s),n.domLoaded||Cd(t,"load",s)};class Mo{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,n,o,r){const s=this;let a;const i=window,l=f=>{s.executeHandlers(Cs(f||i.event),d)};if(!e||z(e)||eo(e))return o;let d;e[s.expando]?d=e[s.expando]:(d=s.count++,e[s.expando]=d,s.events[d]={}),r=r||e;const c=n.split(" ");let u=c.length;for(;u--;){let f=c[u],m=l,g=!1,h=!1;"DOMContentLoaded"===f&&(f="ready"),s.domLoaded&&"ready"===f&&"complete"===e.readyState?o.call(r,Cs({type:f})):(s.hasFocusIn||"focusin"!==f&&"focusout"!==f||(g=!0,h="focusin"===f?"focus":"blur",m=p=>{const v=Cs(p||i.event);v.type="focus"===v.type?"focusin":"focusout",s.executeHandlers(v,d)}),a=s.events[d][f],a?"ready"===f&&s.domLoaded?o(Cs({type:f})):a.push({func:o,scope:r}):(s.events[d][f]=a=[{func:o,scope:r}],a.fakeName=h,a.capture=g,a.nativeHandler=m,"ready"===f?$x(e,m,s):Cd(e,h||f,m,g)))}return e=a=null,o}unbind(e,n,o){if(!e||z(e)||eo(e))return this;const r=e[this.expando];if(r){let s=this.events[r];if(n){const a=n.split(" ");let i=a.length;for(;i--;){const l=a[i],d=s[l];if(d){if(o){let c=d.length;for(;c--;)if(d[c].func===o){const u=d.nativeHandler,f=d.fakeName,m=d.capture,g=d.slice(0,c).concat(d.slice(c+1));g.nativeHandler=u,g.fakeName=f,g.capture=m,s[l]=g}}o&&0!==d.length||(delete s[l],Xa(e,d.fakeName||l,d.nativeHandler,d.capture))}}}else Nt(s,(a,i)=>{Xa(e,a.fakeName||i,a.nativeHandler,a.capture)}),s={};for(const a in s)if(gt(s,a))return this;delete this.events[r];try{delete e[this.expando]}catch(a){e[this.expando]=null}}return this}fire(e,n,o){return this.dispatch(e,n,o)}dispatch(e,n,o){if(!e||z(e)||eo(e))return this;const r=Cs({type:n,target:e},o);do{const s=e[this.expando];s&&this.executeHandlers(r,s),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return this}clean(e){if(!e||z(e)||eo(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const n=e.getElementsByTagName("*");let o=n.length;for(;o--;)(e=n[o])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,n){const o=this.events[n],r=o&&o[e.type];if(r)for(let s=0,a=r.length;s<a;s++){const i=r[s];if(i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}Mo.Event=new Mo;const wd=H.each,Vx=H.grep,xd="data-mce-style",qx=H.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),ws=(t,e,n)=>{Ft(n)||""===n?se(t,e):Qt(t,e,n)},Ag=t=>t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),vr=(t,e)=>{let n=0;if(t)for(let o=t.nodeType,r=t.previousSibling;r;r=r.previousSibling){const s=r.nodeType;(!e||!z(r)||s!==o&&r.data.length)&&(n++,o=s)}return n},Og=(t,e)=>{const n=Je(e,"style"),o=t.serialize(t.parse(n),Bt(e));ws(e,xd,o)},Tg=(t,e,n)=>{const o=Ag(e);var r,s;Ft(n)||""===n?qf(t,o):Hf(t,o,(s=o,on(r=n)?gt(qx,s)?r+"":r+"px":r))},_t=(t,e={})=>{const n={},o=window,r={};let s=0;const a=ig.forElement(R(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),i=[],l=e.schema?e.schema:ro({}),d=vd({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),c=e.ownEvents?new Mo:Mo.Event,u=l.getBlockElements(),f=N=>N&&t&&lt(N)?t.getElementById(N):N,m=N=>{const A=f(N);return Q(A)?R(A):null},g=(N,A,L="")=>{let T;const I=m(N);if(Q(I)&&Qe(I)){const q=mt[A];T=q&&q.get?q.get(I.dom,A):Je(I,A)}return Q(T)?T:L},h=N=>{const A=f(N);return Ft(A)?[]:A.attributes},p=(N,A,L)=>{S(N,T=>{if(J(T)){const I=R(T),q=""===L?null:L,X=Je(I,A),$=mt[A];$&&$.set?$.set(I.dom,q,A):ws(I,A,q),X!==q&&e.onSetAttrib&&e.onSetAttrib({attrElm:I.dom,attrName:A,attrValue:q})}})},v=()=>e.root_element||t.body,b=(N,A)=>((L,T,I)=>{let q=0,X=0;const $=L.ownerDocument;if(I=I||L,T){if(I===L&&T.getBoundingClientRect&&"static"===yn(R(L),"position")){const W=T.getBoundingClientRect();return q=W.left+($.documentElement.scrollLeft||L.scrollLeft)-$.documentElement.clientLeft,X=W.top+($.documentElement.scrollTop||L.scrollTop)-$.documentElement.clientTop,{x:q,y:X}}let tt=T;for(;tt&&tt!==I&&tt.nodeType&&!rg(tt,I);)q+=tt.offsetLeft||0,X+=tt.offsetTop||0,tt=tt.offsetParent;for(tt=T.parentNode;tt&&tt!==I&&tt.nodeType&&!rg(tt,I);)q-=tt.scrollLeft||0,X-=tt.scrollTop||0,tt=tt.parentNode;X+=(W=R(T),hx.isFirefox()&&"table"===Bt(W)?og(ae(W)).filter(at=>"caption"===Bt(at)).bind(at=>og(Mf(at)).map(xt=>xt.dom.offsetTop<=at.dom.offsetTop?-at.dom.offsetHeight:0)).getOr(0):0)}var W;return{x:q,y:X}})(t.body,f(N),A),C=(N,A,L)=>{const T=f(N);if(!Ft(T)&&J(T))return L?yn(R(T),Ag(A)):("float"===(A=A.replace(/-(\D)/g,(I,q)=>q.toUpperCase()))&&(A="cssFloat"),T.style?T.style[A]:void 0)},w=N=>{const A=f(N);if(!A)return{w:0,h:0};let L=C(A,"width"),T=C(A,"height");return L&&-1!==L.indexOf("px")||(L="0"),T&&-1!==T.indexOf("px")||(T="0"),{w:parseInt(L,10)||A.offsetWidth||A.clientWidth,h:parseInt(T,10)||A.offsetHeight||A.clientHeight}},k=(N,A)=>{if(!N)return!1;const L=jt(N)?N:[N];return zt(L,T=>rn(R(T),A))},x=(N,A,L,T)=>{const I=[];let q=f(N);T=void 0===T;const X=L||("BODY"!==v().nodeName?v().parentNode:null);if(lt(A))if("*"===A)A=J;else{const $=A;A=tt=>k(tt,$)}for(;q&&!(q===X||Ft(q.nodeType)||ps(q)||rd(q));){if(!A||A(q)){if(!T)return[q];I.push(q)}q=q.parentNode}return T?I:null},E=(N,A,L)=>{let T=A;if(N){lt(A)&&(T=I=>k(I,A));for(let I=N[L];I;I=I[L])if(yt(T)&&T(I))return I}return null},S=function(N,A,L){const T=null!=L?L:this;if(jt(N)){const I=[];return wd(N,(q,X)=>{const $=f(q);$&&I.push(A.call(T,$,X))}),I}{const I=f(N);return!!I&&A.call(T,I)}},O=(N,A)=>{S(N,L=>{Nt(A,(T,I)=>{p(L,I,T)})})},B=(N,A)=>{S(N,L=>{const T=R(L);La(T,A)})},_=(N,A,L,T,I)=>S(N,q=>{const X=lt(A)?t.createElement(A):A;return Q(L)&&O(X,L),T&&(!lt(T)&&T.nodeType?X.appendChild(T):lt(T)&&B(X,T)),I?X:q.appendChild(X)}),D=(N,A,L)=>_(t.createElement(N),N,A,L,!0),M=oo.encodeAllRaw,U=(N,A)=>S(N,L=>{const T=R(L);return A&&j(ae(T),I=>{Le(I)&&0===I.dom.length?Ot(I):Ie(T,I)}),Ot(T),T.dom}),K=(N,A,L)=>{S(N,T=>{if(J(T)){const I=R(T),q=A.split(" ");j(q,X=>{var $,tt,at,xt;Q(L)?(L?ds:Oa)(I,X):(tt=X,ls($=I)?$.dom.classList.toggle(tt):(xt=tt,Et(Rf(at=$),xt)?Of(at,xt):Af(at,xt)),Tf($))})}})},Y=(N,A,L)=>S(A,T=>{var I;const q=jt(A)?N.cloneNode(!0):N;return L&&wd(Vx(T.childNodes),X=>{q.appendChild(X)}),null===(I=T.parentNode)||void 0===I||I.replaceChild(q,T),T}),V=N=>{if(J(N)){const A="a"===N.nodeName.toLowerCase()&&!g(N,"href")&&g(N,"id");if(g(N,"name")||g(N,"data-mce-bookmark")||A)return!0}return!1},st=()=>t.createRange(),ht=(N,A,L,T)=>{if(jt(N)){let I=N.length;const q=[];for(;I--;)q[I]=ht(N[I],A,L,T);return q}return!e.collect||N!==t&&N!==o||i.push([N,A,L,T]),c.bind(N,A,L,T||ct)},St=(N,A,L)=>{if(jt(N)){let T=N.length;const I=[];for(;T--;)I[T]=St(N[T],A,L);return I}if(i.length>0&&(N===t||N===o)){let T=i.length;for(;T--;){const[I,q,X]=i[T];N!==I||A&&A!==q||L&&L!==X||c.unbind(I,q,X)}}return c.unbind(N,A,L)},nt=N=>{if(N&&J(N)){const A=N.getAttribute("data-mce-contenteditable");return A&&"inherit"!==A?A:"inherit"!==N.contentEditable?N.contentEditable:null}return null},ct={doc:t,settings:e,win:o,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:i,styles:d,schema:l,events:c,isBlock:N=>lt(N)?gt(u,N):J(N)&&gt(u,N.nodeName),root:null,clone:(N,A)=>N.cloneNode(A),getRoot:v,getViewPort:N=>{const A=Jf(N);return{x:A.x,y:A.y,w:A.width,h:A.height}},getRect:N=>{const A=f(N),L=b(A),T=w(A);return{x:L.x,y:L.y,w:T.w,h:T.h}},getSize:w,getParent:(N,A,L)=>{const T=x(N,A,L,!1);return T&&T.length>0?T[0]:null},getParents:x,get:f,getNext:(N,A)=>E(N,A,"nextSibling"),getPrev:(N,A)=>E(N,A,"previousSibling"),select:(N,A)=>{var L,T;const I=null!==(T=null!==(L=f(A))&&void 0!==L?L:e.root_element)&&void 0!==T?T:t;return yt(I.querySelectorAll)?be(I.querySelectorAll(N)):[]},is:k,add:_,create:D,createHTML:(N,A,L="")=>{let T="<"+N;for(const I in A)ar(A,I)&&(T+=" "+I+'="'+M(A[I])+'"');return as(L)&&gt(l.getVoidElements(),N)?T+" />":T+">"+L+"</"+N+">"},createFragment:N=>{const A=t.createElement("div"),L=t.createDocumentFragment();let T;for(L.appendChild(A),N&&(A.innerHTML=N);T=A.firstChild;)L.appendChild(T);return L.removeChild(A),L},remove:U,setStyle:(N,A,L)=>{S(N,T=>{const I=R(T);Tg(I,A,L),e.update_styles&&Og(d,I)})},getStyle:C,setStyles:(N,A)=>{S(N,L=>{const T=R(L);Nt(A,(I,q)=>{Tg(T,q,I)}),e.update_styles&&Og(d,T)})},removeAllAttribs:N=>S(N,A=>{const L=A.attributes;for(let T=L.length-1;T>=0;T--)A.removeAttributeNode(L.item(T))}),setAttrib:p,setAttribs:O,getAttrib:g,getPos:b,parseStyle:N=>d.parse(N),serializeStyle:(N,A)=>d.serialize(N,A),addStyle:N=>{if(ct!==_t.DOM&&t===document){if(n[N])return;n[N]=!0}let A=t.getElementById("mceDefaultStyles");if(!A){A=t.createElement("style"),A.id="mceDefaultStyles",A.type="text/css";const L=t.head;L.firstChild?L.insertBefore(A,L.firstChild):L.appendChild(A)}A.styleSheet?A.styleSheet.cssText+=N:A.appendChild(t.createTextNode(N))},loadCSS:N=>{N||(N=""),j(N.split(","),A=>{r[A]=!0,a.load(A).catch(pt)})},addClass:(N,A)=>{K(N,A,!0)},removeClass:(N,A)=>{K(N,A,!1)},hasClass:(N,A)=>{const L=m(N),T=A.split(" ");return Q(L)&&rr(T,I=>Xl(L,I))},toggleClass:K,show:N=>{S(N,A=>qf(R(A),"display"))},hide:N=>{S(N,A=>Hf(R(A),"display","none"))},isHidden:N=>{const A=m(N);return Q(A)&&lr(Pa(A,"display"),"none")},uniqueId:N=>(N||"mce_")+s++,setHTML:B,getOuterHTML:N=>{const A=m(N);return Q(A)?J(A.dom)?A.dom.outerHTML:(L=>{const T=Jt("div"),I=R(L.dom.cloneNode(!0));return qt(T,I),Kf(T)})(A):""},setOuterHTML:(N,A)=>{S(N,L=>{J(L)&&(L.outerHTML=A)})},decode:oo.decode,encode:M,insertAfter:(N,A)=>{const L=f(A);return S(N,T=>{const I=null==L?void 0:L.parentNode,q=null==L?void 0:L.nextSibling;return I&&(q?I.insertBefore(T,q):I.appendChild(T)),T})},replace:Y,rename:(N,A)=>{if(N.nodeName!==A.toUpperCase()){const L=D(A);return wd(h(N),T=>{p(L,T.nodeName,g(N,T.nodeName))}),Y(L,N,!0),L}return N},findCommonAncestor:(N,A)=>{let L=N;for(;L;){let T=A;for(;T&&L!==T;)T=T.parentNode;if(L===T)break;L=L.parentNode}return!L&&N.ownerDocument?N.ownerDocument.documentElement:L},run:S,getAttribs:h,isEmpty:(N,A)=>{let L=0;if(V(N))return!1;const T=N.firstChild;if(T){const I=new Ht(T,N),q=l?l.getWhitespaceElements():{},X=A||(l?l.getNonEmptyElements():null);let $=T;do{if(J($)){const tt=$.getAttribute("data-mce-bogus");if(tt){$=I.next("all"===tt);continue}const W=$.nodeName.toLowerCase();if(X&&X[W]){if("br"===W){L++,$=I.next();continue}return!1}if(V($))return!1}if(eo($)||z($)&&!Po($.data)||z($)&&$.parentNode&&q[$.parentNode.nodeName]&&Po($.data))return!1;$=I.next()}while($)}return L<=1},createRng:st,nodeIndex:vr,split:(N,A,L)=>{let T,I,q=st();if(N&&A&&N.parentNode&&A.parentNode){const X=N.parentNode;return q.setStart(X,vr(N)),q.setEnd(A.parentNode,vr(A)),T=q.extractContents(),q=st(),q.setStart(A.parentNode,vr(A)+1),q.setEnd(X,vr(N)+1),I=q.extractContents(),X.insertBefore(fd(ct,T),N),X.insertBefore(L||A,N),X.insertBefore(fd(ct,I),N),U(N),L||A}},bind:ht,unbind:St,fire:(N,A,L)=>c.dispatch(N,A,L),dispatch:(N,A,L)=>c.dispatch(N,A,L),getContentEditable:nt,getContentEditableParent:N=>{const A=v();let L=null;for(let T=N;T&&T!==A&&(L=nt(T),null===L);T=T.parentNode);return L},destroy:()=>{if(i.length>0){let N=i.length;for(;N--;){const[A,L,T]=i[N];c.unbind(A,L,T)}}Nt(r,(N,A)=>{a.unload(A),delete r[A]})},isChildOf:(N,A)=>N===A||A.contains(N),dumpRng:N=>"startContainer: "+N.startContainer.nodeName+", startOffset: "+N.startOffset+", endContainer: "+N.endContainer.nodeName+", endOffset: "+N.endOffset},mt=((N,A,L)=>{const T=A.keep_values,q={style:{set:(X,$)=>{const tt=R(X);T&&ws(tt,xd,$),se(tt,"style"),lt($)&&Da(tt,N.parse($))},get:X=>{const $=R(X),tt=Je($,xd)||Je($,"style");return N.serialize(N.parse(tt),Bt($))}}};return T&&(q.href=q.src={set:(X,$,tt)=>{const W=R(X);yt(A.url_converter)&&Q($)&&($=A.url_converter.call(A.url_converter_scope||L(),String($),tt,X)),ws(W,"data-mce-"+tt,$),ws(W,tt,$)},get:(X,$)=>{const tt=R(X);return Je(tt,"data-mce-"+$)||Je(tt,$)}}),q})(d,e,G(ct));return ct};_t.DOM=_t(document),_t.nodeIndex=vr;const Wx=_t.DOM;class Hn{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((n,o)=>{const r=Wx;let s;const a=()=>{r.remove(i),s&&(s.onerror=s.onload=s=null)},i=r.uniqueId();s=document.createElement("script"),s.id=i,s.type="text/javascript",s.src=H._addCacheSuffix(e),this.settings.referrerPolicy&&r.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{a(),n()},s.onerror=()=>{a(),o("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const n=this;return n.queue.push(e),void 0===n.states[e]&&(n.states[e]=0),new Promise((o,r)=>{n.scriptLoadedCallbacks[e]||(n.scriptLoadedCallbacks[e]=[]),n.scriptLoadedCallbacks[e].push({resolve:o,reject:r})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,o=(l,d)=>{Rt(n.scriptLoadedCallbacks,d).each(c=>{j(c,u=>u[l](d))}),delete n.scriptLoadedCallbacks[d]},r=l=>{const d=ut(l,c=>"rejected"===c.status);return d.length>0?Promise.reject(Ln(d,({reason:c})=>jt(c)?c:[c])):Promise.resolve()},s=l=>Promise.allSettled(bt(l,d=>2===n.states[d]?(o("resolve",d),Promise.resolve()):3===n.states[d]?(o("reject",d),Promise.reject(d)):(n.states[d]=1,n.loadScript(d).then(()=>{n.states[d]=2,o("resolve",d);const c=n.queue;return c.length>0?(n.queue=[],s(c).then(r)):Promise.resolve()},()=>(n.states[d]=3,o("reject",d),Promise.reject(d)))))),a=l=>(n.loading=!0,s(l).then(d=>{n.loading=!1;const c=n.queueLoadedCallbacks.shift();return y.from(c).each(Jr),r(d)})),i=Zm(e);return n.loading?new Promise((l,d)=>{n.queueLoadedCallbacks.push(()=>a(i).then(l,d))}):a(i)}}Hn.ScriptLoader=new Hn;const Wt=t=>{let e=t;return{get:()=>e,set:n=>{e=n}}},xs={},kd=Wt("en"),Bg=()=>Rt(xs,kd.get()),ln={getData:()=>Sa(xs,t=>it({},t)),setCode:t=>{t&&kd.set(t)},getCode:()=>kd.get(),add:(t,e)=>{let n=xs[t];n||(xs[t]=n={}),Nt(e,(o,r)=>{n[r.toLowerCase()]=o})},translate:t=>{const e=Bg().getOr({}),n=i=>yt(i)?Object.prototype.toString.call(i):o(i)?"":""+i,o=i=>""===i||null==i,r=i=>{const l=n(i);return Rt(e,l.toLowerCase()).map(n).getOr(l)},s=i=>i.replace(/{context:\w+}$/,"");if(o(t))return"";if(pe(a=t)&&gt(a,"raw"))return n(t.raw);var a,i;if(jt(i=t)&&i.length>1){const i=t.slice(1);return s(r(t[0]).replace(/\{([0-9]+)\}/g,(l,d)=>gt(i,d)?n(i[d]):l))}return s(r(t))},isRtl:()=>Bg().bind(t=>Rt(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>gt(xs,t)},de=()=>{const t=[],e={},n={},o=[],r=(l,d)=>{const c=ut(o,u=>u.name===l&&u.state===d);j(c,u=>u.resolve())},s=l=>gt(e,l),a=(l,d)=>{const c=ln.getCode();!c||d&&-1===(","+(d||"")+",").indexOf(","+c+",")||Hn.ScriptLoader.add(e[l]+"/langs/"+c+".js")},i=(l,d="added")=>"added"===d&&gt(n,l)||"loaded"===d&&s(l)?Promise.resolve():new Promise(c=>{o.push({name:l,state:d,resolve:c})});return{items:t,urls:e,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,d)=>{!1!==de.languageLoad&&(s(l)?a(l,d):i(l,"loaded").then(()=>a(l,d)))},add:(l,d)=>(t.push(d),n[l]={instance:d},r(l,"added"),d),remove:l=>{delete e[l],delete n[l]},createUrl:(l,d)=>lt(d)?lt(l)?{prefix:"",resource:d,suffix:""}:{prefix:l.prefix,resource:d,suffix:l.suffix}:d,load:(l,d)=>{if(e[l])return Promise.resolve();let c=lt(d)?d:d.prefix+d.resource+d.suffix;0!==c.indexOf("/")&&-1===c.indexOf("://")&&(c=de.baseURL+"/"+c),e[l]=c.substring(0,c.lastIndexOf("/"));const u=()=>(r(l,"loaded"),Promise.resolve());return n[l]?u():Hn.ScriptLoader.add(c).then(u)},waitFor:i}};de.languageLoad=!0,de.baseURL="",de.PluginManager=de(),de.ThemeManager=de(),de.ModelManager=de();const Kx=t=>{const e=Wt(y.none()),n=()=>e.get().each(o=>clearInterval(o));return{clear:()=>{n(),e.set(y.none())},isSet:()=>e.get().isSome(),get:()=>e.get(),set:o=>{n(),e.set(y.some(setInterval(o,t)))}}},so=()=>{const t=(e=>{const n=Wt(y.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(y.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:r=>{o(),n.set(y.some(r))}}})(pt);return kt(it({},t),{on:e=>t.get().each(e)})},Qa=(t,e)=>{let n=null;return{cancel:()=>{yo(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{yo(n)&&(n=setTimeout(()=>{n=null,t.apply(null,o)},e))}}},Sd=(t,e)=>{let n=null;const o=()=>{yo(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout(()=>{n=null,t.apply(null,r)},e)}}},ks=G("mce-annotation"),Io=G("data-mce-annotation"),yr=G("data-mce-annotation-uid"),Ss=G("data-mce-annotation-active"),_s=G("data-mce-annotation-classes"),Es=G("data-mce-annotation-attrs"),Dg=t=>e=>wt(e,t),Pg=(t,e)=>{const n=t.selection.getRng(),o=R(n.startContainer),r=R(t.getBody()),s=e.fold(()=>"."+ks(),i=>`[${Io()}="${i}"]`),a=Ba(o,n.startOffset).getOr(o);return To(a,s,Dg(r)).bind(i=>In(i,`${yr()}`).bind(l=>In(i,`${Io()}`).map(d=>{const c=Mg(t,l);return{uid:l,name:d,elements:c}})))},Lg=(t,e)=>Aa(t,"data-mce-bogus")||lg(t,'[data-mce-bogus="all"]',Dg(e)),Mg=(t,e)=>{const n=R(t.getBody()),o=ye(n,`[${yr()}="${e}"]`);return ut(o,r=>!Lg(r,n))},Ig=(t,e)=>{const n=R(t.getBody()),o=ye(n,`[${Io()}="${e}"]`),r={};return j(o,s=>{if(!Lg(s,n)){const a=Je(s,yr()),i=Rt(r,a).getOr([]);r[a]=i.concat([s])}}),r};let Fg=0;const Ug=t=>{const e=(new Date).getTime(),n=Math.floor(1e9*Math.random());return Fg++,t+"_"+n+Fg+String(e)},zg=(t,e)=>R(t.dom.cloneNode(e)),Cr=t=>zg(t,!1),jg=t=>zg(t,!0),Hg=(t,e,n=Tt)=>{const o=new Ht(t,e),r=s=>{let a;do{a=o[s]()}while(a&&!z(a)&&!n(a));return y.from(a).filter(z)};return{current:()=>y.from(o.current()).filter(z),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},Fo=(t,e)=>{const n=e||(r=>t.isBlock(r)||It(r)||At(r)),o=(r,s,a,i)=>{if(z(r)){const l=i(r,s,r.data);if(-1!==l)return y.some({container:r,offset:l})}return a().bind(l=>o(l.container,l.offset,a,i))};return{backwards:(r,s,a,i)=>{const l=Hg(r,null!=i?i:t.getRoot(),n);return o(r,s,()=>l.prev().map(d=>({container:d,offset:d.length})),a).getOrNull()},forwards:(r,s,a,i)=>{const l=Hg(r,null!=i?i:t.getRoot(),n);return o(r,s,()=>l.next().map(d=>({container:d,offset:0})),a).getOrNull()}}},wr=Math.round,Uo=t=>t?{left:wr(t.left),top:wr(t.top),bottom:wr(t.bottom),right:wr(t.right),width:wr(t.width),height:wr(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},$g=(t,e)=>(t=Uo(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),Vg=(t,e,n)=>t>=0&&t<=Math.min(e.height,n.height)/2,Ns=(t,e)=>{const n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&Vg(e.top-t.bottom,t,e)},Rs=(t,e)=>t.top>e.bottom||!(t.bottom<e.top)&&Vg(e.bottom-t.top,t,e),qg=(t,e,n)=>{const o=Math.max(Math.min(e,t.left+t.width),t.left),r=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((e-o)*(e-o)+(n-r)*(n-r))},Ja=t=>{const e=t.startContainer,n=t.startOffset;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},ao=(t,e)=>{if(J(t)&&t.hasChildNodes()){const n=t.childNodes;return n[(a=n.length-1,Math.min(Math.max(e,0),a))]}var a;return t},Gx=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Wg=t=>lt(t)&&t.charCodeAt(0)>=768&&Gx.test(t),Kg=J,Yx=Ze,Gg=Fa("display","block table"),Xx=Fa("float","left right"),As=((...t)=>e=>{for(let n=0;n<t.length;n++)if(!t[n](e))return!1;return!0})(Kg,Yx,Dl(Xx)),Qx=Dl(Fa("white-space","pre pre-line pre-wrap")),Os=z,_d=It,Yg=_t.nodeIndex,Za=(t,e)=>e<0&&J(t)&&t.hasChildNodes()?void 0:ao(t,e),Ed=t=>t?t.createRange():_t.DOM.createRng(),Nd=t=>lt(t)&&/[\r\n\t ]/.test(t),Xg=t=>!!t.setStart&&!!t.setEnd,Rd=t=>{const e=t.startContainer,n=t.startOffset;if(Nd(t.toString())&&Qx(e.parentNode)&&z(e)){const o=e.data;if(Nd(o[n-1])||Nd(o[n+1]))return!0}return!1},Qg=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,io=t=>{var e;let n;const o=t.getClientRects();return n=Uo(o.length>0?o[0]:t.getBoundingClientRect()),!Xg(t)&&_d(t)&&Qg(n)?(r=>{const s=r.ownerDocument,a=Ed(s),i=s.createTextNode(Zt),l=r.parentNode;l.insertBefore(i,r),a.setStart(i,0),a.setEnd(i,1);const d=Uo(a.getBoundingClientRect());return l.removeChild(i),d})(t):Qg(n)&&Xg(t)&&null!==(e=(r=>{const a=r.endContainer,i=r.startOffset,l=r.endOffset;if(r.startContainer===a&&z(a)&&0===i&&1===l){const d=r.cloneRange();return d.setEndAfter(a),io(d)}return null})(t))&&void 0!==e?e:n},zo=(t,e)=>{const n=$g(t,e);return n.width=1,n.right=n.left+1,n},F=(t,e,n)=>{const o=()=>(n||(n=(r=>{const s=[],a=c=>{var u,f;0!==c.height&&(s.length>0&&(u=c).left===(f=s[s.length-1]).left&&u.top===f.top&&u.bottom===f.bottom&&u.right===f.right||s.push(c))},i=(c,u)=>{const f=Ed(c.ownerDocument);if(u<c.data.length){if(Wg(c.data[u]))return;if(Wg(c.data[u-1])&&(f.setStart(c,u),f.setEnd(c,u+1),!Rd(f)))return void a(zo(io(f),!1))}u>0&&(f.setStart(c,u-1),f.setEnd(c,u),Rd(f)||a(zo(io(f),!1))),u<c.data.length&&(f.setStart(c,u),f.setEnd(c,u+1),Rd(f)||a(zo(io(f),!0)))},l=r.container(),d=r.offset();if(Os(l))return i(l,d),s;if(Kg(l))if(r.isAtEnd()){const c=Za(l,d);Os(c)&&i(c,c.data.length),As(c)&&!_d(c)&&a(zo(io(c),!1))}else{const c=Za(l,d);if(Os(c)&&i(c,0),As(c)&&r.isAtEnd())return a(zo(io(c),!1)),s;const u=Za(r.container(),r.offset()-1);As(u)&&!_d(u)&&(Gg(u)||Gg(c)||!As(c))&&a(zo(io(u),!1)),As(c)&&a(zo(io(c),!0))}return s})(F(t,e))),n);return{container:G(t),offset:G(e),toRange:()=>{const r=Ed(t.ownerDocument);return r.setStart(t,e),r.setEnd(t,e),r},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(Os(t),0===e),isAtEnd:()=>Os(t)?e>=t.data.length:e>=t.childNodes.length,isEqual:r=>r&&t===r.container()&&e===r.offset(),getNode:r=>Za(t,r?e-1:e)}};F.fromRangeStart=t=>F(t.startContainer,t.startOffset),F.fromRangeEnd=t=>F(t.endContainer,t.endOffset),F.after=t=>F(t.parentNode,Yg(t)+1),F.before=t=>F(t.parentNode,Yg(t)),F.isAbove=(t,e)=>ve(_e(e.getClientRects()),xo(t.getClientRects()),Ns).getOr(!1),F.isBelow=(t,e)=>ve(xo(e.getClientRects()),_e(t.getClientRects()),Rs).getOr(!1),F.isAtStart=t=>!!t&&t.isAtStart(),F.isAtEnd=t=>!!t&&t.isAtEnd(),F.isTextPosition=t=>!!t&&z(t.container()),F.isElementPosition=t=>!F.isTextPosition(t);const ti=(t,e)=>{z(e)&&0===e.data.length&&t.remove(e)},Ad=(t,e,n)=>{var o,s;rd(n)?((o,r,s)=>{const a=y.from(s.firstChild),i=y.from(s.lastChild);r.insertNode(s),a.each(l=>ti(o,l.previousSibling)),i.each(l=>ti(o,l.nextSibling))})(t,e,n):(o=t,e.insertNode(s=n),ti(o,s.previousSibling),ti(o,s.nextSibling))},dn=z,Jg=Oo,Zg=_t.nodeIndex,tp=t=>{const e=t.parentNode;return Jg(e)?tp(e):e},Od=t=>t?Ea(t.childNodes,(e,n)=>(Jg(n)&&"BR"!==n.nodeName?e=e.concat(Od(n)):e.push(n),e),[]):[],ep=t=>e=>t===e,np=t=>(dn(t)?"text()":t.nodeName.toLowerCase())+"["+(e=>{let n,o;n=Od(tp(e)),o=ef(n,ep(e),e),n=n.slice(0,o+1);const r=Ea(n,(s,a,i)=>(dn(a)&&dn(n[i-1])&&s++,s),0);return n=rs(n,sn([e.nodeName])),o=ef(n,ep(e),e),o-r})(t)+"]",op=(t,e)=>{let n,o=[],r=e.container(),s=e.offset();if(dn(r))n=((i,l)=>{let d=i;for(;(d=d.previousSibling)&&dn(d);)l+=d.data.length;return l})(r,s);else{const i=r.childNodes;s>=i.length?(n="after",s=i.length-1):n="before",r=i[s]}o.push(np(r));let a=((i,l,d)=>{const c=[];for(let u=l.parentNode;u&&u!==i;u=u.parentNode)c.push(u);return c})(t,r);return a=rs(a,Dl(Oo)),o=o.concat($l(a,i=>np(i))),o.reverse().join("/")+","+n},rp=(t,e)=>{if(!e)return null;const n=e.split(","),o=n[0].split("/"),r=n.length>1?n[1]:"before",s=Ea(o,(a,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?("text()"===l[1]&&(l[1]="#text"),((d,c,u)=>{let f=Od(d);return f=rs(f,(m,g)=>!dn(m)||!dn(f[g-1])),f=rs(f,sn([c])),f[u]})(a,l[1],parseInt(l[2],10))):null},t);if(!s)return null;if(!dn(s)&&s.parentNode){let a;return a="after"===r?Zg(s)+1:Zg(s),F(s.parentNode,a)}return((a,i)=>{let l=a,d=0;for(;dn(l);){const c=l.data.length;if(i>=d&&i<=d+c){a=l,i-=d;break}if(!dn(l.nextSibling)){a=l,i=c;break}d+=c,l=l.nextSibling}return dn(a)&&i>a.data.length&&(i=a.data.length),F(a,i)})(s,parseInt(r,10))},ei=At,sp=(t,e,n,o,r)=>{const s=r?o.startContainer:o.endContainer;let a=r?o.startOffset:o.endOffset;const i=[],l=t.getRoot();if(z(s))i.push(n?((d,c,u)=>{let f=d(c.data.slice(0,u)).length;for(let m=c.previousSibling;m&&z(m);m=m.previousSibling)f+=d(m.data).length;return f})(e,s,a):a);else{let d=0;const c=s.childNodes;a>=c.length&&c.length&&(d=1,a=Math.max(0,c.length-1)),i.push(t.nodeIndex(c[a],n)+d)}for(let d=s;d&&d!==l;d=d.parentNode)i.push(t.nodeIndex(d,n));return i},Td=(t,e,n)=>{let o=0;return H.each(t.select(e),r=>"all"===r.getAttribute("data-mce-bogus")?void 0:r!==n&&void o++),o},ap=(t,e)=>{let n=e?t.startContainer:t.endContainer,o=e?t.startOffset:t.endOffset;if(J(n)&&"TR"===n.nodeName){const r=n.childNodes;n=r[Math.min(e?o:o-1,r.length-1)],n&&(o=e?0:n.childNodes.length,e?t.setStart(n,o):t.setEnd(n,o))}},ip=t=>(ap(t,!0),ap(t,!1),t),lp=(t,e)=>{if(J(t)&&(t=ao(t,e),ei(t)))return t;if(Fe(t)){z(t)&&pr(t)&&(t=t.parentNode);let n=t.previousSibling;if(ei(n)||(n=t.nextSibling,ei(n)))return n}},dp=(t,e,n)=>{const o=n.getNode(),r=n.getRng();if("IMG"===o.nodeName||ei(o)){const a=o.nodeName;return{name:a,index:Td(n.dom,a,o)}}const s=lp((a=r).startContainer,a.startOffset)||lp(a.endContainer,a.endOffset);var a;if(s){const a=s.tagName;return{name:a,index:Td(n.dom,a,s)}}return((a,i,l,d)=>{const c=i.dom,u=sp(c,a,l,d,!0),f=i.isForward(),m=gg(d)?{isFakeCaret:!0}:{};return i.isCollapsed()?it({start:u,forward:f},m):it({start:u,end:sp(c,a,l,d,!1),forward:f},m)})(t,n,e,r)},cp=(t,e,n)=>{const o={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",o,"&#xFEFF;"):t.create("span",o)},up=(t,e)=>{const n=t.dom;let o=t.getRng();const r=n.uniqueId(),s=t.isCollapsed(),a=t.getNode(),i=a.nodeName,l=t.isForward();if("IMG"===i)return{name:i,index:Td(n,i,a)};const d=ip(o.cloneRange());if(!s){d.collapse(!1);const u=cp(n,r+"_end",e);Ad(n,d,u)}o=ip(o),o.collapse(!0);const c=cp(n,r+"_start",e);return Ad(n,o,c),t.moveToBookmark({id:r,keep:!0,forward:l}),{id:r,forward:l}},Bd=et(dp,he,!0),mp=t=>{const e=s=>s(t),n=G(t),o=()=>r,r={tag:!0,inner:t,fold:(s,a)=>a(t),isValue:Ut,isError:Tt,map:s=>Ce.value(s(t)),mapError:o,bind:e,exists:e,forall:e,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:s=>{s(t)},toOptional:()=>y.some(t)};return r},fp=t=>{const e=()=>n,n={tag:!1,inner:t,fold:(r,s)=>r(t),isValue:Tt,isError:Ut,map:e,mapError:r=>Ce.error(r(t)),bind:e,exists:Tt,forall:Ut,getOr:he,or:he,getOrThunk:Pl,orThunk:Pl,getOrDie:(o=String(t),()=>{throw new Error(o)}),each:pt,toOptional:y.none};var o;return n},Ce={value:mp,error:fp,fromOption:(t,e)=>t.fold(()=>fp(e),mp)},xn=t=>{if(!jt(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const e=[],n={};return j(t,(o,r)=>{const s=Pe(o);if(1!==s.length)throw new Error("one and only one name per case");const a=s[0],i=o[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!jt(i))throw new Error("case arguments must be an array");e.push(a),n[a]=(...l)=>{const d=l.length;if(d!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+d);return{fold:(...c)=>{if(c.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+c.length);return c[r].apply(null,l)},match:c=>{const u=Pe(c);if(e.length!==u.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+u.join(","));if(!rr(e,f=>Et(u,f)))throw new Error("Not all branches were specified when using match. Specified: "+u.join(", ")+"\nRequired: "+e.join(", "));return c[a].apply(null,l)},log:c=>{console.log(c,{constructors:e,constructor:a,params:l})}}}}),n};xn([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Jx=t=>"inline-command"===t.type||"inline-format"===t.type,Zx=t=>"block-command"===t.type||"block-format"===t.type,tk=t=>{const e=o=>Ce.error({message:o,pattern:t}),n=(o,r,s)=>{if(void 0!==t.format){let a;if(jt(t.format)){if(!rr(t.format,lt))return e(o+" pattern has non-string items in the `format` array");a=t.format}else{if(!lt(t.format))return e(o+" pattern has non-string `format` parameter");a=[t.format]}return Ce.value(r(a))}return void 0!==t.cmd?lt(t.cmd)?Ce.value(s(t.cmd,t.value)):e(o+" pattern has non-string `cmd` parameter"):e(o+" pattern is missing both `format` and `cmd` parameters")};if(!pe(t))return e("Raw pattern is not an object");if(!lt(t.start))return e("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!lt(t.end))return e("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return e("Inline pattern has empty `start` and `end` parameters");let o=t.start,r=t.end;return 0===r.length&&(r=o,o=""),n("Inline",s=>({type:"inline-format",start:o,end:r,format:s}),(s,a)=>({type:"inline-command",start:o,end:r,cmd:s,value:a}))}return void 0!==t.replacement?lt(t.replacement)?0===t.start.length?e("Replacement pattern has empty `start` parameter"):Ce.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):e("Replacement pattern has non-string `replacement` parameter"):0===t.start.length?e("Block pattern has empty `start` parameter"):n("Block",o=>({type:"block-format",start:t.start,format:o[0]}),(o,r)=>({type:"block-command",start:t.start,cmd:o,value:r}))},gp=t=>ut(t,Zx),pp=t=>ut(t,Jx),hp=t=>{const e=(n=>{const o=[],r=[];return j(n,s=>{s.fold(a=>{o.push(a)},a=>{r.push(a)})}),{errors:o,values:r}})(bt(t,tk));return j(e.errors,n=>console.error(n.message,n.pattern)),e.values},Dd=_o().deviceType,ek=Dd.isTouch(),nk=_t.DOM,bp=t=>xa(t,RegExp),Z=t=>e=>e.options.get(t),Pd=t=>lt(t)||pe(t),vp=(t,e="")=>n=>{const o=lt(n);if(o){if(-1!==n.indexOf("=")){const r=(s=>{const a=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return Oe(a,(i,l)=>{const d=l.split("="),c=d[0],u=d.length>1?d[1]:c;return i[ir(c)]=ir(u),i},{})})(n);return{value:Rt(r,t.id).getOr(e),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}},ok=Z("iframe_attrs"),rk=Z("doctype"),yp=Z("document_base_url"),sk=Z("body_id"),ak=Z("body_class"),Cp=Z("content_security_policy"),ik=Z("br_in_pre"),Te=Z("forced_root_block"),Ts=Z("forced_root_block_attrs"),lk=Z("newline_behavior"),dk=Z("br_newline_selector"),ck=Z("no_newline_selector"),uk=Z("keep_styles"),mk=Z("end_container_on_empty_block"),wp=Z("automatic_uploads"),xp=Z("images_reuse_filename"),fk=Z("images_replace_blob_uris"),kp=Z("icons"),gk=Z("icons_url"),pk=Z("images_upload_url"),hk=Z("images_upload_base_path"),bk=Z("images_upload_credentials"),vk=Z("images_upload_handler"),yk=Z("content_css_cors"),Ld=Z("referrer_policy"),Sp=Z("language"),Ck=Z("language_url"),_p=Z("indent_use_margin"),wk=Z("indentation"),xk=Z("content_css"),kk=Z("content_style"),Ep=Z("font_css"),Sk=Z("directionality"),_k=Z("inline_boundaries_selector"),Np=Z("object_resizing"),Ek=Z("resize_img_proportional"),Nk=Z("placeholder"),Rp=Z("event_root"),Rk=Z("service_message"),xr=Z("theme"),Ak=Z("theme_url"),Md=Z("model"),Ok=Z("model_url"),Bs=Z("inline_boundaries"),Tk=Z("formats"),Bk=Z("preview_styles"),Dk=Z("format_empty_lines"),Pk=Z("format_noneditable_selector"),Lk=Z("custom_ui_selector"),Id=Z("inline"),Mk=Z("hidden_input"),Ik=Z("submit_patch"),Fk=Z("add_form_submit_trigger"),Uk=Z("add_unload_trigger"),zk=Z("custom_undo_redo_levels"),jk=Z("disable_nodechange"),Ap=Z("readonly"),Hk=Z("content_css_cors"),ni=Z("plugins"),$k=Z("external_plugins"),Vk=Z("block_unsupported_drop"),qk=Z("visual"),Wk=Z("visual_table_class"),Op=Z("visual_anchor_class"),Kk=Z("iframe_aria_text"),Gk=Z("setup"),Yk=Z("init_instance_callback"),Xk=Z("urlconverter_callback"),Qk=Z("auto_focus"),Jk=Z("browser_spellcheck"),Zk=Z("protect"),tS=Z("paste_block_drop"),oi=Z("paste_data_images"),eS=Z("paste_preprocess"),nS=Z("paste_postprocess"),oS=Z("paste_webkit_styles"),rS=Z("paste_remove_styles_if_webkit"),sS=Z("paste_merge_formats"),aS=Z("smart_paste"),iS=Z("paste_as_text"),lS=Z("paste_tab_spaces"),dS=Z("allow_html_data_urls"),cS=Z("text_patterns"),uS=Z("text_patterns_lookup"),Tp=Z("noneditable_class"),mS=Z("editable_class"),fS=Z("noneditable_regexp"),gS=Z("preserve_cdata"),Bp=t=>H.explode(t.options.get("images_file_types")),pS=Z("table_tab_navigation"),hS=J,Dp=z,Pp=t=>{const e=t.parentNode;e&&e.removeChild(t)},Lp=t=>{const e=jn(t);return{count:t.length-e.length,text:e}},Mp=t=>{let e;for(;-1!==(e=t.data.lastIndexOf(ie));)t.deleteData(e,1)},Ip=(t,e)=>(jo(t),e),jo=t=>{hS(t)&&Fe(t)&&(fg(t)?t.removeAttribute("data-mce-caret"):Pp(t)),Dp(t)&&(Mp(t),0===t.data.length&&Pp(t))},vS=At,yS=wn,CS=Ua,Fp=(t,e,n)=>{const o=$g(e.getBoundingClientRect(),n);let r,s;if("BODY"===t.tagName){const i=t.ownerDocument.documentElement;r=t.scrollLeft||i.scrollLeft,s=t.scrollTop||i.scrollTop}else{const i=t.getBoundingClientRect();r=t.scrollLeft-i.left,s=t.scrollTop-i.top}o.left+=r,o.right+=r,o.top+=s,o.bottom+=s,o.width=1;let a=e.offsetWidth-e.clientWidth;return a>0&&(n&&(a*=-1),o.left+=a,o.right+=a),o},Up=()=>vt.browser.isFirefox(),Ds=t=>vS(t)||yS(t),Ps=t=>Ds(t)||zn(t)&&Up(),xS=Cn,Fd=At,kS=wn,zp=Fa("display","block table table-cell table-caption list-item"),jp=Fe,Hp=pr,SS=J,_S=z,ES=Ze,kr=t=>t>0,Ho=t=>t<0,ri=(t,e)=>{let n;for(;n=t(e);)if(!Hp(n))return n;return null},Ls=(t,e,n,o,r)=>{const s=new Ht(t,o),a=Fd(t)||Hp(t);let i;if(Ho(e)){if(a&&(i=ri(s.prev.bind(s),!0),n(i)))return i;for(;i=ri(s.prev.bind(s),r);)if(n(i))return i}if(kr(e)){if(a&&(i=ri(s.next.bind(s),!0),n(i)))return i;for(;i=ri(s.next.bind(s),r);)if(n(i))return i}return null},lo=(t,e)=>{for(;t&&t!==e;){if(zp(t))return t;t=t.parentNode}return null},kn=(t,e,n)=>lo(t.container(),n)===lo(e.container(),n),Ud=(t,e)=>{if(!e)return y.none();const n=e.container(),o=e.offset();return SS(n)?y.from(n.childNodes[o+t]):y.none()},$p=(t,e)=>{var n;const o=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createRange();return t?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)),o},NS=(t,e,n)=>lo(e,t)===lo(n,t),Vp=(t,e,n)=>{const o=t?"previousSibling":"nextSibling";let r=n;for(;r&&r!==e;){let s=r[o];if(s&&jp(s)&&(s=s[o]),Fd(s)||kS(s)){if(NS(e,s,r))return s;break}if(ES(s))break;r=r.parentNode}return null},Ms=et($p,!0),Is=et($p,!1),zd=(t,e,n)=>{let o;const r=et(Vp,!0,e),s=et(Vp,!1,e),a=n.startContainer,i=n.startOffset;if(pr(a)){const l=_S(a)?a.parentNode:a,d=l.getAttribute("data-mce-caret");if("before"===d&&(o=l.nextSibling,Ps(o)))return Ms(o);if("after"===d&&(o=l.previousSibling,Ps(o)))return Is(o)}if(!n.collapsed)return n;if(z(a)){if(jp(a)){if(1===t){if(o=s(a),o)return Ms(o);if(o=r(a),o)return Is(o)}if(-1===t){if(o=r(a),o)return Is(o);if(o=s(a),o)return Ms(o)}return n}if(Va(a)&&i>=a.data.length-1)return 1===t&&(o=s(a),o)?Ms(o):n;if($a(a)&&i<=1)return-1===t&&(o=r(a),o)?Is(o):n;if(i===a.data.length)return o=s(a),o?Ms(o):n;if(0===i)return o=r(a),o?Is(o):n}return n},qp=(t,e)=>Ud(t?0:-1,e).filter(Fd),Fs=(t,e,n)=>{const o=zd(t,e,n);return-1===t?F.fromRangeStart(o):F.fromRangeEnd(o)},si=t=>y.from(t.getNode()).map(R),jd=(t,e)=>{let n=e;for(;n=t(n);)if(n.isVisible())return n;return n},ai=(t,e)=>{const n=kn(t,e);return!(n||!It(t.getNode()))||n};var Kt,t;(t=Kt||(Kt={}))[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards";const RS=At,Sn=z,Wp=J,Hd=It,Sr=Ze,Kp=t=>{return hg(t)||!!md(e=t)&&!Oe(be(e.getElementsByTagName("*")),(n,o)=>n||pg(o),!1);var e},ii=bg,Gp=(t,e)=>t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null,Yp=(t,e)=>{if(kr(t)){if(Sr(e.previousSibling)&&!Sn(e.previousSibling))return F.before(e);if(Sn(e))return F(e,0)}if(Ho(t)){if(Sr(e.nextSibling)&&!Sn(e.nextSibling))return F.after(e);if(Sn(e))return F(e,e.data.length)}return Ho(t)?Hd(e)?F.before(e):F.after(e):F.before(e)},$d=(t,e,n)=>{let o,r,s,a;if(!Wp(n)||!e)return null;if(e.isEqual(F.after(n))&&n.lastChild){if(a=F.after(n.lastChild),Ho(t)&&Sr(n.lastChild)&&Wp(n.lastChild))return Hd(n.lastChild)?F.before(n.lastChild):a}else a=e;const i=a.container();let l=a.offset();if(Sn(i)){if(Ho(t)&&l>0)return F(i,--l);if(kr(t)&&l<i.length)return F(i,++l);o=i}else{if(Ho(t)&&l>0&&(r=Gp(i,l-1),Sr(r)))return!Kp(r)&&(s=Ls(r,t,ii,r),s)?Sn(s)?F(s,s.data.length):F.after(s):Sn(r)?F(r,r.data.length):F.before(r);if(kr(t)&&l<i.childNodes.length&&(r=Gp(i,l),Sr(r)))return Hd(r)?((c,u)=>{const f=u.nextSibling;return f&&Sr(f)?Sn(f)?F(f,0):F.before(f):$d(Kt.Forwards,F.after(u),c)})(n,r):!Kp(r)&&(s=Ls(r,t,ii,r),s)?Sn(s)?F(s,0):F.before(s):Sn(r)?F(r,0):F.after(r);o=r||a.getNode()}if(o&&(kr(t)&&a.isAtEnd()||Ho(t)&&a.isAtStart())&&(o=Ls(o,t,Ut,n,!0),ii(o,n)))return Yp(t,o);r=o&&Ls(o,t,ii,n);const d=ko(ut(((c,u)=>{const f=[];let m=c;for(;m&&m!==u;)f.push(m),m=m.parentNode;return f})(i,n),RS));return!d||r&&d.contains(r)?r?Yp(t,r):null:(a=kr(t)?F.after(d):F.before(d),a)},_n=t=>({next:e=>$d(Kt.Forwards,e,t),prev:e=>$d(Kt.Backwards,e,t)}),Xp=t=>F.isTextPosition(t)?0===t.offset():Ze(t.getNode()),Qp=t=>{if(F.isTextPosition(t)){const e=t.container();return t.offset()===e.data.length}return Ze(t.getNode(!0))},Jp=(t,e)=>!F.isTextPosition(t)&&!F.isTextPosition(e)&&t.getNode()===e.getNode(!0),Ue=(t,e,n)=>{const o=_n(e);return y.from(t?o.next(n):o.prev(n))},li=(t,e,n)=>Ue(t,e,n).bind(o=>{return kn(n,o,e)&&(s=n,a=o,t?!Jp(s,a)&&(F.isTextPosition(i=s)||!It(i.getNode()))&&Qp(s)&&Xp(a):!Jp(a,s)&&Xp(s)&&Qp(a))?Ue(t,e,o):y.some(o);var s,a,i}),Zp=(t,e,n,o)=>li(t,e,n).bind(r=>o(r)?Zp(t,e,r,o):y.some(r)),_r=(t,e)=>{const n=t?e.firstChild:e.lastChild;return z(n)?y.some(F(n,t?0:n.data.length)):n?Ze(n)?y.some(t?F.before(n):It(o=n)?F.before(o):F.after(o)):((r,s,a)=>{const i=r?F.before(a):F.after(a);return Ue(r,s,i)})(t,e,n):y.none();var o},Ee=et(Ue,!0),ze=et(Ue,!1),we=et(_r,!0),En=et(_r,!1),Vd="_mce_caret",cn=t=>J(t)&&t.id===Vd,$o=(t,e)=>{let n=e;for(;n&&n!==t;){if(cn(n))return n;n=n.parentNode}return null},th=t=>gt(t,"name"),eh=t=>H.isArray(t.start),di=t=>!(!th(t)&&Co(t.forward))||t.forward,nh=(t,e)=>(J(e)&&t.isBlock(e)&&!e.innerHTML&&(e.innerHTML='<br data-mce-bogus="1" />'),e),AS=(t,e)=>En(t).fold(Tt,n=>(e.setStart(n.container(),n.offset()),e.setEnd(n.container(),n.offset()),!0)),oh=(t,e,n)=>!(e.hasChildNodes()||!$o(t,e)||(((o,r)=>{var s;const a=(null!==(s=o.ownerDocument)&&void 0!==s?s:document).createTextNode(ie);o.appendChild(a),r.setStart(a,0),r.setEnd(a,0)})(e,n),0)),rh=(t,e,n,o)=>{const r=n[e?"start":"end"],s=t.getRoot();if(r){let a=s,i=r[0];for(let l=r.length-1;a&&l>=1;l--){const d=a.childNodes;if(oh(s,a,o))return!0;if(r[l]>d.length-1)return!!oh(s,a,o)||AS(a,o);a=d[r[l]]}z(a)&&(i=Math.min(r[0],a.data.length)),J(a)&&(i=Math.min(r[0],a.childNodes.length)),e?o.setStart(a,i):o.setEnd(a,i)}return!0},qd=t=>z(t)&&t.data.length>0,sh=(t,e,n)=>{const o=t.get(n.id+"_"+e),r=null==o?void 0:o.parentNode,s=n.keep;if(o&&r){let a,i;if("start"===e?s?o.hasChildNodes()?(a=o.firstChild,i=1):qd(o.nextSibling)?(a=o.nextSibling,i=0):qd(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=t.nodeIndex(o)+1):(a=r,i=t.nodeIndex(o)):s?o.hasChildNodes()?(a=o.firstChild,i=1):qd(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=t.nodeIndex(o)):(a=r,i=t.nodeIndex(o)),!s){const l=o.previousSibling,d=o.nextSibling;let c;for(H.each(H.grep(o.childNodes),u=>{z(u)&&(u.data=u.data.replace(/\uFEFF/g,""))});c=t.get(n.id+"_"+e);)t.remove(c,!0);if(z(d)&&z(l)&&!vt.browser.isOpera()){const u=l.data.length;l.appendData(d.data),t.remove(d),a=l,i=u}}return y.some(F(a,i))}return y.none()},OS=(t,e,n)=>((o,r,s=!1)=>{return 2===r?dp(jn,s,o):3===r?(a=>{const i=a.getRng();return{start:op(a.dom.getRoot(),F.fromRangeStart(i)),end:op(a.dom.getRoot(),F.fromRangeEnd(i)),forward:a.isForward()}})(o):r?{rng:(a=o).getRng(),forward:a.isForward()}:up(o,!1);var a})(t,e,n),TS=(t,e)=>{((n,o)=>{const r=n.dom;if(o){if(eh(o))return((s,a)=>{const i=s.createRng();return rh(s,!0,a,i)&&rh(s,!1,a,i)?y.some({range:i,forward:di(a)}):y.none()})(r,o);if(lt(o.start))return((s,a)=>{const i=y.from(rp(s.getRoot(),a.start)),l=y.from(rp(s.getRoot(),a.end));return ve(i,l,(d,c)=>{const u=s.createRng();return u.setStart(d.container(),d.offset()),u.setEnd(c.container(),c.offset()),{range:u,forward:di(a)}})})(r,o);if(gt(o,"id"))return((s,a)=>{const i=sh(s,"start",a),l=sh(s,"end",a);return ve(i,l.or(i),(d,c)=>{const u=s.createRng();return u.setStart(nh(s,d.container()),d.offset()),u.setEnd(nh(s,c.container()),c.offset()),{range:u,forward:di(a)}})})(r,o);if(th(o))return((s,a)=>y.from(s.select(a.name)[a.index]).map(i=>{const l=s.createRng();return l.selectNode(i),{range:l,forward:!0}}))(r,o);if((s=>gt(s,"rng"))(o))return y.some({range:o.rng,forward:di(o)})}return y.none()})(t,e).each(({range:n,forward:o})=>{t.setRng(n,o)})},je=t=>J(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),ci=t=>"\xa0"===t,Er=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),Wd=t=>!Er(t)&&!ci(t)&&!dg(t),Kd=t=>{const e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},BS=t=>({value:Kd(t.red)+Kd(t.green)+Kd(t.blue)}),DS=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,PS=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,ah=(t,e,n,o)=>({red:t,green:e,blue:n,alpha:o}),ih=(t,e,n,o)=>{const r=parseInt(t,10),s=parseInt(e,10),a=parseInt(n,10),i=parseFloat(o);return ah(r,s,a,i)},ui=t=>(e=>{if("transparent"===e)return y.some(ah(0,0,0,0));const n=DS.exec(e);if(null!==n)return y.some(ih(n[1],n[2],n[3],"1"));const o=PS.exec(e);return null!==o?y.some(ih(o[1],o[2],o[3],o[4])):y.none()})(t).map(BS).map(e=>"#"+e.value).getOr(t),Gd=t=>{const e=[];if(t)for(let n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},lh=(t,e)=>{const n=ye(e,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:ut(Ln(t,s=>{const a=Ja(s);return a?[R(a)]:[]}),za)},Nr=t=>lh(Gd(t.selection.getSel()),R(t.getBody())),Us=(t,e)=>hs(t,"table",e),dh=t=>If(t).fold(G([t]),e=>[t].concat(dh(e))),Yd=t=>Ql(t).fold(G([t]),e=>"br"===Bt(e)?No(e).map(n=>[t].concat(Yd(n))).getOr([]):[t].concat(Yd(e))),Xd=(t,e)=>ve((n=>{const o=n.startContainer,r=n.startOffset;return z(o)?0===r?y.some(R(o)):y.none():y.from(o.childNodes[r]).map(R)})(e),(n=>{const o=n.endContainer,r=n.endOffset;return z(o)?r===o.data.length?y.some(R(o)):y.none():y.from(o.childNodes[r-1]).map(R)})(e),(n,o)=>{const r=Vt(dh(t),et(wt,n)),s=Vt(Yd(t),et(wt,o));return r.isSome()&&s.isSome()}).getOr(!1),Qd=(t,e,n,o)=>{const r=n,s=new Ht(n,r),a=os(t.schema.getMoveCaretBeforeOnEnterElements(),(l,d)=>!Et(["td","th","table"],d.toLowerCase()));let i=n;do{if(z(i)&&0!==H.trim(i.data).length)return void(o?e.setStart(i,0):e.setEnd(i,i.data.length));if(a[i.nodeName])return void(o?e.setStartBefore(i):"BR"===i.nodeName?e.setEndBefore(i):e.setEndAfter(i))}while(i=o?s.next():s.prev());"BODY"===r.nodeName&&(o?e.setStart(r,0):e.setEnd(r,r.childNodes.length))},mi=t=>{const e=t.selection.getSel();return Q(e)&&e.rangeCount>0},Jd=(t,e)=>{const n=Nr(t);n.length>0?j(n,o=>{const r=o.dom,s=t.dom.createRng();s.setStartBefore(r),s.setEndAfter(r),e(s,!0)}):e(t.selection.getRng(),!1)},ch=(t,e,n)=>{const o=up(t,e);n(o),t.moveToBookmark(o)},zs=t=>on(null==t?void 0:t.nodeType),Zd=t=>J(t)&&!je(t)&&!cn(t)&&!Oo(t),Vo=t=>!0===t.isContentEditable,uh=(t,e,n)=>{const{selection:o,dom:r}=t,s=o.getNode(),a=At(s);ch(o,!0,()=>{e()}),a&&At(s)&&r.isChildOf(s,t.getBody())?t.selection.select(s):n(o.getStart())&&LS(r,o)},LS=(t,e)=>{var n,o;const r=e.getRng(),{startContainer:s,startOffset:a}=r;if(!((i,l)=>{if(Zd(l)&&!/^(TD|TH)$/.test(l.nodeName)){const d=i.getAttrib(l,"data-mce-selected"),c=parseInt(d,10);return!isNaN(c)&&c>0}return!1})(t,e.getNode())&&J(s)){const i=s.childNodes,l=t.getRoot();let d;if(a<i.length){const c=i[a];d=new Ht(c,null!==(n=t.getParent(c,t.isBlock))&&void 0!==n?n:l)}else{const c=i[i.length-1];d=new Ht(c,null!==(o=t.getParent(c,t.isBlock))&&void 0!==o?o:l),d.next(!0)}for(let c=d.current();c;c=d.next()){if("false"===t.getContentEditable(c))return;if(z(c)&&!ec(c))return r.setStart(c,0),void e.setRng(r)}}},mh=(t,e,n)=>{if(t){const o=e?"nextSibling":"previousSibling";for(t=n?t:t[o];t;t=t[o])if(J(t)||!ec(t))return t}},tc=(t,e)=>(zs(e)&&(e=e.nodeName),!!t.schema.getTextBlockElements()[e.toLowerCase()]),Rr=(t,e,n)=>t.schema.isValidChild(e,n),ec=(t,e=!1)=>{if(Q(t)&&z(t)){const n=e?t.data.replace(/ /g,"\xa0"):t.data;return Po(n)}return!1},fh=(t,e)=>{const n=t.dom;return Zd(e)&&"false"===n.getContentEditable(e)&&((o,r)=>{const s="[data-mce-cef-wrappable]",a=Pk(o),i=as(a)?s:`${s},${a}`;return rn(R(r),i)})(t,e)&&0===n.select('[contenteditable="true"]',e).length},co=(t,e)=>yt(t)?t(e):(Q(e)&&(t=t.replace(/%(\w+)/g,(n,o)=>e[o]||n)),t),nc=(t,e)=>(t=""+((t=t||"").nodeName||t),e=""+((e=e||"").nodeName||e),t.toLowerCase()===e.toLowerCase()),oc=(t,e)=>{if(Ft(t))return null;{let n=String(t);return"color"!==e&&"backgroundColor"!==e||(n=ui(n)),"fontWeight"===e&&700===t&&(n="bold"),"fontFamily"===e&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},fi=(t,e,n)=>{const o=t.getStyle(e,n);return oc(o,n)},gh=(t,e)=>{let n;return t.getParent(e,o=>!!J(o)&&(n=t.getStyle(o,"text-decoration"),!!n&&"none"!==n)),n},gi=(t,e,n)=>t.getParents(e,n,t.getRoot()),rc=(t,e,n)=>{const o=t.formatter.get(e);return Q(o)&&zt(o,n)},Nn=t=>ar(t,"block"),He=t=>ar(t,"selector"),Gt=t=>ar(t,"inline"),sc=t=>He(t)&&!1!==t.expand&&!Gt(t),Ar=je,ph=gi,hh=ec,MS=tc,bh=(t,e)=>{let n=e;for(;n;){if(J(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},vh=(t,e,n,o)=>{const r=e.data;for(let s=n;t?s>=0:s<r.length;t?s--:s++)if(o(r.charAt(s)))return t?s+1:s;return-1},IS=(t,e,n)=>vh(t,e,n,o=>ci(o)||Er(o)),FS=(t,e,n)=>vh(t,e,n,Wd),yh=(t,e,n,o,r,s)=>{let a;const i=t.getParent(n,t.isBlock)||e,l=(d,c,u)=>{const f=Fo(t);return y.from((r?f.backwards:f.forwards)(d,c,(g,h)=>Ar(g.parentNode)?-1:(a=g,u(r,g,h)),i))};return l(n,o,IS).bind(d=>s?l(d.container,d.offset+(r?-1:0),FS):y.some(d)).orThunk(()=>a?y.some({container:a,offset:r?0:a.length}):y.none())},Ch=(t,e,n,o,r)=>{const s=o[r];z(o)&&as(o.data)&&s&&(o=s);const a=ph(t,o);for(let i=0;i<a.length;i++)for(let l=0;l<e.length;l++){const d=e[l];if((!Q(d.collapsed)||d.collapsed===n.collapsed)&&He(d)&&t.is(a[i],d.selector))return a[i]}return o},wh=(t,e,n,o)=>{var r;let s=n;const a=t.dom,i=a.getRoot(),l=e[0];if(Nn(l)&&(s=l.wrapper?null:a.getParent(n,l.block,i)),!s){const d=null!==(r=a.getParent(n,"LI,TD,TH"))&&void 0!==r?r:i;s=a.getParent(z(n)?n.parentNode:n,c=>c!==i&&MS(t,c),d)}if(s&&Nn(l)&&l.wrapper&&(s=ph(a,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[o]&&!a.isBlock(s[o])&&(s=s[o],!nc(s,"br")););return s||n},xh=(t,e,n,o)=>{const r=n.parentNode;return!Q(n[o])&&(!(r!==e&&!Ft(r)&&!t.isBlock(r))||xh(t,e,r,o))},pi=(t,e,n,o,r)=>{let s=n;const a=r?"previousSibling":"nextSibling",i=t.getRoot();if(z(n)&&!hh(n)&&(r?o>0:o<n.data.length))return n;for(;s;){if(!e[0].block_expand&&t.isBlock(s))return s;for(let d=s[a];d;d=d[a]){const c=z(d)&&!xh(t,i,d,a);if(!Ar(d)&&(!It(l=d)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!hh(d,c))return s}if(s===i||s.parentNode===i){n=s;break}s=s.parentNode}var l;return n},kh=t=>Ar(t.parentNode)||Ar(t),Or=(t,e,n,o=!1)=>{let{startContainer:r,startOffset:s,endContainer:a,endOffset:i}=e;const l=t.dom,d=n[0];return J(r)&&r.hasChildNodes()&&(r=ao(r,s),z(r)&&(s=0)),J(a)&&a.hasChildNodes()&&(a=ao(a,e.collapsed?i:i-1),z(a)&&(i=a.data.length)),r=bh(l,r),a=bh(l,a),kh(r)&&(r=Ar(r)?r:r.parentNode,r=e.collapsed?r.previousSibling||r:r.nextSibling||r,z(r)&&(s=e.collapsed?r.length:0)),kh(a)&&(a=Ar(a)?a:a.parentNode,a=e.collapsed?a.nextSibling||a:a.previousSibling||a,z(a)&&(i=e.collapsed?0:a.length)),e.collapsed&&(yh(l,t.getBody(),r,s,!0,o).each(({container:c,offset:u})=>{r=c,s=u}),yh(l,t.getBody(),a,i,!1,o).each(({container:c,offset:u})=>{a=c,i=u})),(Gt(d)||d.block_expand)&&(Gt(d)&&z(r)&&0!==s||(r=pi(l,n,r,s,!0)),Gt(d)&&z(a)&&i!==a.data.length||(a=pi(l,n,a,i,!1))),sc(d)&&(r=Ch(l,n,e,r,"previousSibling"),a=Ch(l,n,e,a,"nextSibling")),(Nn(d)||He(d))&&(r=wh(t,n,r,"previousSibling"),a=wh(t,n,a,"nextSibling"),Nn(d)&&(l.isBlock(r)||(r=pi(l,n,r,s,!0)),l.isBlock(a)||(a=pi(l,n,a,i,!1)))),J(r)&&r.parentNode&&(s=l.nodeIndex(r),r=r.parentNode),J(a)&&a.parentNode&&(i=l.nodeIndex(a)+1,a=a.parentNode),{startContainer:r,startOffset:s,endContainer:a,endOffset:i}},js=(t,e,n)=>{var o;const r=e.startOffset,s=ao(e.startContainer,r),a=e.endOffset,i=ao(e.endContainer,a-1),l=p=>{const v=p[0];z(v)&&v===s&&r>=v.data.length&&p.splice(0,1);const b=p[p.length-1];return 0===a&&p.length>0&&b===i&&z(b)&&p.splice(p.length-1,1),p},d=(p,v,b)=>{const C=[];for(;p&&p!==b;p=p[v])C.push(p);return C},c=(p,v)=>t.getParent(p,b=>b.parentNode===v,v),u=(p,v,b)=>{const C=b?"nextSibling":"previousSibling";for(let w=p,k=w.parentNode;w&&w!==v;w=k){k=w.parentNode;const x=d(w===p?w:w[C],C);x.length&&(b||x.reverse(),n(l(x)))}};if(s===i)return n(l([s]));const f=null!==(o=t.findCommonAncestor(s,i))&&void 0!==o?o:t.getRoot();if(t.isChildOf(s,i))return u(s,f,!0);if(t.isChildOf(i,s))return u(i,f);const m=c(s,f)||s,g=c(i,f)||i;u(s,m,!0);const h=d(m===s?m:m.nextSibling,"nextSibling",g===i?g.nextSibling:g);h.length&&n(l(h)),u(i,g)},US=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Sh=(t,e,n,o,r,s)=>{const c=n,{uid:a=e}=c,i=zw(c,["uid"]);ds(t,ks()),Qt(t,`${yr()}`,a),Qt(t,`${Io()}`,o);const{attributes:l={},classes:d=[]}=r(a,i);if(Qn(t,l),u=t,j(d,m=>{ds(u,m)}),s){d.length>0&&Qt(t,`${_s()}`,d.join(","));const u=Pe(l);u.length>0&&Qt(t,`${Es()}`,u.join(","))}var u},_h=(t,e,n,o,r)=>{const s=Jt("span",t);return Sh(s,e,n,o,r,!1),s},Eh=t=>{const e=(()=>{const s={};return{register:(a,i)=>{s[a]={name:a,settings:i}},lookup:a=>Rt(s,a).map(i=>i.settings),getNames:()=>Pe(s)}})();((s,a)=>{const i=Io(),l=c=>y.from(c.attr(i)).bind(a.lookup),d=c=>{var u,f;c.attr(yr(),null),c.attr(Io(),null),c.attr(Ss(),null);const m=y.from(c.attr(Es())).map(v=>v.split(",")).getOr([]),g=y.from(c.attr(_s())).map(v=>v.split(",")).getOr([]);j(m,v=>c.attr(v,null));const h=null!==(f=null===(u=c.attr("class"))||void 0===u?void 0:u.split(" "))&&void 0!==f?f:[],p=Ml(h,[ks()].concat(g));c.attr("class",p.length>0?p.join(" "):null),c.attr(_s(),null),c.attr(Es(),null)};s.serializer.addTempAttr(Ss()),s.serializer.addAttributeFilter(i,c=>{for(const u of c)l(u).each(f=>{!1===f.persistent&&("span"===u.name?u.unwrap():d(u))})})})(t,e);const n=((s,a)=>{const i=Wt({}),l=()=>({listeners:[],previous:so()}),d=(m,g)=>{c(m,h=>(g(h),h))},c=(m,g)=>{const h=i.get(),p=g(Rt(h,m).getOrThunk(l));h[m]=p,i.set(h)},u=(m,g)=>{j(Mg(s,m),h=>{g?Qt(h,Ss(),"true"):se(h,Ss())})},f=Sd(()=>{const m=ns(a.getNames());j(m,g=>{c(g,h=>{const p=h.previous.get();return Pg(s,y.some(g)).fold(()=>{p.each(v=>{var b;d(b=g,C=>{j(C.listeners,w=>w(!1,b))}),h.previous.clear(),u(v,!1)})},({uid:v,name:b,elements:C})=>{var w,k,x;lr(p,v)||(p.each(w=>u(w,!1)),k=v,x=C,d(w=b,E=>{j(E.listeners,S=>S(!0,w,{uid:k,nodes:bt(x,O=>O.dom)}))}),h.previous.set(v),u(v,!0))}),{previous:h.previous,listeners:h.listeners}})})},30);return s.on("remove",()=>{f.cancel()}),s.on("NodeChange",()=>{f.throttle()}),{addListener:(m,g)=>{c(m,h=>({previous:h.previous,listeners:h.listeners.concat([g])}))}}})(t,e),o=Gl("span"),r=s=>{j(s,a=>{o(a)?to(a):(i=>{Oa(i,ks()),se(i,`${yr()}`),se(i,`${Io()}`),se(i,`${Ss()}`);const l=In(i,`${Es()}`).map(u=>u.split(",")).getOr([]),d=In(i,`${_s()}`).map(u=>u.split(",")).getOr([]);var c;j(l,u=>se(i,u)),c=i,j(d,u=>{Oa(c,u)}),se(i,`${_s()}`),se(i,`${Es()}`)})(a)})};return{register:(s,a)=>{e.register(s,a)},annotate:(s,a)=>{e.lookup(s).each(i=>{var l,d,c,u;d=s,c=i,u=a,(l=t).undoManager.transact(()=>{const f=l.selection,m=f.getRng(),g=Nr(l).length>0,h=Ug("mce-annotation");if(m.collapsed&&!g&&((p,v)=>{const b=Or(p,v,[{inline:"span"}]);v.setStart(b.startContainer,b.startOffset),v.setEnd(b.endContainer,b.endOffset),p.selection.setRng(v)})(l,m),f.getRng().collapsed&&!g){const p=_h(l.getDoc(),h,u,d,c.decorate);La(p,Zt),f.getRng().insertNode(p.dom),f.select(p.dom)}else ch(f,!1,()=>{Jd(l,p=>{((t,e,n,o,r,s)=>{const a=[],i=_h(t.getDoc(),n,s,o,r),l=so(),d=()=>{l.clear()},c=f=>{j(f,u)},u=f=>{switch(m=t,g=f,h="span",p=Bt(f),Me(g).fold(()=>"skipping",v=>{return"br"===p||Le(b=g)&&id(b)===ie?"valid":(b=>Qe(b)&&Xl(b,ks()))(g)?"existing":cn(g.dom)?"caret":zt(US,b=>rn(g,b))?"valid-block":Rr(m,h,p)&&Rr(m,Bt(v),h)?"valid":"invalid-child";var b})){case"invalid-child":{d();const m=ae(f);c(m),d();break}case"valid-block":d(),Sh(f,n,s,o,r,!0);break;case"valid":{const m=l.get().getOrThunk(()=>{const g=Cr(i);return a.push(g),l.set(g),g});((g,h)=>{Ie(g,h),qt(h,g)})(f,m);break}}var m,g,h,p};js(t.dom,e,f=>{d(),(m=>{const g=bt(m,R);c(g)})(f)})})(l,p,h,d,c.decorate,u)})})})})},annotationChanged:(s,a)=>{n.addListener(s,a)},remove:s=>{const a=t.selection.getBookmark();Pg(t,y.some(s)).each(({elements:i})=>{r(i)}),t.selection.moveToBookmark(a)},removeAll:s=>{const a=t.selection.getBookmark();Nt(Ig(t,s),(i,l)=>{r(i)}),t.selection.moveToBookmark(a)},getAll:s=>{const a=Ig(t,s);return Sa(a,i=>bt(i,l=>l.dom))}}},Hs=t=>({getBookmark:et(OS,t),moveToBookmark:et(TS,t)});Hs.isBookmarkNode=je;const Nh=(t,e,n)=>!n.collapsed&&zt(n.getClientRects(),o=>{return a=e,(s=t)>=(r=o).left&&s<=r.right&&a>=r.top&&a<=r.bottom;var r,s,a}),Rh=(t,e,n)=>{t.dispatch(e,n)},Ah=(t,e,n,o)=>{t.dispatch("FormatApply",{format:e,node:n,vars:o})},Oh=(t,e,n,o)=>{t.dispatch("FormatRemove",{format:e,node:n,vars:o})},Th=(t,e)=>t.dispatch("SetContent",e),Bh=(t,e)=>t.dispatch("GetContent",e),Dh=(t,e)=>t.dispatch("PastePlainTextToggle",{state:e}),ot={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||ot.metaKeyPressed(t),metaKeyPressed:t=>vt.os.isMacOS()||vt.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},$s="data-mce-selected",Ph=Math.abs,hi=Math.round,ac={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Lh=(t,e)=>{const n=e.dom,o=e.getDoc(),r=document,s=e.getBody();let a,i,l,d,c,u,f,m,g,h,p,v,b,C,w;const k=nt=>Q(nt)&&(eg(nt)||n.is(nt,"figure.image")),x=nt=>wn(nt)||n.hasClass(nt,"mce-preview-object"),E=nt=>{const ct=nt.target;((mt,N)=>{if("longpress"===(A=mt).type||0===A.type.indexOf("touch")){const A=mt.touches[0];return k(mt.target)&&!Nh(A.clientX,A.clientY,N)}var A;return k(mt.target)&&!Nh(mt.clientX,mt.clientY,N)})(nt,e.selection.getRng())&&!nt.isDefaultPrevented()&&e.selection.select(ct)},S=nt=>n.hasClass(nt,"mce-preview-object")&&Q(nt.firstElementChild)?[nt,nt.firstElementChild]:n.is(nt,"figure.image")?[nt.querySelector("img")]:[nt],O=nt=>{const ct=Np(e);return!!ct&&"false"!==nt.getAttribute("data-mce-resize")&&nt!==e.getBody()&&(n.hasClass(nt,"mce-preview-object")&&Q(nt.firstElementChild)?rn(R(nt.firstElementChild),ct):rn(R(nt),ct))},B=(nt,ct,mt)=>{if(Q(mt)){const N=S(nt);j(N,A=>{A.style[ct]||!e.schema.isValid(A.nodeName.toLowerCase(),ct)?n.setStyle(A,ct,mt):n.setAttrib(A,ct,""+mt)})}},_=(nt,ct,mt)=>{B(nt,"width",ct),B(nt,"height",mt)},D=nt=>{let ct,mt,N,A,L;ct=nt.screenX-u,mt=nt.screenY-f,v=ct*d[2]+m,b=mt*d[3]+g,v=v<5?5:v,b=b<5?5:b,N=(k(a)||x(a))&&!1!==Ek(e)?!ot.modifierPressed(nt):ot.modifierPressed(nt),N&&(Ph(ct)>Ph(mt)?(b=hi(v*h),v=hi(b/h)):(v=hi(b/h),b=hi(v*h))),_(i,v,b),A=d.startPos.x+ct,L=d.startPos.y+mt,A=A>0?A:0,L=L>0?L:0,n.setStyles(l,{left:A,top:L,display:"block"}),l.innerHTML=v+" &times; "+b,d[2]<0&&i.clientWidth<=v&&n.setStyle(i,"left",void 0+(m-v)),d[3]<0&&i.clientHeight<=b&&n.setStyle(i,"top",void 0+(g-b)),ct=s.scrollWidth-C,mt=s.scrollHeight-w,ct+mt!==0&&n.setStyles(l,{left:A-ct,top:L-mt}),p||(e.dispatch("ObjectResizeStart",{target:a,width:m,height:g,origin:"corner-"+d.name}),p=!0)},M=()=>{const nt=p;p=!1,nt&&(B(a,"width",v),B(a,"height",b)),n.unbind(o,"mousemove",D),n.unbind(o,"mouseup",M),r!==o&&(n.unbind(r,"mousemove",D),n.unbind(r,"mouseup",M)),n.remove(i),n.remove(l),n.remove(c),U(a),nt&&(e.dispatch("ObjectResized",{target:a,width:v,height:b,origin:"corner-"+d.name}),n.setAttrib(a,"style",n.getAttrib(a,"style"))),e.nodeChanged()},U=nt=>{ht();const ct=n.getPos(nt,s),mt=ct.x,N=ct.y,A=nt.getBoundingClientRect(),L=A.width||A.right-A.left,T=A.height||A.bottom-A.top;a!==nt&&(Y(),a=nt,v=b=0);const I=e.dispatch("ObjectSelected",{target:nt});O(nt)&&!I.isDefaultPrevented()?Nt(ac,(q,X)=>{let $=n.get("mceResizeHandle"+X);$&&n.remove($),$=n.add(s,"div",{id:"mceResizeHandle"+X,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+X+"-resize; margin:0; padding:0"}),n.bind($,"mousedown",tt=>{tt.stopImmediatePropagation(),tt.preventDefault(),(W=>{const at=S(a)[0];var xt;u=W.screenX,f=W.screenY,m=at.clientWidth,g=at.clientHeight,h=g/m,d=q,d.name=X,d.startPos={x:L*q[0]+mt,y:T*q[1]+N},C=s.scrollWidth,w=s.scrollHeight,c=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(c,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=x(xt=a)?n.create("img",{src:vt.transparentSrc}):xt.cloneNode(!0),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:mt,top:N,margin:0}),_(i,L,T),i.removeAttribute($s),s.appendChild(i),n.bind(o,"mousemove",D),n.bind(o,"mouseup",M),r!==o&&(n.bind(r,"mousemove",D),n.bind(r,"mouseup",M)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},m+" &times; "+g)})(tt)}),q.elm=$,n.setStyles($,{left:L*q[0]+mt-$.offsetWidth/2,top:T*q[1]+N-$.offsetHeight/2})}):Y(!1)},K=Qa(U,0),Y=(nt=!0)=>{K.cancel(),ht(),a&&nt&&a.removeAttribute($s),Nt(ac,(ct,mt)=>{const N=n.get("mceResizeHandle"+mt);N&&(n.unbind(N),n.remove(N))})},V=(nt,ct)=>n.isChildOf(nt,ct),st=nt=>{if(p||e.removed||e.composing)return;const ct="mousedown"===nt.type?nt.target:t.getNode(),mt=To(R(ct),"table,img,figure.image,hr,video,span.mce-preview-object").map(A=>A.dom).getOrUndefined(),N=Q(mt)?n.getAttrib(mt,$s,"1"):"1";if(j(n.select("img[data-mce-selected],hr[data-mce-selected]"),A=>{A.removeAttribute($s)}),Q(mt)&&V(mt,s)){St();const A=t.getStart(!0);if(V(A,mt)&&V(t.getEnd(!0),mt))return n.setAttrib(mt,$s,N),void K.throttle(mt)}Y()},ht=()=>{Nt(ac,nt=>{nt.elm&&(n.unbind(nt.elm),delete nt.elm)})},St=()=>{try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(nt){}};return e.on("init",()=>{St(),e.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",st),e.on("keyup compositionend",nt=>{a&&"TABLE"===a.nodeName&&st(nt)}),e.on("hide blur",Y),e.on("contextmenu longpress",E,!0)}),e.on("remove",ht),{isResizable:O,showResizeRect:U,hideResizeRect:Y,updateResizeRect:st,destroy:()=>{K.cancel(),a=i=c=null}}},Mh=(t,e,n)=>{const o=t.document.createRange();var r,s;return r=o,e.fold(s=>{r.setStartBefore(s.dom)},(s,a)=>{r.setStart(s.dom,a)},s=>{r.setStartAfter(s.dom)}),s=o,n.fold(i=>{s.setEndBefore(i.dom)},(i,l)=>{s.setEnd(i.dom,l)},i=>{s.setEndAfter(i.dom)}),o},ic=(t,e,n,o,r)=>{const s=t.document.createRange();return s.setStart(e.dom,n),s.setEnd(o.dom,r),s},Vs=xn([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Ih=(t,e,n)=>e(R(n.startContainer),n.startOffset,R(n.endContainer),n.endOffset),Fh=(t,e,n,o)=>({start:t,soffset:e,finish:n,foffset:o}),jS=document.caretPositionFromPoint?(t,e,n)=>{var o,r;return y.from(null===(r=(o=t.dom).caretPositionFromPoint)||void 0===r?void 0:r.call(o,e,n)).bind(s=>{if(null===s.offsetNode)return y.none();const a=t.dom.createRange();return a.setStart(s.offsetNode,s.offset),a.collapse(),y.some(a)})}:document.caretRangeFromPoint?(t,e,n)=>{var o,r;return y.from(null===(r=(o=t.dom).caretRangeFromPoint)||void 0===r?void 0:r.call(o,e,n))}:y.none,lc=xn([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),$n={before:lc.before,on:lc.on,after:lc.after,cata:(t,e,n,o)=>t.fold(e,n,o),getStart:t=>t.fold(he,he,he)},bi=xn([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Tr={domRange:bi.domRange,relative:bi.relative,exact:bi.exact,exactFromRange:t=>bi.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const e=t.match({domRange:o=>R(o.startContainer),relative:(o,r)=>$n.getStart(o),exact:(o,r,s,a)=>o});return ms(e)},range:Fh},vi=(t,e)=>{const n=Bt(t);return"input"===n?$n.after(t):Et(["br","img"],n)?0===e?$n.before(t):$n.after(t):$n.on(t,e)},HS=(t,e)=>{const n=t.fold($n.before,vi,$n.after),o=e.fold($n.before,vi,$n.after);return Tr.relative(n,o)},Uh=(t,e,n,o)=>{const r=vi(t,e),s=vi(n,o);return Tr.relative(r,s)},dc=(t,e)=>{const n=(e||document).createDocumentFragment();return j(t,o=>{n.appendChild(o.dom)}),R(n)},zh=(t,e,n)=>{return(o=ms(R(n)).dom,r=t,s=e,((a,i,l)=>{const d=R(a.document);return jS(d,i,l).map(c=>Fh(R(c.startContainer),c.startOffset,R(c.endContainer),c.endOffset))})(o,r,s)).map(o=>{const r=n.createRange();return r.setStart(o.start.dom,o.soffset),r.setEnd(o.finish.dom,o.foffset),r}).getOrUndefined();var o,r,s},cc=(t,e)=>Q(t)&&Q(e)&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset,jh=(t,e,n)=>null!==((o,r,s)=>{let a=o;for(;a&&a!==r;){if(s(a))return a;a=a.parentNode}return null})(t,e,n),VS=(t,e,n)=>jh(t,e,o=>o.nodeName===n),qS=(t,e)=>Fe(t)&&!jh(t,e,cn),Hh=(t,e,n)=>{const o=e.parentNode;if(o){const r=new Ht(e,t.getParent(o,t.isBlock)||t.getRoot());let s;for(;s=r[n?"prev":"next"]();)if(It(s))return!0}return!1},uc=(t,e,n,o,r)=>{const s=t.getRoot(),a=t.schema.getNonEmptyElements(),i=r.parentNode;let l,d;if(!i)return y.none();const c=t.getParent(i,t.isBlock)||s;if(o&&It(r)&&e&&t.isEmpty(c))return y.some(F(i,t.nodeIndex(r)));const u=new Ht(r,c);for(;d=u[o?"prev":"next"]();){if("false"===t.getContentEditableParent(d)||qS(d,s))return y.none();if(z(d)&&d.data.length>0)return VS(d,s,"A")?y.none():y.some(F(d,o?d.data.length:0));if(t.isBlock(d)||a[d.nodeName.toLowerCase()])return y.none();l=d}return eo(l)?y.none():n&&l?y.some(F(l,0)):y.none()},$h=(t,e,n,o)=>{const r=t.getRoot();let s,a=!1,i=n?o.startContainer:o.endContainer,l=n?o.startOffset:o.endOffset;const d=J(i)&&l===i.childNodes.length,c=t.schema.getNonEmptyElements();let u=n;if(Fe(i))return y.none();if(J(i)&&l>i.childNodes.length-1&&(u=!1),ps(i)&&(i=r,l=0),i===r){if(u&&(s=i.childNodes[l>0?l-1:0],s)&&(Fe(s)||c[s.nodeName]||zn(s)))return y.none();if(i.hasChildNodes()){if(l=Math.min(!u&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=z(i)&&d?i.data.length:0,!e&&i===r.lastChild&&zn(i)||((f,m)=>{let g=m;for(;g&&g!==f;){if(At(g))return!0;g=g.parentNode}return!1})(r,i)||Fe(i))return y.none();if(i.hasChildNodes()&&!zn(i)){s=i;const f=new Ht(i,r);do{if(At(s)||Fe(s)){a=!1;break}if(z(s)&&s.data.length>0){l=u?0:s.data.length,i=s,a=!0;break}if(c[s.nodeName.toLowerCase()]&&!ng(s)){l=t.nodeIndex(s),i=s.parentNode,u||l++,a=!0;break}}while(s=u?f.next():f.prev())}}}return e&&(z(i)&&0===l&&uc(t,d,e,!0,i).each(f=>{i=f.container(),l=f.offset(),a=!0}),J(i)&&(s=i.childNodes[l],s||(s=i.childNodes[l-1]),!s||!It(s)||"A"===(null===(g=s.previousSibling)||void 0===g?void 0:g.nodeName)||Hh(t,s,!1)||Hh(t,s,!0)||uc(t,d,e,!0,s).each(f=>{i=f.container(),l=f.offset(),a=!0}))),u&&!e&&z(i)&&l===i.data.length&&uc(t,d,e,!1,i).each(f=>{i=f.container(),l=f.offset(),a=!0}),a&&i?y.some(F(i,l)):y.none();var g},yi=(t,e)=>{const n=e.collapsed,o=e.cloneRange(),r=F.fromRangeStart(e);return $h(t,n,!0,o).each(s=>{n&&F.isAbove(r,s)||o.setStart(s.container(),s.offset())}),n||$h(t,n,!1,o).each(s=>{o.setEnd(s.container(),s.offset())}),n&&o.collapse(!0),cc(e,o)?y.none():y.some(o)},Ci=(t,e)=>t.splitText(e),wi=t=>{let e=t.startContainer,n=t.startOffset,o=t.endContainer,r=t.endOffset;if(e===o&&z(e)){if(n>0&&n<e.data.length)if(o=Ci(e,n),e=o.previousSibling,r>n){r-=n;const s=Ci(o,r).previousSibling;e=o=s,r=s.data.length,n=0}else r=0}else if(z(e)&&n>0&&n<e.data.length&&(e=Ci(e,n),n=0),z(o)&&r>0&&r<o.data.length){const s=Ci(o,r).previousSibling;o=s,r=s.data.length}return{startContainer:e,startOffset:n,endContainer:o,endOffset:r}},Br=t=>({walk:(e,n)=>js(t,e,n),split:wi,normalize:e=>yi(t,e).fold(Tt,n=>(e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),!0))});Br.compareRanges=cc,Br.getCaretRangeFromPoint=zh,Br.getSelectedNode=Ja,Br.getNode=ao;const WS=((t,e)=>{const n=r=>{const s=(a=>{const i=a.dom;return cr(a)?i.getBoundingClientRect().height:i.offsetHeight})(r);if(s<=0||null===s){const a=yn(r,t);return parseFloat(a)||0}return s},o=(r,s)=>Oe(s,(a,i)=>{const l=yn(r,i),d=void 0===l?0:parseInt(l,10);return isNaN(d)?a:a+d},0);return{set:(r,s)=>{if(!on(s)&&!s.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+s);const a=r.dom;cs(a)&&(a.style[t]=s+"px")},get:n,getOuter:n,aggregate:o,max:(r,s,a)=>{const i=o(r,a);return s>i?s-i:0}}})("height"),Vh=()=>R(document),qh=(t,e)=>t.view(e).fold(G([]),n=>{const o=t.owner(n),r=qh(t,o);return[n].concat(r)});var KS=Object.freeze({__proto__:null,view:t=>{var e;return(t.dom===document?y.none():y.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(R)},owner:t=>Un(t)});const mc=t=>"textarea"===Bt(t),Wh=(t,e)=>{const n=(r=>{const s=r.dom.ownerDocument,a=s.body,i=s.defaultView,l=s.documentElement;if(a===r.dom)return ur(a.offsetLeft,a.offsetTop);const d=Ma(null==i?void 0:i.pageYOffset,l.scrollTop),c=Ma(null==i?void 0:i.pageXOffset,l.scrollLeft),u=Ma(l.clientTop,a.clientTop),f=Ma(l.clientLeft,a.clientLeft);return td(r).translate(c-f,d-u)})(t),o=WS.get(t);return{element:t,bottom:n.top+o,height:o,pos:n,cleanup:e}},Kh=(t,e,n,o)=>{YS(t,(r,s)=>GS(t,e,n,o),n)},Gh=(t,e,n,o,r)=>{const s={elm:o.element.dom,alignToTop:r};t.dispatch("ScrollIntoView",s).isDefaultPrevented()||(n(e,ed(e).top,o,r),t.dispatch("AfterScrollIntoView",s))},GS=(t,e,n,o)=>{R(t.getBody());const s=R(t.getDoc()),a=((i,l)=>{const d=((u,f)=>{const m=ae(u);if(0===m.length||mc(u))return{element:u,offset:f};if(f<m.length&&!mc(m[f]))return{element:m[f],offset:0};{const g=m[m.length-1];return mc(g)?{element:u,offset:f}:"img"===Bt(g)?{element:g,offset:1}:Le(g)?{element:g,offset:id(g).length}:{element:g,offset:ae(g).length}}})(i,l),c=Ta('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return Ie(d.element,c),Wh(c,()=>Ot(c))})(R(n.startContainer),n.startOffset);Gh(t,s,e,a,o),a.cleanup()},Yh=(t,e,n,o)=>{const r=R(t.getDoc());Gh(t,r,n,Wh(R(e),pt),o)},YS=(t,e,n)=>{const o=n.startContainer,r=n.startOffset,s=n.endContainer,a=n.endOffset;e(R(o),R(s));const i=t.dom.createRng();i.setStart(o,r),i.setEnd(s,a),t.selection.setRng(n)},fc=(t,e,n,o)=>{const r=t.pos;Yf(r.left,n?r.top:r.top-e+t.height,o)},Xh=(t,e,n,o,r)=>{const s=n+e,a=o.pos.top,i=o.bottom,l=i-a>=n;a<e?fc(o,n,!1!==r,t):a>s?fc(o,n,l?!1!==r:!0===r,t):i>s&&!l&&fc(o,n,!0===r,t)},Qh=(t,e,n,o)=>{const r=ms(t).dom.innerHeight;Xh(t,e,r,n,o)},Jh=(t,e,n,o)=>{const r=ms(t).dom.innerHeight;Xh(t,e,r,n,o);const s=(i=>{const l=Vh(),d=ed(l),c=((m,g)=>{const h=g.owner(m);return qh(g,h)})(i,KS),u=td(i),f=ka(c,(m,g)=>{const h=td(g);return{left:m.left+h.left,top:m.top+h.top}},{left:0,top:0});return ur(f.left+u.left+d.left,f.top+u.top+d.top)})(n.element),a=Jf(window);s.top<a.y?Xf(n.element,!1!==o):s.top>a.bottom&&Xf(n.element,!0===o)},XS=(t,e,n)=>Kh(t,Qh,e,n),QS=(t,e,n)=>Yh(t,e,Qh,n),JS=(t,e,n)=>Kh(t,Jh,e,n),ZS=(t,e,n)=>Yh(t,e,Jh,n),qs=(t,e,n)=>{(t.inline?XS:JS)(t,e,n)},Zh=t=>t.dom.focus(),tb=t=>{const e=Jn(t).dom;return t.dom===e.activeElement},gc=(t=Vh())=>y.from(t.dom.activeElement).map(R),eb=(t,e)=>{const n=Le(e)?id(e).length:ae(e).length+1;return t>n?n:t<0?0:t},t_=t=>Tr.range(t.start,eb(t.soffset,t.start),t.finish,eb(t.foffset,t.finish)),nb=(t,e)=>!Ia(e.dom)&&(Fn(t,e)||wt(t,e)),ob=t=>e=>nb(t,e.start)&&nb(t,e.finish),e_=t=>Tr.range(R(t.startContainer),t.startOffset,R(t.endContainer),t.endOffset),n_=t=>{const e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),y.some(e)}catch(n){return y.none()}},pc=t=>{const e=t.inline?(n=R(t.getBody()),(o=>{const r=o.getSelection();return(r&&0!==r.rangeCount?y.from(r.getRangeAt(0)):y.none()).map(e_)})(ms(n).dom).filter(ob(n))):y.none();var n;t.bookmark=e.isSome()?e:t.bookmark},hc=t=>(t.bookmark?t.bookmark:y.none()).bind(e=>{return n=R(t.getBody()),y.from(e).filter(ob(n)).map(t_);var n}).bind(n_),rb={isEditorUIElement:t=>{const e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},$e={setEditorTimeout:(t,e,n)=>{return on(r=n)||(r=0),setTimeout(()=>{t.removed||e()},r);var r},setEditorInterval:(t,e,n)=>{const o=(on(s=n)||(s=0),setInterval(()=>{t.removed?clearInterval(o):e()},s));var s;return o}};let Dr;const bc=_t.DOM,xi=(t,e)=>{const n=Lk(t);return null!==bc.getParent(e,r=>{return J(s=r)&&rb.isEditorUIElement(s)||!!n&&t.dom.is(r,n);var s})},o_=(t,e)=>{const n=e.editor;(o=>{const r=Qa(()=>{pc(o)},0);o.on("init",()=>{var s,l;o.inline&&((s,a)=>{const i=()=>{a.throttle()};_t.DOM.bind(document,"mouseup",i),s.on("remove",()=>{_t.DOM.unbind(document,"mouseup",i)})})(o,r),l=r,(s=o).on("mouseup touchend",d=>{l.throttle()}),s.on("keyup NodeChange AfterSetSelectionRange",i=>{(l=>"nodechange"===l.type&&l.selectionChange)(i)||pc(s)})}),o.on("remove",()=>{r.cancel()})})(n),n.on("focusin",()=>{const o=t.focusedEditor;o!==n&&(o&&o.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:o}),n.focus(!0))}),n.on("focusout",()=>{$e.setEditorTimeout(n,()=>{const o=t.focusedEditor;xi(n,(r=>{try{const s=Jn(R(r.getElement()));return gc(s).fold(()=>document.body,a=>a.dom)}catch(s){return document.body}})(n))||o!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),Dr||(Dr=o=>{const r=t.activeEditor;r&&zf(o).each(s=>{s.ownerDocument===document&&(s===document.body||xi(r,s)||t.focusedEditor!==r||(r.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},bc.bind(document,"focusin",Dr))},r_=(t,e)=>{t.focusedEditor===e.editor&&(t.focusedEditor=null),!t.activeEditor&&Dr&&(bc.unbind(document,"focusin",Dr),Dr=null)},sb=(t,e)=>{var n,o,r;(n=R(t.getBody()),o=e,(r=o,r.collapsed?y.from(ao(r.startContainer,r.startOffset)).map(R):y.none()).bind(r=>yx(r)?y.some(r):Fn(n,r)?y.none():y.some(n))).bind(n=>we(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},vc=t=>{if(t.setActive)try{t.setActive()}catch(e){t.focus()}else t.focus()},qo=t=>{return t.inline?(e=>{const n=e.getBody();return n&&(o=R(n),tb(o)||(r=o,gc(Jn(r)).filter(s=>r.dom.contains(s.dom))).isSome());var o,r})(t):Q((e=t).iframeElement)&&tb(R(e.iframeElement));var e},yc=t=>t.editorManager.setActive(t),ab=(t,e,n,o,r)=>{const a=n?e.startOffset:e.endOffset;return y.from(n?e.startContainer:e.endContainer).map(R).map(i=>o&&e.collapsed?i:Ba(i,r(i,a)).getOr(i)).bind(i=>Qe(i)?y.some(i):Me(i).filter(Qe)).map(i=>i.dom).getOr(t)},ib=(t,e,n=!1)=>ab(t,e,!0,n,(o,r)=>Math.min(Ff(o),r)),lb=(t,e,n=!1)=>ab(t,e,!1,n,(o,r)=>r>0?r-1:r),db=(t,e)=>{const n=t;for(;t&&z(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},Cc=(t,e)=>bt(e,n=>{const o=t.dispatch("GetSelectionRange",{range:n});return o.range!==n?o.range:n}),s_=["img","br"],cb=t=>mg(t).filter(n=>0!==n.trim().length||n.indexOf(Zt)>-1).isSome()||Et(s_,Bt(t)),ub="[data-mce-autocompleter]",mb=t=>bs(t,ub),i_={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},ki=(t,e,n)=>{const o=n?"lastChild":"firstChild",r=n?"prev":"next";if(t[o])return t[o];if(t!==e){let s=t[r];if(s)return s;for(let a=t.parent;a&&a!==e;a=a.parent)if(s=a[r],s)return s}},l_=t=>{var e;const n=null!==(e=t.value)&&void 0!==e?e:"";if(!Po(n))return!1;const o=t.parent;return!o||"span"===o.name&&!o.attr("style")||!/^[ ]+$/.test(n)},fb=t=>{const e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e};class xe{constructor(e,n){this.name=e,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}static create(e,n){const o=new xe(e,i_[e]||1);return n&&Nt(n,(r,s)=>{o.attr(s,r)}),o}replace(e){const n=this;return e.parent&&e.remove(),n.insert(e,n),n.remove(),n}attr(e,n){const o=this;if(!lt(e))return Q(e)&&Nt(e,(s,a)=>{o.attr(a,s)}),o;const r=o.attributes;if(r){if(void 0!==n){if(null===n){if(e in r.map){delete r.map[e];let s=r.length;for(;s--;)if(r[s].name===e)return r.splice(s,1),o}return o}if(e in r.map){let s=r.length;for(;s--;)if(r[s].name===e){r[s].value=n;break}}else r.push({name:e,value:n});return r.map[e]=n,o}return r.map[e]}}clone(){const e=this,n=new xe(e.name,e.type),o=e.attributes;if(o){const r=[];r.map={};for(let s=0,a=o.length;s<a;s++){const i=o[s];"id"!==i.name&&(r[r.length]={name:i.name,value:i.value},r.map[i.name]=i.value)}n.attributes=r}return n.value=e.value,n}wrap(e){const n=this;return n.parent&&(n.parent.insert(e,n),e.append(n)),n}unwrap(){const e=this;for(let n=e.firstChild;n;){const o=n.next;e.insert(n,e,!0),n=o}e.remove()}remove(){const e=this,n=e.parent,o=e.next,r=e.prev;return n&&(n.firstChild===e?(n.firstChild=o,o&&(o.prev=null)):r&&(r.next=o),n.lastChild===e?(n.lastChild=r,r&&(r.next=null)):o&&(o.prev=r),e.parent=e.next=e.prev=null),e}append(e){const n=this;e.parent&&e.remove();const o=n.lastChild;return o?(o.next=e,e.prev=o,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e}insert(e,n,o){e.parent&&e.remove();const r=n.parent||this;return o?(n===r.firstChild?r.firstChild=e:n.prev&&(n.prev.next=e),e.prev=n.prev,e.next=n,n.prev=e):(n===r.lastChild?r.lastChild=e:n.next&&(n.next.prev=e),e.next=n.next,e.prev=n,n.next=e),e.parent=r,e}getAll(e){const n=this,o=[];for(let r=n.firstChild;r;r=ki(r,n))r.name===e&&o.push(r);return o}children(){const e=[];for(let n=this.firstChild;n;n=n.next)e.push(n);return e}empty(){const e=this;if(e.firstChild){const n=[];for(let r=e.firstChild;r;r=ki(r,e))n.push(r);let o=n.length;for(;o--;){const r=n[o];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,n={},o){var r;const s=this;let a=s.firstChild;if(fb(s))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(e[a.name]||fb(a))return!1}if(8===a.type||3===a.type&&!l_(a)||3===a.type&&a.parent&&n[a.parent.name]&&Po(null!==(r=a.value)&&void 0!==r?r:"")||o&&o(a))return!1}while(a=ki(a,s));return!0}walk(e){return ki(this,null,e)}}const gb=(t,e,n=0)=>{const o=t.toLowerCase();if(-1!==o.indexOf("[if ",n)&&/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(o.substr(n))){const r=o.indexOf("[endif]",n);return o.indexOf(">",r)}if(e){const r=o.indexOf(">",n);return-1!==r?r:o.length}{const r=/--!?>/g;r.lastIndex=n;const s=r.exec(t);return s?s.index+s[0].length:o.length}},d_=(t,e,n)=>{const o=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,r=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,s=t.getVoidElements();let a=1,i=n;for(;0!==a;)for(o.lastIndex=i;;){const l=o.exec(e);if(null===l)return i;if("!"===l[1]){i=ne(l[2],"--")?gb(e,!1,l.index+3):gb(e,!0,l.index+1);break}{r.lastIndex=o.lastIndex;const d=r.exec(e);if(yo(d)||d.index!==o.lastIndex)continue;"/"===l[1]?a-=1:gt(s,l[2])||(a+=1),i=o.lastIndex+d[0].length;break}}return i},pb=(t,e)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,o=t.schema;let r=((i,l)=>{const d=new RegExp(["\\s?("+i.join("|")+')="[^"]+"'].join("|"),"gi");return l.replace(d,"")})(t.getTempAttrs(),e);const s=o.getVoidElements();let a;for(;a=n.exec(r);){const i=n.lastIndex,l=a[0].length;let d;d=s[a[1]]?i:d_(o,r,i),r=r.substring(0,i-l)+r.substring(d),n.lastIndex=i-l}return jn(r)},c_=pb,hb=H.makeMap,bb=t=>{const e=[],n=(t=t||{}).indent,o=hb(t.indent_before||""),r=hb(t.indent_after||""),s=oo.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="xhtml"!==t.element_format;return{start:(i,l,d)=>{if(n&&o[i]&&e.length>0){const c=e[e.length-1];c.length>0&&"\n"!==c&&e.push("\n")}if(e.push("<",i),l)for(let c=0,u=l.length;c<u;c++){const f=l[c];e.push(" ",f.name,'="',s(f.value,!0),'"')}if(e[e.length]=!d||a?">":" />",d&&n&&r[i]&&e.length>0){const c=e[e.length-1];c.length>0&&"\n"!==c&&e.push("\n")}},end:i=>{let l;e.push("</",i,">"),n&&r[i]&&e.length>0&&(l=e[e.length-1],l.length>0&&"\n"!==l&&e.push("\n"))},text:(i,l)=>{i.length>0&&(e[e.length]=l?i:s(i))},cdata:i=>{e.push("<![CDATA[",i,"]]>")},comment:i=>{e.push("\x3c!--",i,"--\x3e")},pi:(i,l)=>{l?e.push("<?",i," ",s(l),"?>"):e.push("<?",i,"?>"),n&&e.push("\n")},doctype:i=>{e.push("<!DOCTYPE",i,">",n?"\n":"")},reset:()=>{e.length=0},getContent:()=>e.join("").replace(/\n$/,"")}},uo=(t={},e=ro())=>{const n=bb(t);return t.validate=!("validate"in t)||t.validate,{serialize:o=>{const r=t.validate,s={3:i=>{var l;n.text(null!==(l=i.value)&&void 0!==l?l:"",i.raw)},8:i=>{var l;n.comment(null!==(l=i.value)&&void 0!==l?l:"")},7:i=>{n.pi(i.name,i.value)},10:i=>{var l;n.doctype(null!==(l=i.value)&&void 0!==l?l:"")},4:i=>{var l;n.cdata(null!==(l=i.value)&&void 0!==l?l:"")},11:i=>{let l=i;if(l=l.firstChild)do{a(l)}while(l=l.next)}};n.reset();const a=i=>{var l;const d=s[i.type];if(d)d(i);else{const c=i.name,u=c in e.getVoidElements();let f=i.attributes;if(r&&f&&f.length>1){const m=[];m.map={};const g=e.getElementRule(i.name);if(g){for(let h=0,p=g.attributesOrder.length;h<p;h++){const v=g.attributesOrder[h];if(v in f.map){const b=f.map[v];m.map[v]=b,m.push({name:v,value:b})}}for(let h=0,p=f.length;h<p;h++){const v=f[h].name;if(!(v in m.map)){const b=f.map[v];m.map[v]=b,m.push({name:v,value:b})}}f=m}}if(n.start(c,f,u),!u){let m=i.firstChild;if(m){"pre"!==c&&"textarea"!==c||3!==m.type||"\n"!==(null===(l=m.value)||void 0===l?void 0:l[0])||n.text("\n",!0);do{a(m)}while(m=m.next)}n.end(c)}}};return 1!==o.type||t.inner?3===o.type?s[3](o):s[11](o):a(o),n.getContent()}}},vb=new Set;j(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{vb.add(t)});const yb=["font","text-decoration","text-emphasis"],wc=(t,e)=>Pe(t.parseStyle(t.getAttrib(e,"style"))),m_=(t,e,n)=>{const o=wc(t,e),r=wc(t,n),s=a=>{var i,l;const d=null!==(i=t.getStyle(e,a))&&void 0!==i?i:"",c=null!==(l=t.getStyle(n,a))&&void 0!==l?l:"";return hn(d)&&hn(c)&&d!==c};return zt(o,a=>{const i=l=>zt(l,d=>d===a);if(!i(r)&&i(yb)){const l=ut(r,d=>zt(yb,c=>ne(d,c)));return zt(l,s)}return s(a)})},Cb=(t,e,n)=>y.from(n.container()).filter(z).exists(o=>{const r=t?0:-1;return e(o.data.charAt(n.offset()+r))}),xc=et(Cb,!0,Er),kc=et(Cb,!1,Er),f_=t=>{const e=t.container();return z(e)&&(0===e.data.length||Ha(e.data)&&Hs.isBookmarkNode(e.parentNode))},mo=(t,e)=>n=>Ud(t?0:-1,n).filter(e).isSome(),wb=t=>eg(t)&&"block"===yn(R(t),"display"),xb=t=>{return At(t)&&!(J(e=t)&&"all"===e.getAttribute("data-mce-bogus"));var e},g_=mo(!0,wb),p_=mo(!1,wb),Ws=mo(!0,wn),Ks=mo(!1,wn),kb=mo(!0,zn),Sb=mo(!1,zn),fo=mo(!0,xb),go=mo(!1,xb),_b=(t,e)=>{return r=Tt,Fn(o=e,n=t)?((a,i)=>{const l=yt(i)?i:Tt;let d=a.dom;const c=[];for(;null!=d.parentNode;){const u=d.parentNode,f=R(u);if(c.push(f),!0===l(f))break;d=u}return c})(n,a=>r(a)||wt(a,o)).slice(0,-1):[];var n,o,r},Vn=(t,e)=>[t].concat(_b(t,e)),Sc=(t,e,n)=>Zp(t,e,n,f_),Eb=(t,e)=>Vt(Vn(R(e.container()),t),an),Nb=(t,e,n)=>Sc(t,e.dom,n).forall(o=>Eb(e,n).fold(()=>!kn(o,n,e.dom),r=>!kn(o,n,e.dom)&&Fn(r,R(o.container())))),Rb=(t,e,n)=>Eb(e,n).fold(()=>Sc(t,e.dom,n).forall(o=>!kn(o,n,e.dom)),o=>Sc(t,o.dom,n).isNone()),_c=et(Rb,!1),Ab=et(Rb,!0),h_=et(Nb,!1),b_=et(Nb,!0),v_=t=>si(t).exists(Bo),Si=(t,e,n)=>{const o=ut(Vn(R(n.container()),e),an),r=_e(o).getOr(e);return Ue(t,r.dom,n).filter(v_)},Ec=(t,e)=>si(e).exists(Bo)||Si(!0,t,e).isSome(),Nc=(t,e)=>{return(n=e,y.from(n.getNode(!0)).map(R)).exists(Bo)||Si(!1,t,e).isSome();var n},y_=et(Si,!1),C_=et(Si,!0),Ob=t=>F.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),Tb=(t,e)=>{const n=ut(Vn(R(e.container()),t),an);return _e(n).getOr(t)},Bb=(t,e)=>Ob(e)?kc(e):kc(e)||ze(Tb(t,e).dom,e).exists(kc),Db=(t,e)=>Ob(e)?xc(e):xc(e)||Ee(Tb(t,e).dom,e).exists(xc),Rc=t=>si(t).bind(e=>fr(e,Qe)).exists(e=>{return n=yn(e,"white-space"),Et(["pre","pre-wrap"],n);var n}),Pb=(t,e)=>n=>{return o=new Ht(n,t)[e](),Q(o)&&At(o)&&zp(o);var o},Gs=(t,e)=>!Rc(e)&&(_c(t,e)||h_(t,e)||Nc(t,e)||Bb(t,e)||((n,o)=>{const r=ze(n.dom,o).getOr(o),s=Pb(n.dom,"prev");return o.isAtStart()&&(s(o.container())||s(r.container()))})(t,e)),Ys=(t,e)=>!Rc(e)&&(Ab(t,e)||b_(t,e)||Ec(t,e)||Db(t,e)||((n,o)=>{const r=Ee(n.dom,o).getOr(o),s=Pb(n.dom,"next");return o.isAtEnd()&&(s(o.container())||s(r.container()))})(t,e)),Ac=(t,e)=>Gs(t,e)||Ys(t,(n=>{const o=n.container(),r=n.offset();return z(o)&&r<o.data.length?F(o,r+1):n})(e)),Lb=(t,e)=>ci(t.charAt(e)),Mb=(t,e)=>Er(t.charAt(e)),Ib=(t,e,n)=>{const o=e.data,r=F(e,0);return n||!Lb(o,0)||Ac(t,r)?!!(n&&Mb(o,0)&&Gs(t,r))&&(e.data=Zt+o.slice(1),!0):(e.data=" "+o.slice(1),!0)},Fb=(t,e,n)=>{const o=e.data,r=F(e,o.length-1);return n||!Lb(o,o.length-1)||Ac(t,r)?!!(n&&Mb(o,o.length-1)&&Ys(t,r))&&(e.data=o.slice(0,-1)+Zt,!0):(e.data=o.slice(0,-1)+" ",!0)},Ub=(t,e,n)=>{if(0===n)return;const o=R(t),r=mr(o,an).getOr(o),s=t.data.slice(e,e+n),a=e+n>=t.data.length&&Ys(r,F(t,t.data.length)),i=0===e&&Gs(r,F(t,0));t.replaceData(e,n,yg(s,4,i,a))},_i=(t,e)=>{const n=t.data.slice(e),o=n.length-Kw(n).length;Ub(t,e,o)},Oc=(t,e)=>{const n=t.data.slice(0,e),o=n.length-af(n).length;Ub(t,e-o,o)},Tc=(t,e,n,o=!0)=>{const r=af(t.data).length,s=o?t:e,a=o?e:t;return o?s.appendData(a.data):s.insertData(0,a.data),Ot(R(a)),n&&_i(s,r),s},x_=(t,e)=>((n,o)=>{const r=n.container(),s=n.offset();return!F.isTextPosition(n)&&r===o.parentNode&&s>F.before(o).offset()})(e,t)?F(e.container(),e.offset()-1):e,zb=t=>{return Ze(t.previousSibling)?y.some(z(e=t.previousSibling)?F(e,e.data.length):F.after(e)):t.previousSibling?En(t.previousSibling):y.none();var e},jb=t=>{return Ze(t.nextSibling)?y.some(z(e=t.nextSibling)?F(e,0):F.before(e)):t.nextSibling?we(t.nextSibling):y.none();var e},Hb=(t,e,n)=>{n.fold(()=>{t.focus()},o=>{t.selection.setRng(o.toRange(),e)})},S_=(t,e)=>e&&gt(t.schema.getBlockElements(),Bt(e)),__=t=>{if(te(t)){const e=Ta('<br data-mce-bogus="1">');return gs(t),qt(t,e),y.some(F.before(e.dom))}return y.none()},Wo=(t,e,n,o=!0)=>{const r=((t,e,n)=>{return(o=t,r=e,s=n,o?(a=r,jb(i=s).orThunk(()=>zb(i)).orThunk(()=>{return Ee(l=a,F.after(d=i)).orThunk(()=>ze(l,F.before(d)));var l,d})):((a,i)=>zb(i).orThunk(()=>jb(i)).orThunk(()=>{return l=a,y.from((d=i).previousSibling?d.previousSibling:d.parentNode).bind(c=>ze(l,F.before(c))).orThunk(()=>Ee(l,F.after(d)));var l,d}))(r,s)).map(et(x_,n));var o,r,s,a,i})(e,t.getBody(),n.dom),s=mr(n,et(S_,t),(a=t.getBody(),l=>l.dom===a));var a;const i=((l,d,c)=>{const u=No(l).filter(Le),f=fs(l).filter(Le);return Ot(l),(m=u,g=f,h=d,p=(v,b,C)=>{const w=v.dom,k=b.dom,x=w.data.length;return Tc(w,k,c),C.container()===k?F(w,x):C},m.isSome()&&g.isSome()&&h.isSome()?y.some(p(m.getOrDie(),g.getOrDie(),h.getOrDie())):y.none()).orThunk(()=>(c&&(u.each(v=>Oc(v.dom,v.dom.length)),f.each(v=>_i(v.dom,0))),d));var m,g,h,p})(n,r,(d=n,gt(t.schema.getTextInlineElements(),Bt(d))));var d;t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):s.bind(__).fold(()=>{o&&Hb(t,e,i)},l=>{o&&Hb(t,e,y.some(l))})},E_=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Ko=(t,e)=>rn(R(e),_k(t)),po=(t,e,n)=>{const o=(r=t,s=e,ut(_t.DOM.getParents(n.container(),"*",s),r));var r,s;return y.from(o[o.length-1])},Ve=(t,e)=>{const n=e.container(),o=e.offset();return t?hr(n)?z(n.nextSibling)?F(n.nextSibling,0):F.after(n):dd(e)?F(n,o+1):e:hr(n)?z(n.previousSibling)?F(n.previousSibling,n.previousSibling.data.length):F.before(n):cd(e)?F(n,o-1):e},$b=et(Ve,!0),Vb=et(Ve,!1),qb=(t,e)=>{const n=o=>o.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(e),t.off("beforeinput input",n)},Wb=t=>qb(t,"Delete"),N_=t=>vx(t)||vs(t),Ei=(t,e)=>{return Fn(t,e)?fr(e,N_,(n=t,o=>lr(Me(o),n,wt))):y.none();var n},Bc=(t,e=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!e})},Kb=t=>{var e;return(8===_f(e=t)||"#comment"===Bt(e)?No(t):Ql(t)).bind(Kb).orThunk(()=>y.some(t))},Gb=(t,e,n,o=!0)=>{var r;e.deleteContents();const s=Kb(n).getOr(n),a=R(null!==(r=t.dom.getParent(s.dom,t.dom.isBlock))&&void 0!==r?r:n.dom);if(a.dom===t.getBody()?Bc(t,o):te(a)&&(Do(a),o&&t.selection.setCursorLocation(a.dom,0)),!wt(n,a)){const l=lr(Me(a),n)?[]:Me(i=a).map(ae).map(d=>ut(d,c=>!wt(i,c))).getOr([]);j(l.concat(ae(n)),d=>{wt(d,a)||Fn(d,a)||!te(d)||Ot(d)})}var i},Dc=t=>ye(t,"td,th"),Pc=(t,e)=>({start:t,end:e}),Xs=xn([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Ni=(t,e)=>To(R(t),"td,th",e),Yb=t=>!wt(t.start,t.end),Xb=(t,e)=>Us(t.start,e).bind(n=>Us(t.end,e).bind(o=>is(wt(n,o),n))),Lc=t=>e=>Xb(e,t).map(n=>({rng:e,table:n,cells:Dc(n)})),Qb=(t,e,n,o)=>{if(n.collapsed||!t.forall(Yb))return y.none();if(e.isSameTable){const r=t.bind(Lc(o));return y.some({start:r,end:r})}{const r=Ni(n.startContainer,o),s=Ni(n.endContainer,o),a=r.bind((l=o,d=>Us(d,l).bind(c=>xo(Dc(c)).map(u=>Pc(d,u))))).bind(Lc(o)),i=s.bind((l=>d=>Us(d,l).bind(c=>_e(Dc(c)).map(u=>Pc(u,d))))(o)).bind(Lc(o));return y.some({start:a,end:i})}var l},Jb=(t,e)=>ts(t,n=>wt(n,e)),Mc=t=>ve(Jb(t.cells,t.rng.start),Jb(t.cells,t.rng.end),(e,n)=>t.cells.slice(e,n+1)),Zb=(t,e)=>{const{startTable:n,endTable:o}=e,r=t.cloneRange();return n.each(s=>r.setStartAfter(s.dom)),o.each(s=>r.setEndBefore(s.dom)),r},t0=t=>j(t,e=>{se(e,"contenteditable"),Do(e)}),Ic=(t,e,n,o)=>{const r=n.cloneRange();o?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(e.dom.lastChild)):(r.setStartBefore(e.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),Fc(t,r,e,!1).each(s=>s())},e0=t=>{const e=Nr(t),n=R(t.selection.getNode());Ua(n.dom)&&te(n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),e.length>1&&zt(e,o=>wt(o,n))&&Qt(n,"data-mce-selected","1")},n0=(t,e,n)=>y.some(()=>{const o=t.selection.getRng(),r=n.bind(({rng:s,isStartInTable:a})=>{const i=y.from((d=t).dom.getParent(a?s.endContainer:s.startContainer,d.dom.isBlock)).map(R);var d;s.deleteContents(),((d,c,u)=>{u.each(f=>{c?Ot(f):(Do(f),d.selection.setCursorLocation(f.dom,0))})})(t,a,i.filter(te));const l=a?e[0]:e[e.length-1];return Ic(t,l,o,a),te(l)?y.none():y.some(a?e.slice(1):e.slice(0,-1))}).getOr(e);t0(r),e0(t)}),A_=(t,e,n,o)=>y.some(()=>{const r=t.selection.getRng(),s=e[0],a=n[n.length-1];Ic(t,s,r,!0),Ic(t,a,r,!1);const i=te(s)?e:e.slice(1),l=te(a)?n:n.slice(0,-1);t0(i.concat(l)),o.deleteContents(),e0(t)}),Fc=(t,e,n,o=!0)=>y.some(()=>{Gb(t,e,n,o)}),O_=(t,e)=>y.some(()=>Wo(t,!1,e)),o0=(t,e)=>Vt(Vn(e,t),za),Uc=(t,e)=>Vt(Vn(e,t),Gl("caption")),Ri=(t,e)=>y.some(()=>{Do(e),t.selection.setCursorLocation(e.dom,0)}),r0=(t,e)=>t?kb(e):Sb(e),zc=(t,e)=>{const n=R(t.selection.getStart(!0)),o=Nr(t);return t.selection.isCollapsed()&&0===o.length?((t,e,n)=>{const o=R(t.getBody());return Uc(o,n).fold(()=>((r,s,a,i)=>{const l=F.fromRangeStart(r.selection.getRng());return o0(a,i).bind(d=>{return te(d)?Ri(r,d):(u=a,m=d,g=l,li(s,r.getBody(),g).bind(h=>o0(u,R(h.getNode())).bind(p=>wt(p,m)?y.none():y.some(pt))));var u,m,g})})(t,e,o,n).orThunk(()=>is(((r,s)=>{const a=F.fromRangeStart(r.selection.getRng());return r0(s,a)||Ue(s,r.getBody(),a).exists(i=>r0(s,i))})(t,e),pt)),r=>((s,a,i,l)=>{const d=F.fromRangeStart(s.selection.getRng());return te(l)?Ri(s,l):(u=i,m=l,g=d,li(f=a,(c=s).getBody(),g).fold(()=>y.some(pt),h=>{return v=f,b=g,C=h,we((p=m).dom).bind(w=>En(p.dom).map(k=>v?b.isEqual(w)&&C.isEqual(k):b.isEqual(k)&&C.isEqual(w))).getOr(!0)?((p,v)=>Ri(p,v))(c,m):((p,v,b)=>Uc(p,R(b.getNode())).fold(()=>y.some(pt),C=>is(!wt(C,v),pt)))(u,m,h);var p,v,b,C}));var c,u,f,m,g})(t,e,o,r))})(t,e,n):((r,s,a)=>{const i=R(r.getBody()),l=r.selection.getRng();return 0!==a.length?n0(r,a,y.none()):(d=r,u=l,Uc(c=i,s).fold(()=>{return m=d,((t,e)=>{const n=(s=t,a=>wt(s,a)),o=((s,a)=>{const i=Ni(s.startContainer,a),l=Ni(s.endContainer,a);return ve(i,l,Pc)})(e,n),r=((s,a)=>{const i=m=>Us(R(m),a),l=i(s.startContainer),d=i(s.endContainer),c=l.isSome(),u=d.isSome(),f=ve(l,d,wt).getOr(!1);return{startTable:l,endTable:d,isStartInTable:c,isEndInTable:u,isSameTable:f,isMultiTable:!f&&c&&u}})(e,n);var s;return((s,a,i)=>s.exists(l=>{return c=i,!Yb(d=l)&&Xb(d,c).exists(u=>{const f=u.dom.rows;return 1===f.length&&1===f[0].cells.length})&&Xd(l.start,a);var d,c}))(o,e,n)?o.map(s=>Xs.singleCellTable(e,s.start)):r.isMultiTable?((s,a,i,l)=>Qb(s,a,i,l).bind(({start:d,end:c})=>{const u=d.bind(Mc).getOr([]),f=c.bind(Mc).getOr([]);if(u.length>0&&f.length>0){const m=Zb(i,a);return y.some(Xs.multiTable(u,f,m))}return y.none()}))(o,r,e,n):((s,a,i,l)=>Qb(s,a,i,l).bind(({start:d,end:c})=>d.or(c)).bind(d=>{const{isSameTable:c}=a,u=Mc(d).getOr([]);if(c&&d.cells.length===u.length)return y.some(Xs.fullTable(d.table));if(u.length>0){if(c)return y.some(Xs.partialTable(u,y.none()));{const f=Zb(i,a);return y.some(Xs.partialTable(u,y.some(kt(it({},a),{rng:f}))))}}return y.none()}))(o,r,e,n)})(c,u).bind(p=>p.fold(et(Fc,m),et(O_,m),et(n0,m),et(A_,m)));var m},m=>Ri(d,m)));var d,c,u})(t,n,o)},Go=(t,e)=>{let n=e;for(;n&&n!==t;){if(Cn(n)||At(n))return n;n=n.parentNode}return null},B_=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],D_=H.each,jc=t=>{const e=t.dom,n=new Set(t.serializer.getTempAttrs()),o=r=>zt(B_,s=>ne(r,s))||n.has(r);return{compare:(r,s)=>{if(r.nodeName!==s.nodeName||r.nodeType!==s.nodeType)return!1;const a=l=>{const d={};return D_(e.getAttribs(l),c=>{const u=c.nodeName.toLowerCase();"style"===u||o(u)||(d[u]=e.getAttrib(l,u))}),d},i=(l,d)=>{for(const c in l)if(gt(l,c)){const u=d[c];if(Se(u)||l[c]!==u)return!1;delete d[c]}for(const c in d)if(gt(d,c))return!1;return!0};return!(J(r)&&J(s)&&(!i(a(r),a(s))||!i(e.parseStyle(e.getAttrib(r,"style")),e.parseStyle(e.getAttrib(s,"style"))))||je(r)||je(s))},isAttributeInternal:o}},s0=(t,e,n,o)=>{const r=n.name;for(let s=0,a=t.length;s<a;s++){const i=t[s];if(i.name===r){const l=o.nodes[r];l?l.nodes.push(n):o.nodes[r]={filter:i,nodes:[n]}}}if(n.attributes)for(let s=0,a=e.length;s<a;s++){const i=e[s],l=i.name;if(l in n.attributes.map){const d=o.attributes[l];d?d.nodes.push(n):o.attributes[l]={filter:i,nodes:[n]}}}},a0=(t,e)=>{const n=(o,r)=>{Nt(o,s=>{const a=be(s.nodes);j(s.filter.callbacks,i=>{for(let l=a.length-1;l>=0;l--){const d=a[l];(r?void 0!==d.attr(s.filter.name):d.name===s.filter.name)&&!Ft(d.parent)||a.splice(l,1)}a.length>0&&i(a,s.filter.name,e)})})};n(t.nodes,!1),n(t.attributes,!0)},i0=(t,e,n,o={})=>{const r=((s,a,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&((d,c)=>{let u=d;for(;u=u.walk();)s0(s,a,u,l)})(i),l})(t,e,n);a0(r,o)},Hc=(t,e,n,o)=>{if(e.insert&&n[o.name]){const r=new xe("br",1);r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new xe("#text",3)).value=Zt},l0=(t,e)=>{const n=null==t?void 0:t.firstChild;return Q(n)&&n===t.lastChild&&n.name===e},Qs=(t,e,n,o)=>o.isEmpty(e,n,r=>((s,a)=>{const i=s.getElementRule(a.name);return!0===(null==i?void 0:i.paddEmpty)})(t,r)),$c=(t,e,n=t.parent)=>{if(e.getSpecialElements()[t.name])t.empty().remove();else{const o=t.children();for(const r of o)n&&!e.isValidChild(n.name,r.name)&&$c(r,e,n);t.unwrap()}},Vc=(t,e,n=pt)=>{const o=e.getTextBlockElements(),r=e.getNonEmptyElements(),s=e.getWhitespaceElements(),a=H.makeMap("tr,td,th,tbody,thead,tfoot,table"),i=new Set;for(let l=0;l<t.length;l++){const d=t[l];let c,u,f;if(!d.parent||i.has(d))continue;if(o[d.name]&&"li"===d.parent.name){let g=d.next;for(;g&&o[g.name];)g.name="li",i.add(g),d.parent.insert(g,d.parent),g=g.next;d.unwrap();continue}const m=[d];for(c=d.parent;c&&!e.isValidChild(c.name,d.name)&&!a[c.name];c=c.parent)m.push(c);if(c&&m.length>1)if(e.isValidChild(c.name,d.name)){m.reverse(),u=m[0].clone(),n(u);let g=u;for(let h=0;h<m.length-1;h++){e.isValidChild(g.name,m[h].name)?(f=m[h].clone(),n(f),g.append(f)):f=g;for(let p=m[h].firstChild;p&&p!==m[h+1];){const v=p.next;f.append(p),p=v}g=f}Qs(e,r,s,u)?c.insert(d,m[0],!0):(c.insert(u,m[0],!0),c.insert(d,u)),c=m[0],(Qs(e,r,s,c)||l0(c,"br"))&&c.empty().remove()}else $c(d,e);else if(d.parent){if("li"===d.name){let g=d.prev;if(g&&("ul"===g.name||"ol"===g.name)){g.append(d);continue}if(g=d.next,g&&("ul"===g.name||"ol"===g.name)&&g.firstChild){g.insert(d,g.firstChild,!0);continue}const h=new xe("ul",1);n(h),d.wrap(h);continue}if(e.isValidChild(d.parent.name,"div")&&e.isValidChild("div",d.name)){const g=new xe("div",1);n(g),d.wrap(g)}else $c(d,e)}}},qc=t=>t.collapsed?t:(e=>{const n=F.fromRangeStart(e),o=F.fromRangeEnd(e),r=e.commonAncestorContainer;return Ue(!1,r,o).map(s=>!kn(n,o,r)&&kn(n,s,r)?((a,i,l,d)=>{const c=document.createRange();return c.setStart(a,i),c.setEnd(l,d),c})(n.container(),n.offset(),s.container(),s.offset()):e).getOr(e)})(t),Wc=(t,e)=>{const n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},d0=(t,e)=>{const n=F.after(t),o=_n(e).prev(n);return o?o.toRange():null},I_=["pre"],Kc=Ua,F_=(t,e,n)=>{var o,r,s;const a=t.selection,i=t.dom,l=t.parser,d=n.merge,c=uo({validate:!0},t.schema),u='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,u);let f=a.getRng();const m=f.startContainer,g=t.getBody();var w,k;m===g&&a.isCollapsed()&&i.isBlock(g.firstChild)&&(w=t,Q(k=g.firstChild)&&!w.schema.getVoidElements()[k.nodeName])&&i.isEmpty(g.firstChild)&&(f=i.createRng(),f.setStart(g.firstChild,0),f.setEnd(g.firstChild,0),a.setRng(f)),a.isCollapsed()||(w=>{const k=w.dom,x=qc(w.selection.getRng());w.selection.setRng(x);const E=k.getParent(x.startContainer,Kc);var S,O,B;S=k,O=x,Q(B=E)&&B===S.getParent(O.endContainer,Kc)&&Xd(R(B),O)?Fc(w,x,R(E)):w.getDoc().execCommand("Delete",!1)})(t);const h=a.getNode(),p={context:h.nodeName.toLowerCase(),data:n.data,insert:!0},v=l.parse(e,p);if(!0===n.paste&&((t,e)=>{let n=e.firstChild,o=e.lastChild;return n&&"meta"===n.name&&(n=n.next),o&&"mce_marker"===o.attr("id")&&(o=o.prev),((r,s)=>{const a=r.getNonEmptyElements();return Q(s)&&(s.isEmpty(a)||(l=s,r.getBlockElements()[l.name]&&Q((d=l).firstChild)&&d.firstChild===d.lastChild&&(d=>"br"===d.name||d.value===Zt)(l.firstChild)));var l,d})(t,o)&&(o=null==o?void 0:o.prev),!(!n||n!==o||"ul"!==n.name&&"ol"!==n.name)})(t.schema,v)&&((w,k)=>!!Wc(w,k))(i,h))return f=((t,e,n,o)=>{const r=((u,f,m)=>{const g=f.serialize(m);return(h=>{var p,v;const b=h.firstChild,C=h.lastChild;return b&&"META"===b.nodeName&&(null===(p=b.parentNode)||void 0===p||p.removeChild(b)),C&&"mce_marker"===C.id&&(null===(v=C.parentNode)||void 0===v||v.removeChild(C)),h})(u.createFragment(g))})(e,t,o),s=Wc(e,n.startContainer),a=(t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||Q(null==(e=n)?void 0:e.firstChild)&&e.firstChild===e.lastChild&&((o=e.firstChild).data===Zt||It(o)))?t.slice(0,-1):t;var o,e,n})(ut(null!==(l=null==(i=r.firstChild)?void 0:i.childNodes)&&void 0!==l?l:[],u=>"LI"===u.nodeName));var i,l;const d=e.getRoot(),c=u=>{const f=F.fromRangeStart(n),m=_n(e.getRoot()),g=1===u?m.prev(f):m.next(f),h=null==g?void 0:g.getNode();return!h||Wc(e,h)!==s};return s?c(1)?((u,f,m)=>{const g=u.parentNode;return g&&H.each(f,h=>{g.insertBefore(h,u)}),((h,p)=>{const v=F.before(h),b=_n(p).next(v);return b?b.toRange():null})(u,m)})(s,a,d):c(2)?(u=s,m=d,e.insertAfter((f=a).reverse(),u),d0(f[0],m)):((u,f,m,g)=>{const h=((v,b)=>{const C=b.cloneRange(),w=b.cloneRange();return C.setStartBefore(v),w.setEndAfter(v),[C.cloneContents(),w.cloneContents()]})(u,g),p=u.parentNode;return p&&(p.insertBefore(h[0],u),H.each(f,v=>{p.insertBefore(v,u)}),p.insertBefore(h[1],u),p.removeChild(u)),d0(f[f.length-1],m)})(s,a,d,n):null;var u,f,m})(c,i,a.getRng(),v),f&&a.setRng(f),e;!0===n.paste&&((w,k,x,E)=>{var S;const O=k.firstChild,B=k.lastChild,_=O===("bookmark"===B.attr("data-mce-type")?B.prev:B),D=Et(I_,O.name);if(_&&D){const M="false"!==O.attr("contenteditable"),U=(null===(S=w.getParent(x,w.isBlock))||void 0===S?void 0:S.nodeName.toLowerCase())===O.name,K=y.from(Go(E,x)).forall(Cn);return M&&U&&K}return!1})(i,v,h,t.getBody())&&(null===(o=v.firstChild)||void 0===o||o.unwrap()),(w=>{let k=w;for(;k=k.walk();)1===k.type&&k.attr("data-mce-fragment","1")})(v);let b=v.lastChild;if(b&&"mce_marker"===b.attr("id")){const w=b;for(b=b.prev;b;b=b.walk(!0))if(3===b.type||!i.isBlock(b.name)){b.parent&&t.schema.isValidChild(b.parent.name,"span")&&b.parent.insert(w,b,"br"===b.name);break}}if(t._selectionOverrides.showBlockCaretContainer(h),p.invalid){t.selection.setContent(u);let w,k=a.getNode();const x=t.getBody();for(ps(k)?k=w=x:w=k;w&&w!==x;)k=w,w=w.parentNode;e=k===x?x.innerHTML:i.getOuterHTML(k);const E=l.parse(e);for(let _=E;_;_=_.walk())if("mce_marker"===_.attr("id")){_.replace(v);break}const S=v.children(),O=null!==(s=null===(r=v.parent)||void 0===r?void 0:r.name)&&void 0!==s?s:E.name;v.unwrap();const B=ut(S,_=>!t.schema.isValidChild(O,_.name));Vc(B,t.schema),i0(l.getNodeFilters(),l.getAttributeFilters(),E),e=c.serialize(E),k===x?i.setHTML(x,e):i.setOuterHTML(k,e)}else e=c.serialize(v),((w,k,x)=>{var E;if("all"===x.getAttribute("data-mce-bogus"))null===(E=x.parentNode)||void 0===E||E.insertBefore(w.dom.createFragment(k),x);else{const S=x.firstChild,O=x.lastChild;!S||S===O&&"BR"===S.nodeName?w.dom.setHTML(x,k):w.selection.setContent(k,{no_events:!0})}})(t,e,h);var C;return((w,k)=>{const x=w.schema.getTextInlineElements(),E=w.dom;if(k){const S=w.getBody(),O=jc(w);H.each(E.select("*[data-mce-fragment]"),B=>{if(Q(x[B.nodeName.toLowerCase()])&&rr(wc(E,B),M=>!vb.has(M)))for(let _=B.parentElement;Q(_)&&_!==S&&!m_(E,B,_);_=_.parentElement)if(O.compare(_,B)){E.remove(B,!0);break}})}})(t,d),((w,k)=>{var x,E,S;let O;const B=w.dom,_=w.selection;if(!k)return;_.scrollIntoView(k);const D=Go(w.getBody(),k);if(D&&"false"===B.getContentEditable(D))return B.remove(k),void _.select(D);let M=B.createRng();const U=k.previousSibling;if(z(U)){M.setStart(U,null!==(E=null===(x=U.nodeValue)||void 0===x?void 0:x.length)&&void 0!==E?E:0);const Y=k.nextSibling;z(Y)&&(U.appendData(Y.data),null===(S=Y.parentNode)||void 0===S||S.removeChild(Y))}else M.setStartBefore(k),M.setEndBefore(k);const K=B.getParent(k,B.isBlock);B.remove(k),K&&B.isEmpty(K)&&(gs(R(K)),M.setStart(K,0),M.setEnd(K,0),Kc(K)||K.getAttribute("data-mce-fragment")||!(O=(Y=>{let V=F.fromRangeStart(Y);return V=_n(w.getBody()).next(V),null==V?void 0:V.toRange()})(M))?B.add(K,B.create("br",{"data-mce-bogus":"1"})):(M=O,B.remove(K))),_.setRng(M)})(t,i.get("mce_marker")),C=t.getBody(),H.each(C.getElementsByTagName("*"),w=>{w.removeAttribute("data-mce-fragment")}),((w,k)=>{y.from(w.getParent(k,"td,th")).map(R).each(xx)})(i,a.getStart()),e},Ai=t=>t instanceof xe,Gc=(t,e,n)=>{var o;t.dom.setHTML(t.getBody(),e),!0!==n&&qo(o=t)&&we(o.getBody()).each(r=>{const s=r.getNode(),a=zn(s)?we(s).getOr(r):r;o.selection.setRng(a.toRange())})},c0=t=>yt(t)?t:Tt,Yc=(t,e,n)=>{const o=e(t),r=c0(n);return o.orThunk(()=>r(t)?y.none():((s,a,i)=>{let l=s.dom;const d=c0(i);for(;l.parentNode;){l=l.parentNode;const c=R(l),u=a(c);if(u.isSome())return u;if(d(c))break}return y.none()})(t,e,r))},Xc=nc,u0=(t,e,n)=>{const o=t.formatter.get(n);if(o)for(let r=0;r<o.length;r++){const s=o[r];if(He(s)&&!1===s.inherit&&t.dom.is(e,s.selector))return!0}return!1},Qc=(t,e,n,o,r)=>{const s=t.dom.getRoot();if(e===s)return!1;const a=t.dom.getParent(e,i=>!!u0(t,i,n)||i.parentNode===s||!!Rn(t,i,n,o,!0));return!!Rn(t,a,n,o,r)},Oi=(t,e,n)=>!(!Gt(n)||!Xc(e,n.inline))||!(!Nn(n)||!Xc(e,n.block))||!!He(n)&&J(e)&&t.is(e,n.selector),m0=(t,e,n,o,r,s)=>{const a=n[o],i="attributes"===o;if(yt(n.onmatch))return n.onmatch(e,n,o);if(a)if(tf(a)){for(let l=0;l<a.length;l++)if(i?t.getAttrib(e,a[l]):fi(t,e,a[l]))return!0}else for(const l in a)if(gt(a,l)){const d=i?t.getAttrib(e,l):fi(t,e,l),c=co(a[l],s),u=Ft(d)||as(d);if(u&&Ft(c))continue;if(r&&u&&!n.exact||(!r||n.exact)&&!Xc(d,oc(c,l)))return!1}return!0},Rn=(t,e,n,o,r)=>{const s=t.formatter.get(n),a=t.dom;if(s&&J(e))for(let i=0;i<s.length;i++){const l=s[i];if(Oi(t.dom,e,l)&&m0(a,e,l,"attributes",r,o)&&m0(a,e,l,"styles",r,o)){const d=l.classes;if(d)for(let c=0;c<d.length;c++)if(!t.dom.hasClass(e,co(d[c],o)))return;return l}}},Jc=(t,e,n,o,r)=>{if(o)return Qc(t,o,e,n,r);if(o=t.selection.getNode(),Qc(t,o,e,n,r))return!0;const s=t.selection.getStart();return!(s===o||!Qc(t,s,e,n,r))},f0=t=>(e=>{const n=[];let o=e;for(;o;){if(z(o)&&"\ufeff"!==o.data||o.childNodes.length>1)return[];J(o)&&n.push(o),o=o.firstChild}return n})(t).length>0,g0=t=>{if(t){const e=new Ht(t,t);for(let n=e.current();n;n=e.next())if(z(n))return n}return null},Zc=t=>{const e=Jt("span");return Qn(e,{id:Vd,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&qt(e,dr("\ufeff")),e},tu=(t,e,n=!0)=>{const o=t.dom,r=t.selection;if(f0(e))Wo(t,!1,R(e),n);else{const s=r.getRng(),a=o.getParent(e,o.isBlock),i=s.startContainer,l=s.startOffset,d=s.endContainer,c=s.endOffset,u=(f=>{const m=g0(f);return m&&"\ufeff"===m.data.charAt(0)&&m.deleteData(0,1),m})(e);o.remove(e,!0),i===u&&l>0&&s.setStart(u,l-1),d===u&&c>0&&s.setEnd(u,c-1),a&&o.isEmpty(a)&&Do(R(a)),r.setRng(s)}},eu=(t,e,n=!0)=>{const o=t.dom,r=t.selection;if(e)tu(t,e,n);else if(!(e=$o(t.getBody(),r.getStart())))for(;e=o.get(Vd);)tu(t,e,!1)},p0=(t,e)=>(t.appendChild(e),e),h0=(t,e)=>{var n;const o=ka(t,(s,a)=>p0(s,a.cloneNode(!1)),e),r=null!==(n=o.ownerDocument)&&void 0!==n?n:document;return p0(o,r.createTextNode("\ufeff"))},j_=(t,e)=>{const n=t.schema.getTextInlineElements();return gt(n,Bt(e))&&!cn(e.dom)&&!Oo(e.dom)},Js={},b0=sn(["pre"]);Js.pre||(Js.pre=[]),Js.pre.push(t=>{if(!t.selection.getRng().collapsed){const e=t.selection.getSelectedBlocks(),n=ut(ut(e,b0),(o=e,r=>{const s=r.previousSibling;return b0(s)&&Et(o,s)}));j(n,o=>{((r,s)=>{const a=R(s),i=Un(a).dom;Ot(a),Ro(R(r),[Jt("br",i),Jt("br",i),...ae(a)])})(o.previousSibling,o)})}var o});const v0=["fontWeight","fontStyle","color","fontSize","fontFamily"],y0=(t,e)=>{const n=t.get(e);return jt(n)?Vt(n,o=>{return Gt(o)&&"span"===o.inline&&pe((r=o).styles)&&zt(Pe(r.styles),s=>Et(v0,s));var r}):y.none()},C0=(t,e)=>ze(e,F.fromRangeStart(t)).isNone(),w0=(t,e)=>!1===Ee(e,F.fromRangeEnd(t)).exists(n=>!It(n.getNode())||Ee(e,n).isSome()),x0=t=>e=>px(e)&&"false"!==t.getContentEditableParent(e),k0=t=>ut(t.getSelectedBlocks(),x0(t.dom)),nu=H.each,ou=t=>J(t)&&!je(t)&&!cn(t)&&!Oo(t),S0=(t,e)=>{for(let n=t;n;n=n[e]){if(z(n)&&hn(n.data))return t;if(J(n)&&!je(n))return n}return t},_0=(t,e,n)=>{const o=jc(t),r=J(e)&&Vo(e),s=J(n)&&Vo(n);if(r&&s){const a=S0(e,"previousSibling"),i=S0(n,"nextSibling");if(o.compare(a,i)){for(let l=a.nextSibling;l&&l!==i;){const d=l;l=l.nextSibling,a.appendChild(d)}return t.dom.remove(i),H.each(H.grep(i.childNodes),l=>{a.appendChild(l)}),a}}return n},E0=(t,e,n,o)=>{var r;if(o&&!1!==e.merge_siblings){const s=null!==(r=_0(t,mh(o),o))&&void 0!==r?r:o;_0(t,s,mh(s,!0))}},ru=(t,e,n)=>{nu(t.childNodes,o=>{ou(o)&&(e(o)&&n(o),o.hasChildNodes()&&ru(o,e,n))})},N0=(t,e)=>n=>!(!n||!fi(t,n,e)),R0=(t,e,n)=>o=>{var r,s;t.setStyle(o,e,n),""===o.getAttribute("style")&&o.removeAttribute("style"),r=t,"SPAN"===(s=o).nodeName&&0===r.getAttribs(s).length&&r.remove(s,!0)},Lr=xn([{keep:[]},{rename:["name"]},{removed:[]}]),H_=/^(src|href|style)$/,su=H.each,Ti=nc,A0=(t,e,n)=>t.isChildOf(e,n)&&e!==n&&!t.isBlock(n),O0=(t,e,n)=>{let o=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"];if(J(o)){const s=o.childNodes.length-1;!n&&r&&r--,o=o.childNodes[r>s?s:r]}return z(o)&&n&&r>=o.data.length&&(o=new Ht(o,t.getBody()).next()||o),z(o)&&!n&&0===r&&(o=new Ht(o,t.getBody()).prev()||o),o},T0=(t,e)=>{const n=e?"firstChild":"lastChild",o=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&o?"TR"===t.nodeName&&o[n]||o:t},au=(t,e,n,o)=>{var r;const s=t.create(n,o);return null===(r=e.parentNode)||void 0===r||r.insertBefore(s,e),s.appendChild(e),s},B0=(t,e,n,o,r)=>{const s=R(e),a=R(t.create(o,r)),i=n?Mf(s):Lf(s);return Ro(a,i),n?(Ie(s,a),Wf(a,s)):(Zn(s,a),qt(a,s)),a.dom},D0=(t,e,n)=>on(t)?{name:e,value:null}:{name:t,value:co(e,n)},P0=(t,e)=>{""===t.getAttrib(e,"style")&&(e.removeAttribute("style"),e.removeAttribute("data-mce-style"))},L0=(t,e,n,o,r)=>{let s=!1;su(n.styles,(a,i)=>{const{name:l,value:d}=D0(i,a,o),c=oc(d,l);(n.remove_similar||yo(d)||!J(r)||Ti(fi(t,r,l),c))&&t.setStyle(e,l,""),s=!0}),s&&P0(t,e)},M0=(t,e,n,o,r)=>{const s=t.dom,a=jc(t);if(!e.ceFalseOverride&&o&&"false"===s.getContentEditableParent(o)||o&&!Oi(s,o,e)&&(!e.links||"A"!==o.nodeName))return Lr.keep();const i=o,l=e.preserve_attributes;if(Gt(e)&&"all"===e.remove&&jt(l)){const d=ut(s.getAttribs(i),c=>Et(l,c.name.toLowerCase()));if(s.removeAllAttribs(i),j(d,c=>s.setAttrib(i,c.name,c.value)),d.length>0)return Lr.rename("span")}if("all"!==e.remove){L0(s,i,e,n,r),su(e.attributes,(c,u)=>{const{name:f,value:m}=D0(u,c,n);if(e.remove_similar||yo(m)||!J(r)||Ti(s.getAttrib(r,f),m)){if("class"===f){const g=s.getAttrib(i,f);if(g){let h="";if(j(g.split(/\s+/),p=>{/mce\-\w+/.test(p)&&(h+=(h?" ":"")+p)}),h)return void s.setAttrib(i,f,h)}}if(H_.test(f)&&i.removeAttribute("data-mce-"+f),"style"===f&&sn(["li"])(i)&&"none"===s.getStyle(i,"list-style-type"))return i.removeAttribute(f),void s.setStyle(i,"list-style-type","none");"class"===f&&i.removeAttribute("className"),i.removeAttribute(f)}}),su(e.classes,c=>{c=co(c,n),J(r)&&!s.hasClass(r,c)||s.removeClass(i,c)});const d=s.getAttribs(i);for(let c=0;c<d.length;c++)if(!a.isAttributeInternal(d[c].nodeName))return Lr.keep()}return"none"!==e.remove?(((d,c,u)=>{const f=c.parentNode;let m;const g=d.dom,h=Te(d);var p;Nn(u)&&f===g.getRoot()&&(u.list_block&&Ti(c,u.list_block)||j(be(c.childNodes),p=>{Rr(d,h,p.nodeName.toLowerCase())?m?m.appendChild(p):(m=au(g,p,h),g.setAttribs(m,Ts(d))):m=null})),He(p=u)&&Gt(p)&&lr(Rt(p,"mixed"),!0)&&!Ti(u.inline,c)||g.remove(c,!0)})(t,i,e),Lr.removed()):Lr.keep()},Zs=(t,e,n,o,r)=>M0(t,e,n,o,r).fold(Tt,s=>(t.dom.rename(o,s),!0),Ut),$_=(t,e,n,o)=>M0(t,e,n,o,o).fold(G(o),r=>(t.dom.createFragment().appendChild(o),t.dom.rename(o,r)),G(null)),I0=(t,e,n,o,r)=>{const s=t.formatter.get(e),a=s[0],i=t.dom,l=t.selection,d=g=>{const h=((p,v,b,C,w)=>{let k;return v.parentNode&&j(gi(p.dom,v.parentNode).reverse(),x=>{if(!k&&J(x)&&"_start"!==x.id&&"_end"!==x.id){const E=Rn(p,x,b,C,w);E&&!1!==E.split&&(k=x)}}),k})(t,g,e,n,r);return((p,v,b,C,w,k,x,E)=>{var S,O;let B,_;const D=p.dom;if(b){const M=b.parentNode;for(let U=C.parentNode;U&&U!==M;U=U.parentNode){let K=D.clone(U,!1);for(let Y=0;Y<v.length&&(K=$_(p,v[Y],E,K),null!==K);Y++);K&&(B&&K.appendChild(B),_||(_=K),B=K)}x.mixed&&D.isBlock(b)||(C=null!==(S=D.split(b,C))&&void 0!==S?S:C),B&&_&&(null===(O=w.parentNode)||void 0===O||O.insertBefore(B,w),_.appendChild(w),Gt(x)&&E0(p,x,0,B))}return C})(t,s,h,g,g,0,a,n)},c=g=>zt(s,h=>Zs(t,h,n,g,g)),u=g=>{const h=be(g.childNodes),p=c(g)||zt(s,b=>Oi(i,g,b)),v=g.parentNode;if(!p&&Q(v)&&sc(a)&&c(v),a.deep&&h.length)for(let b=0;b<h.length;b++)u(h[b]);j(["underline","line-through","overline"],b=>{J(g)&&t.dom.getStyle(g,"text-decoration")===b&&g.parentNode&&gh(i,g.parentNode)===b&&Zs(t,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:b}},void 0,g)})},f=g=>{const h=i.get(g?"_start":"_end");if(h){let p=h[g?"firstChild":"lastChild"];return je(v=p)&&J(v)&&("_start"===v.id||"_end"===v.id)&&(p=p[g?"firstChild":"lastChild"]),z(p)&&0===p.data.length&&(p=g?h.previousSibling||h.nextSibling:h.nextSibling||h.previousSibling),i.remove(h,!0),p}var v;return null},m=g=>{let h,p,v=Or(t,g,s,g.collapsed);if(a.split){if(v=wi(v),h=O0(t,v,!0),p=O0(t,v),h!==p){if(h=T0(h,!0),p=T0(p,!1),A0(i,h,p)){const C=y.from(h.firstChild).getOr(h);return d(B0(i,C,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void f(!0)}if(A0(i,p,h)){const C=y.from(p.lastChild).getOr(p);return d(B0(i,C,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void f(!1)}h=au(i,h,"span",{id:"_start","data-mce-type":"bookmark"}),p=au(i,p,"span",{id:"_end","data-mce-type":"bookmark"});const b=i.createRng();b.setStartAfter(h),b.setEndBefore(p),js(i,b,C=>{j(C,w=>{je(w)||je(w.parentNode)||d(w)})}),d(h),d(p),h=f(!0),p=f()}else h=p=d(h);v.startContainer=h.parentNode?h.parentNode:h,v.startOffset=i.nodeIndex(h),v.endContainer=p.parentNode?p.parentNode:p,v.endOffset=i.nodeIndex(p)+1}js(i,v,b=>{j(b,u)})};if(o){if(zs(o)){const g=i.createRng();g.setStartBefore(o),g.setEndAfter(o),m(g)}else m(o);Oh(t,e,o,n)}else l.isCollapsed()&&Gt(a)&&!Nr(t).length?((t,e,n,o)=>{const r=t.dom,s=t.selection;let a=!1;const i=t.formatter.get(e);if(!i)return;const l=s.getRng(),d=l.startContainer,c=l.startOffset;let u=d;z(d)&&(c!==d.data.length&&(a=!0),u=u.parentNode);const f=[];let m;for(;u;){if(Rn(t,u,e,n,o)){m=u;break}u.nextSibling&&(a=!0),f.push(u),u=u.parentNode}if(m)if(a){const g=s.getBookmark();l.collapse(!0);let h=Or(t,l,i,!0);h=wi(h),t.formatter.remove(e,n,h,o),s.moveToBookmark(g)}else{const g=$o(t.getBody(),m),h=Zc(!1).dom;((b,C,w)=>{var k,x;const E=b.dom,S=E.getParent(w,et(tc,b));S&&E.isEmpty(S)?null===(k=w.parentNode)||void 0===k||k.replaceChild(C,w):((O=>{const B=ye(O,"br"),_=ut((D=>{const M=[];let U=D.dom;for(;U;)M.push(R(U)),U=U.lastChild;return M})(O).slice(-1),Bo);B.length===_.length&&j(_,Ot)})(R(w)),E.isEmpty(w)?null===(x=w.parentNode)||void 0===x||x.replaceChild(C,w):E.insertAfter(C,w))})(t,h,null!=g?g:m);const p=((b,C,w,k,x,E)=>{const S=b.formatter,O=b.dom,B=ut(Pe(S.get()),D=>D!==k&&!re(D,"removeformat")),_=(D=b,M=w,Oe(B,(K,Y)=>{const V=rc(D,Y,St=>{const nt=ct=>yt(ct)||ct.length>1&&"%"===ct.charAt(0);return zt(["styles","attributes"],ct=>Rt(St,ct).exists(mt=>{const N=jt(mt)?mt:jl(mt);return zt(N,nt)}))});return D.formatter.matchNode(M,Y,{},V)?K.concat([Y]):K},[]));var D,M;if(ut(_,D=>!((M,U,K)=>{const Y=["inline","block","selector","attributes","styles","classes"],V=st=>os(st,(ht,St)=>zt(Y,nt=>nt===St));return rc(M,U,st=>{const ht=V(st);return rc(M,K,St=>{const nt=V(St);return((ct,mt,N=Ol)=>$m(N).eq(ct,mt))(ht,nt)})})})(b,D,k)).length>0){const D=w.cloneNode(!1);return O.add(C,D),S.remove(k,x,D,E),O.remove(D),y.some(D)}return y.none()})(t,h,m,e,n,o),v=h0(f.concat(p.toArray()),h);g&&tu(t,g,!1),s.setCursorLocation(v,1),r.isEmpty(m)&&r.remove(m)}})(t,e,n,r):(uh(t,()=>Jd(t,m),g=>Gt(a)&&Jc(t,e,n,g)),t.nodeChanged()),g=t,p=n,"removeformat"===(h=e)?j(k0(g.selection),v=>{j(v0,b=>g.dom.setStyle(v,b,"")),P0(g.dom,v)}):y0(g.formatter,h).each(v=>{j(k0(g.selection),b=>L0(g.dom,b,v,p,null))}),Oh(t,e,o,n);var g,h,p},F0=H.each,Bi=H.each,U0=(t,e,n,o)=>{if(Bi(n.styles,(r,s)=>{t.setStyle(e,s,co(r,o))}),n.styles){const r=t.getAttrib(e,"style");r&&t.setAttrib(e,"data-mce-style",r)}},z0=(t,e,n,o)=>{const r=t.formatter.get(e),s=r[0],a=!o&&t.selection.isCollapsed(),i=t.dom,l=t.selection,d=(g,h=s)=>{yt(h.onformat)&&h.onformat(g,h,n,o),U0(i,g,h,n),Bi(h.attributes,(p,v)=>{i.setAttrib(g,v,co(p,n))}),Bi(h.classes,p=>{const v=co(p,n);i.hasClass(g,v)||i.addClass(g,v)})},c=(g,h)=>{let p=!1;return Bi(g,v=>!(!He(v)||("false"!==i.getContentEditable(h)||v.ceFalseOverride)&&(!Q(v.collapsed)||v.collapsed===a)&&i.is(h,v.selector)&&!cn(h)&&(d(h,v),p=!0,1))),p},f=(g,h,p)=>{const v=[];let b=!0;const C=s.inline||s.block,w=(g=>{if(lt(g)){const h=i.create(g);return d(h),h}return null})(C);js(g,h,k=>{let x;const E=S=>{let O=!1,B=b,_=!1;const D=S.nodeName.toLowerCase(),M=S.parentNode,U=M.nodeName.toLowerCase(),K=g.getContentEditable(S);Q(K)&&(B=b,b="true"===K,O=!0,_=fh(t,S));const Y=b&&!O;if(It(S)&&!((V,st,ht,St)=>{if(Dk(V)&&Gt(st)&&ht.parentNode){const nt=Ng(V.schema),ct=((t,e)=>((n,o)=>{const r=n.dom;return r.parentNode?(s=R(r.parentNode),Vt(s.dom.childNodes,i=>(s=>!wt(n,s)&&o(s))(R(i))).map(R)):y.none();var s})(t,e).isSome())(R(ht),mt=>cn(mt.dom));return ar(nt,St)&&te(R(ht.parentNode),!1)&&!ct}return!1})(t,s,S,U))return x=null,void(Nn(s)&&g.remove(S));if(V=S,Nn(st=s)&&!0===st.wrapper&&Rn(t,V,e,n))x=null;else{if(((V,st,ht)=>{const St=Nn(nt=s)&&!0!==nt.wrapper&&tc(t,V)&&Rr(t,st,C);var nt;return ht&&St})(D,U,Y)){const V=g.rename(S,C);return d(V),v.push(V),void(x=null)}if(He(s)){let V=c(r,S);if(!V&&Q(M)&&sc(s)&&(V=c(r,M)),!Gt(s)||V)return void(x=null)}Q(w)&&((V,st,ht,St)=>{const nt=V.nodeName.toLowerCase(),ct=Rr(t,C,nt)&&Rr(t,st,C),mt=!p&&z(V)&&Ha(V.data),N=cn(V),A=!Gt(s)||!g.isBlock(V);return(ht||St)&&ct&&!mt&&!N&&A})(S,U,Y,_)?(x||(x=g.clone(w,!1),M.insertBefore(x,S),v.push(x)),_&&O&&(b=B),x.appendChild(S)):(x=null,j(be(S.childNodes),E),O&&(b=B),x=null)}var V,st};j(k,E)}),!0===s.links&&j(v,k=>{const x=E=>{"A"===E.nodeName&&d(E,s),j(be(E.childNodes),x)};x(k)}),j(v,k=>{const x=(E=>{let S=0;return j(E.childNodes,O=>{var B;Q(B=O)&&z(B)&&0===B.length||je(O)||S++}),S})(k);var E;!(v.length>1)&&g.isBlock(k)||0!==x?(Gt(s)||Nn(s)&&s.wrapper)&&(s.exact||1!==x||(k=Vt((E=k).childNodes,Zd).filter(O=>"false"!==g.getContentEditable(O)&&Oi(g,O,s)).map(O=>{const B=g.clone(O,!1);return d(B),g.replace(B,E,!0),g.remove(O,!0),B}).getOr(E)),((E,S,O,B)=>{F0(S,_=>{var D,M,U;Gt(_)&&F0(E.dom.select(_.inline,B),D=>{ou(D)&&Zs(E,_,O,D,_.exact?D:null)}),D=E.dom,U=B,(M=_).clear_child_styles&&nu(D.select(M.links?"*:not(a)":"*",U),Y=>{ou(Y)&&Vo(Y)&&nu(M.styles,(V,st)=>{D.setStyle(Y,st,"")})})})})(t,r,n,k),((E,S,O,B,_)=>{const D=_.parentNode;Rn(E,D,O,B)&&Zs(E,S,B,_)||S.merge_with_parents&&D&&E.dom.getParent(D,M=>!!Rn(E,M,O,B)&&(Zs(E,S,B,_),!0))})(t,s,e,n,k),((E,S,O,B)=>{if(S.styles&&S.styles.backgroundColor){const _=N0(E,"fontSize");ru(B,D=>_(D)&&Vo(D),R0(E,"backgroundColor",co(S.styles.backgroundColor,O)))}})(g,s,n,k),((E,S,O,B)=>{const _=D=>{if(J(D)&&J(D.parentNode)&&Vo(D)){const M=gh(E,D.parentNode);E.getStyle(D,"color")&&M?E.setStyle(D,"text-decoration",M):E.getStyle(D,"text-decoration")===M&&E.setStyle(D,"text-decoration",null)}};S.styles&&(S.styles.color||S.styles.textDecoration)&&(H.walk(B,_,"childNodes"),_(B))})(g,s,0,k),((E,S,O,B)=>{if(Gt(S)&&("sub"===S.inline||"sup"===S.inline)){const _=N0(E,"fontSize");ru(B,M=>_(M)&&Vo(M),R0(E,"fontSize",""));const D=ut(E.select("sup"===S.inline?"sub":"sup",B),Vo);E.remove(D,!0)}})(g,s,0,k),E0(t,s,0,k)):g.remove(k,!0)})},m=zs(o)?o:l.getNode();if("false"===i.getContentEditable(m)&&!fh(t,m))return c(r,o=m),void Ah(t,e,o,n);if(s){if(o)if(zs(o)){if(!c(r,o)){const g=i.createRng();g.setStartBefore(o),g.setEndAfter(o),f(i,Or(t,g,r),!0)}}else f(i,o,!0);else a&&Gt(s)&&!Nr(t).length?((g,h,p)=>{let v;const b=g.selection,C=g.formatter.get(h);if(!C)return;const w=b.getRng();let k=w.startOffset;const x=w.startContainer.nodeValue;v=$o(g.getBody(),b.getStart());const E=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(x&&k>0&&k<x.length&&E.test(x.charAt(k))&&E.test(x.charAt(k-1))){const B=b.getBookmark();w.collapse(!0);let _=Or(g,w,C);_=wi(_),g.formatter.apply(h,p,_),b.moveToBookmark(B)}else{let B=v?g0(v):null;v&&"\ufeff"===(null==B?void 0:B.data)||(S=g.getDoc(),O=Zc(!0).dom,v=S.importNode(O,!0),B=v.firstChild,w.insertNode(v),k=1),g.formatter.apply(h,p,v),b.setCursorLocation(B,k)}var S,O})(t,e,n):(l.setRng(qc(l.getRng())),uh(t,()=>{Jd(t,(g,h)=>{const p=h?g:Or(t,g,r);f(i,p,!1)})},Ut),t.nodeChanged()),y0(t.formatter,e).each(g=>{var h;j(ut((p=>{const v=p.getSelectedBlocks(),b=p.getRng();if(p.isCollapsed())return[];if(1===v.length)return C0(b,v[0])&&w0(b,v[0])?v:[];{const C=_e(v).filter(x=>C0(b,x)).toArray(),w=xo(v).filter(x=>w0(b,x)).toArray(),k=v.slice(1,-1);return C.concat(k).concat(w)}})(h=t.selection),x0(h.dom)),h=>U0(i,h,g,n))});h=t,gt(Js,g=e)&&j(Js[g],p=>{p(h)})}var g,h;Ah(t,e,o,n)},j0=t=>gt(t,"vars"),H0=t=>t.selection.getStart(),$0=(t,e,n,o,r)=>Xm(e,s=>{const a=t.formatter.matchNode(s,n,null!=r?r:{},o);return!Se(a)},s=>!!u0(t,s,n)||!o&&Q(t.formatter.matchNode(s,n,r,!0))),V0=(t,e)=>{const n=null!=e?e:H0(t);return ut(gi(t.dom,n),o=>J(o)&&!Oo(o))},q0=(t,e,n)=>{const o=V0(t,e);Nt(n,(r,s)=>{const a=i=>{const l=$0(t,o,s,i.similar,j0(i)?i.vars:void 0),d=l.isSome();if(i.state.get()!==d){i.state.set(d);const c=l.getOr(e);j0(i)?i.callback(d,{node:c,format:s,parents:o}):j(i.callbacks,u=>u(d,{node:c,format:s,parents:o}))}};j([r.withSimilar,r.withoutSimilar],a),j(r.withVars,a)})};function Yo(t){return(Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function iu(t,e){return(iu=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n})(t,e)}function V_(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function lu(t,e,n){return(lu=V_()?Reflect.construct:function(o,r,s){var a=[null];a.push.apply(a,r);var i=new(Function.bind.apply(o,a));return s&&iu(i,s.prototype),i}).apply(null,arguments)}function un(t){return function(e){if(Array.isArray(e))return du(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,n){if(e){if("string"==typeof e)return du(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?du(e,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function du(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var q_=Object.hasOwnProperty,W0=Object.setPrototypeOf,W_=Object.isFrozen,K_=Object.getPrototypeOf,G_=Object.getOwnPropertyDescriptor,Ne=Object.freeze,An=Object.seal,Y_=Object.create,K0="undefined"!=typeof Reflect&&Reflect,Di=K0.apply,cu=K0.construct;Di||(Di=function(t,e,n){return t.apply(e,n)}),Ne||(Ne=function(t){return t}),An||(An=function(t){return t}),cu||(cu=function(t,e){return lu(t,un(e))});var G0,X_=mn(Array.prototype.forEach),Q_=mn(Array.prototype.pop),ta=mn(Array.prototype.push),Pi=mn(String.prototype.toLowerCase),J_=mn(String.prototype.match),ho=mn(String.prototype.replace),Z_=mn(String.prototype.indexOf),tE=mn(String.prototype.trim),Re=mn(RegExp.prototype.test),uu=(G0=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return cu(G0,e)});function mn(t){return function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return Di(t,e,o)}}function Ct(t,e){W0&&W0(t,null);for(var n=e.length;n--;){var o=e[n];if("string"==typeof o){var r=Pi(o);r!==o&&(W_(e)||(e[n]=r),o=r)}t[o]=!0}return t}function Xo(t){var e,n=Y_(null);for(e in t)Di(q_,t,[e])&&(n[e]=t[e]);return n}function Li(t,e){for(;null!==t;){var n=G_(t,e);if(n){if(n.get)return mn(n.get);if("function"==typeof n.value)return mn(n.value)}t=K_(t)}return function(o){return console.warn("fallback value for",o),null}}var Y0=Ne(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),mu=Ne(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),fu=Ne(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),eE=Ne(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),gu=Ne(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),nE=Ne(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),X0=Ne(["#text"]),Q0=Ne(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),pu=Ne(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),J0=Ne(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Mi=Ne(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),oE=An(/\{\{[\w\W]*|[\w\W]*\}\}/gm),rE=An(/<%[\w\W]*|[\w\W]*%>/gm),sE=An(/^data-[\-\w.\u00B7-\uFFFF]/),aE=An(/^aria-[\-\w]+$/),iE=An(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),lE=An(/^(?:\w+script|data):/i),dE=An(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),cE=An(/^html$/i),uE=function(){return"undefined"==typeof window?null:window},mE=function(t,e){if("object"!==Yo(t)||"function"!=typeof t.createPolicy)return null;var n=null,o="data-tt-policy-suffix";e.currentScript&&e.currentScript.hasAttribute(o)&&(n=e.currentScript.getAttribute(o));var r="dompurify"+(n?"#"+n:"");try{return t.createPolicy(r,{createHTML:function(s){return s}})}catch(s){return console.warn("TrustedTypes policy "+r+" could not be created."),null}},fE=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uE(),n=function(P){return t(P)};if(n.version="2.3.8",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;var o=e.document,r=e.document,s=e.DocumentFragment,a=e.HTMLTemplateElement,i=e.Node,l=e.Element,d=e.NodeFilter,c=e.NamedNodeMap,u=void 0===c?e.NamedNodeMap||e.MozNamedAttrMap:c,f=e.HTMLFormElement,m=e.DOMParser,g=e.trustedTypes,h=l.prototype,p=Li(h,"cloneNode"),v=Li(h,"nextSibling"),b=Li(h,"childNodes"),C=Li(h,"parentNode");if("function"==typeof a){var w=r.createElement("template");w.content&&w.content.ownerDocument&&(r=w.content.ownerDocument)}var k=mE(g,o),x=k?k.createHTML(""):"",E=r,S=E.implementation,O=E.createNodeIterator,B=E.createDocumentFragment,_=E.getElementsByTagName,D=o.importNode,M={};try{M=Xo(r).documentMode?r.documentMode:{}}catch(P){}var U={};n.isSupported="function"==typeof C&&S&&void 0!==S.createHTMLDocument&&9!==M;var K,Y,V=oE,st=rE,ht=sE,St=aE,nt=lE,ct=dE,mt=iE,N=null,A=Ct({},[].concat(un(Y0),un(mu),un(fu),un(gu),un(X0))),L=null,T=Ct({},[].concat(un(Q0),un(pu),un(J0),un(Mi))),I=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),q=null,X=null,$=!0,tt=!0,W=!1,at=!1,xt=!1,Lt=!1,ue=!1,ee=!1,Ge=!1,Ye=!1,me=!0,en=!0,Mt=!1,Be={},nn=null,_l=Ct({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Kn=null,ya=Ct({},["audio","video","img","source","image","track"]),De=null,nr=Ct({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Gn="http://www.w3.org/1998/Math/MathML",Xr="http://www.w3.org/2000/svg",vo="http://www.w3.org/1999/xhtml",El=vo,Nw=!1,UA=["application/xhtml+xml","text/html"],zA="text/html",Qr=null,jA=r.createElement("form"),Rw=function(P){return P instanceof RegExp||P instanceof Function},jm=function(P){Qr&&Qr===P||(P&&"object"===Yo(P)||(P={}),P=Xo(P),N="ALLOWED_TAGS"in P?Ct({},P.ALLOWED_TAGS):A,L="ALLOWED_ATTR"in P?Ct({},P.ALLOWED_ATTR):T,De="ADD_URI_SAFE_ATTR"in P?Ct(Xo(nr),P.ADD_URI_SAFE_ATTR):nr,Kn="ADD_DATA_URI_TAGS"in P?Ct(Xo(ya),P.ADD_DATA_URI_TAGS):ya,nn="FORBID_CONTENTS"in P?Ct({},P.FORBID_CONTENTS):_l,q="FORBID_TAGS"in P?Ct({},P.FORBID_TAGS):{},X="FORBID_ATTR"in P?Ct({},P.FORBID_ATTR):{},Be="USE_PROFILES"in P&&P.USE_PROFILES,$=!1!==P.ALLOW_ARIA_ATTR,tt=!1!==P.ALLOW_DATA_ATTR,W=P.ALLOW_UNKNOWN_PROTOCOLS||!1,at=P.SAFE_FOR_TEMPLATES||!1,xt=P.WHOLE_DOCUMENT||!1,ee=P.RETURN_DOM||!1,Ge=P.RETURN_DOM_FRAGMENT||!1,Ye=P.RETURN_TRUSTED_TYPE||!1,ue=P.FORCE_BODY||!1,me=!1!==P.SANITIZE_DOM,en=!1!==P.KEEP_CONTENT,Mt=P.IN_PLACE||!1,mt=P.ALLOWED_URI_REGEXP||mt,El=P.NAMESPACE||vo,P.CUSTOM_ELEMENT_HANDLING&&Rw(P.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(I.tagNameCheck=P.CUSTOM_ELEMENT_HANDLING.tagNameCheck),P.CUSTOM_ELEMENT_HANDLING&&Rw(P.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(I.attributeNameCheck=P.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),P.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof P.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(I.allowCustomizedBuiltInElements=P.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),K=K=-1===UA.indexOf(P.PARSER_MEDIA_TYPE)?zA:P.PARSER_MEDIA_TYPE,Y="application/xhtml+xml"===K?function(dt){return dt}:Pi,at&&(tt=!1),Ge&&(ee=!0),Be&&(N=Ct({},un(X0)),L=[],!0===Be.html&&(Ct(N,Y0),Ct(L,Q0)),!0===Be.svg&&(Ct(N,mu),Ct(L,pu),Ct(L,Mi)),!0===Be.svgFilters&&(Ct(N,fu),Ct(L,pu),Ct(L,Mi)),!0===Be.mathMl&&(Ct(N,gu),Ct(L,J0),Ct(L,Mi))),P.ADD_TAGS&&(N===A&&(N=Xo(N)),Ct(N,P.ADD_TAGS)),P.ADD_ATTR&&(L===T&&(L=Xo(L)),Ct(L,P.ADD_ATTR)),P.ADD_URI_SAFE_ATTR&&Ct(De,P.ADD_URI_SAFE_ATTR),P.FORBID_CONTENTS&&(nn===_l&&(nn=Xo(nn)),Ct(nn,P.FORBID_CONTENTS)),en&&(N["#text"]=!0),xt&&Ct(N,["html","head","body"]),N.table&&(Ct(N,["tbody"]),delete q.tbody),Ne&&Ne(P),Qr=P)},Aw=Ct({},["mi","mo","mn","ms","mtext"]),Ow=Ct({},["foreignobject","desc","title","annotation-xml"]),HA=Ct({},["title","style","font","a","script"]),Nl=Ct({},mu);Ct(Nl,fu),Ct(Nl,eE);var Hm=Ct({},gu);Ct(Hm,nE);var $A=function(P){var dt=C(P);dt&&dt.tagName||(dt={namespaceURI:vo,tagName:"template"});var rt=Pi(P.tagName),Dt=Pi(dt.tagName);return P.namespaceURI===Xr?dt.namespaceURI===vo?"svg"===rt:dt.namespaceURI===Gn?"svg"===rt&&("annotation-xml"===Dt||Aw[Dt]):Boolean(Nl[rt]):P.namespaceURI===Gn?dt.namespaceURI===vo?"math"===rt:dt.namespaceURI===Xr?"math"===rt&&Ow[Dt]:Boolean(Hm[rt]):P.namespaceURI===vo&&!(dt.namespaceURI===Xr&&!Ow[Dt])&&!(dt.namespaceURI===Gn&&!Aw[Dt])&&!Hm[rt]&&(HA[rt]||!Nl[rt])},Yn=function(P){ta(n.removed,{element:P});try{P.parentNode.removeChild(P)}catch(dt){try{P.outerHTML=x}catch(rt){P.remove()}}},Rl=function(P,dt){try{ta(n.removed,{attribute:dt.getAttributeNode(P),from:dt})}catch(rt){ta(n.removed,{attribute:null,from:dt})}if(dt.removeAttribute(P),"is"===P&&!L[P])if(ee||Ge)try{Yn(dt)}catch(rt){}else try{dt.setAttribute(P,"")}catch(rt){}},Tw=function(P){var dt,rt;if(ue)P="<remove></remove>"+P;else{var Dt=J_(P,/^[\r\n\t ]+/);rt=Dt&&Dt[0]}"application/xhtml+xml"===K&&(P='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+P+"</body></html>");var Yt=k?k.createHTML(P):P;if(El===vo)try{dt=(new m).parseFromString(Yt,K)}catch(fe){}if(!dt||!dt.documentElement){dt=S.createDocument(El,"template",null);try{dt.documentElement.innerHTML=Nw?"":Yt}catch(fe){}}var Ae=dt.body||dt.documentElement;return P&&rt&&Ae.insertBefore(r.createTextNode(rt),Ae.childNodes[0]||null),El===vo?_.call(dt,xt?"html":"body")[0]:xt?dt.documentElement:Ae},Bw=function(P){return O.call(P.ownerDocument||P,P,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},VA=function(P){return P instanceof f&&("string"!=typeof P.nodeName||"string"!=typeof P.textContent||"function"!=typeof P.removeChild||!(P.attributes instanceof u)||"function"!=typeof P.removeAttribute||"function"!=typeof P.setAttribute||"string"!=typeof P.namespaceURI||"function"!=typeof P.insertBefore)},Ca=function(P){return"object"===Yo(i)?P instanceof i:P&&"object"===Yo(P)&&"number"==typeof P.nodeType&&"string"==typeof P.nodeName},Xn=function(P,dt,rt){U[P]&&X_(U[P],function(Dt){Dt.call(n,dt,rt,Qr)})},Dw=function(P){var dt;if(Xn("beforeSanitizeElements",P,null),VA(P)||Re(/[\u0080-\uFFFF]/,P.nodeName))return Yn(P),!0;var rt=Y(P.nodeName);if(Xn("uponSanitizeElement",P,{tagName:rt,allowedTags:N}),P.hasChildNodes()&&!Ca(P.firstElementChild)&&(!Ca(P.content)||!Ca(P.content.firstElementChild))&&Re(/<[/\w]/g,P.innerHTML)&&Re(/<[/\w]/g,P.textContent)||"select"===rt&&Re(/<template/i,P.innerHTML))return Yn(P),!0;if(!N[rt]||q[rt]){if(!q[rt]&&Lw(rt)&&(I.tagNameCheck instanceof RegExp&&Re(I.tagNameCheck,rt)||I.tagNameCheck instanceof Function&&I.tagNameCheck(rt)))return!1;if(en&&!nn[rt]){var Dt=C(P)||P.parentNode,Yt=b(P)||P.childNodes;if(Yt&&Dt)for(var Ae=Yt.length-1;Ae>=0;--Ae)Dt.insertBefore(p(Yt[Ae],!0),v(P))}return Yn(P),!0}return P instanceof l&&!$A(P)?(Yn(P),!0):"noscript"!==rt&&"noembed"!==rt||!Re(/<\/no(script|embed)/i,P.innerHTML)?(at&&3===P.nodeType&&(dt=ho(dt=P.textContent,V," "),dt=ho(dt,st," "),P.textContent!==dt&&(ta(n.removed,{element:P.cloneNode()}),P.textContent=dt)),Xn("afterSanitizeElements",P,null),!1):(Yn(P),!0)},Pw=function(P,dt,rt){if(me&&("id"===dt||"name"===dt)&&(rt in r||rt in jA))return!1;if((!tt||X[dt]||!Re(ht,dt))&&(!$||!Re(St,dt)))if(!L[dt]||X[dt]){if(!(Lw(P)&&(I.tagNameCheck instanceof RegExp&&Re(I.tagNameCheck,P)||I.tagNameCheck instanceof Function&&I.tagNameCheck(P))&&(I.attributeNameCheck instanceof RegExp&&Re(I.attributeNameCheck,dt)||I.attributeNameCheck instanceof Function&&I.attributeNameCheck(dt))||"is"===dt&&I.allowCustomizedBuiltInElements&&(I.tagNameCheck instanceof RegExp&&Re(I.tagNameCheck,rt)||I.tagNameCheck instanceof Function&&I.tagNameCheck(rt))))return!1}else if(!De[dt]&&!Re(mt,ho(rt,ct,""))&&("src"!==dt&&"xlink:href"!==dt&&"href"!==dt||"script"===P||0!==Z_(rt,"data:")||!Kn[P])&&(!W||Re(nt,ho(rt,ct,"")))&&rt)return!1;return!0},Lw=function(P){return P.indexOf("-")>0},Mw=function(P){var dt,rt,Dt,Yt;Xn("beforeSanitizeAttributes",P,null);var Ae=P.attributes;if(Ae){var fe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:L};for(Yt=Ae.length;Yt--;){var wa=dt=Ae[Yt],Pn=wa.name,pn=wa.namespaceURI;rt="value"===Pn?dt.value:tE(dt.value),Dt=Y(Pn);var WA=rt;if(fe.attrName=Dt,fe.attrValue=rt,fe.keepAttr=!0,fe.forceKeepAttr=void 0,Xn("uponSanitizeAttribute",P,fe),rt=fe.attrValue,!fe.forceKeepAttr)if(fe.keepAttr)if(Re(/\/>/i,rt))Rl(Pn,P);else{at&&(rt=ho(rt,V," "),rt=ho(rt,st," "));var KA=Y(P.nodeName);if(Pw(KA,Dt,rt)){if(rt!==WA)try{pn?P.setAttributeNS(pn,Pn,rt):P.setAttribute(Pn,rt)}catch(QA){Rl(Pn,P)}}else Rl(Pn,P)}else Rl(Pn,P)}Xn("afterSanitizeAttributes",P,null)}},qA=function P(dt){var rt,Dt=Bw(dt);for(Xn("beforeSanitizeShadowDOM",dt,null);rt=Dt.nextNode();)Xn("uponSanitizeShadowNode",rt,null),Dw(rt)||(rt.content instanceof s&&P(rt.content),Mw(rt));Xn("afterSanitizeShadowDOM",dt,null)};return n.sanitize=function(P,dt){var rt,Dt,Yt,Ae,fe;if((Nw=!P)&&(P="\x3c!--\x3e"),"string"!=typeof P&&!Ca(P)){if("function"!=typeof P.toString)throw uu("toString is not a function");if("string"!=typeof(P=P.toString()))throw uu("dirty is not a string, aborting")}if(!n.isSupported){if("object"===Yo(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof P)return e.toStaticHTML(P);if(Ca(P))return e.toStaticHTML(P.outerHTML)}return P}if(Lt||jm(dt),n.removed=[],"string"==typeof P&&(Mt=!1),Mt){if(P.nodeName){var wa=Y(P.nodeName);if(!N[wa]||q[wa])throw uu("root node is forbidden and cannot be sanitized in-place")}}else if(P instanceof i)1===(Dt=(rt=Tw("\x3c!----\x3e")).ownerDocument.importNode(P,!0)).nodeType&&"BODY"===Dt.nodeName||"HTML"===Dt.nodeName?rt=Dt:rt.appendChild(Dt);else{if(!ee&&!at&&!xt&&-1===P.indexOf("<"))return k&&Ye?k.createHTML(P):P;if(!(rt=Tw(P)))return ee?null:Ye?x:""}rt&&ue&&Yn(rt.firstChild);for(var Pn=Bw(Mt?P:rt);Yt=Pn.nextNode();)3===Yt.nodeType&&Yt===Ae||Dw(Yt)||(Yt.content instanceof s&&qA(Yt.content),Mw(Yt),Ae=Yt);if(Ae=null,Mt)return P;if(ee){if(Ge)for(fe=B.call(rt.ownerDocument);rt.firstChild;)fe.appendChild(rt.firstChild);else fe=rt;return L.shadowroot&&(fe=D.call(o,fe,!0)),fe}var pn=xt?rt.outerHTML:rt.innerHTML;return xt&&N["!doctype"]&&rt.ownerDocument&&rt.ownerDocument.doctype&&rt.ownerDocument.doctype.name&&Re(cE,rt.ownerDocument.doctype.name)&&(pn="<!DOCTYPE "+rt.ownerDocument.doctype.name+">\n"+pn),at&&(pn=ho(pn,V," "),pn=ho(pn,st," ")),k&&Ye?k.createHTML(pn):pn},n.setConfig=function(P){jm(P),Lt=!0},n.clearConfig=function(){Qr=null,Lt=!1},n.isValidAttribute=function(P,dt,rt){Qr||jm({});var Dt=Y(P),Yt=Y(dt);return Pw(Dt,Yt,rt)},n.addHook=function(P,dt){"function"==typeof dt&&(U[P]=U[P]||[],ta(U[P],dt))},n.removeHook=function(P){if(U[P])return Q_(U[P])},n.removeHooks=function(P){U[P]&&(U[P]=[])},n.removeAllHooks=function(){U={}},n}();const Z0=H.explode,tv=()=>{const t={};return{addFilter:(e,n)=>{j(Z0(e),o=>{gt(t,o)||(t[o]={name:o,callbacks:[]}),t[o].callbacks.push(n)})},getFilters:()=>jl(t),removeFilter:(e,n)=>{j(Z0(e),o=>{if(gt(t,o))if(Q(n)){const r=t[o],s=ut(r.callbacks,a=>a!==n);s.length>0?r.callbacks=s:delete t[o]}else delete t[o]})}}},hu=t=>{const[e,...n]=t.split(","),o=n.join(","),r=/data:([^/]+\/[^;]+)(;.+)?/.exec(e);if(r){const s=";base64"===r[2],a=s?(i=>{const l=/([a-z0-9+\/=\s]+)/i.exec(i);return l?l[1]:""})(o):decodeURIComponent(o);return y.some({type:r[1],data:a,base64Encoded:s})}return y.none()},ev=(t,e,n=!0)=>{let o=e;if(n)try{o=atob(e)}catch(s){return y.none()}const r=new Uint8Array(o.length);for(let s=0;s<r.length;s++)r[s]=o.charCodeAt(s);return y.some(new Blob([r],{type:t}))},nv=t=>new Promise((e,n)=>{const o=new FileReader;o.onloadend=()=>{e(o.result)},o.onerror=()=>{var r;n(null===(r=o.error)||void 0===r?void 0:r.message)},o.readAsDataURL(t)});let pE=0;const ov=(t,e,n)=>hu(t).bind(({data:o,type:r,base64Encoded:s})=>{if(e&&!s)return y.none();{const a=s?o:btoa(o);return n(a,r)}}),rv=(t,e,n)=>{const o=t.create("blobid"+pE++,e,n);return t.add(o),o},sv=(t,e,n=!1)=>ov(e,n,(o,r)=>y.from(t.getByData(o,r)).orThunk(()=>ev(r,o).map(s=>rv(t,s,o)))),av=H.each,hE=H.trim,bE=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],vE={ftp:21,http:80,https:443,mailto:25},yE=["img","video"],iv=(t,e,n)=>{const o=(r=>{try{return decodeURIComponent(r)}catch(s){return unescape(r)}})(e);return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!t.allow_html_data_urls&&(/^data:image\//i.test(o)?(s=n,(Q(r=t.allow_svg_data_urls)?!r:!Q(s)||!Et(yE,s))&&/^data:image\/svg\+xml/i.test(o)):/^data:/i.test(o)));var r,s};class fn{constructor(e,n={}){this.path="",this.directory="",e=hE(e),this.settings=n;const o=n.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(r.source=e);const s=0===e.indexOf("//");if(0!==e.indexOf("/")||s||(e=(o&&o.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const i=o?o.path:new fn(document.location.href).directory;if(""===(null==o?void 0:o.protocol))e="//mce_host"+r.toAbsPath(i,e);else{const l=/([^#?]*)([#?]?.*)/.exec(e);l&&(e=(o&&o.protocol||"http")+"://mce_host"+r.toAbsPath(i,l[1])+l[2])}}e=e.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a&&av(bE,(i,l)=>{let d=a[l];d&&(d=d.replace(/\(mce_at\)/g,"@@")),r[i]=d}),o&&(r.protocol||(r.protocol=o.protocol),r.userInfo||(r.userInfo=o.userInfo),r.port||"mce_host"!==r.host||(r.port=o.port),r.host&&"mce_host"!==r.host||(r.host=o.host),r.source=""),s&&(r.protocol="")}static parseDataUri(e){let n;const o=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(o[0]);return r&&(n=r[1]),{type:n,data:o[1]}}static isDomSafe(e,n,o={}){if(o.allow_script_urls)return!0;{const r=oo.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!iv(o,r,n)}}static getDocumentBaseUrl(e){var n;let o;return o=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(n=e.href)&&void 0!==n?n:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}setPath(e){const n=/^(.*?)\/?(\w+)?$/.exec(e);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;const n=new fn(e,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const o=this.getURI(),r=n.getURI();if(o===r||"/"===o.charAt(o.length-1)&&o.substr(0,o.length-1)===r)return o;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(e,n){const o=new fn(e,{base_uri:this});return o.getURI(n&&this.isSameOrigin(o))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const n=this.protocol?vE[this.protocol]:null;if(n&&(this.port||n)==(e.port||n))return!0}return!1}toRelPath(e,n){let o,r,s=0,a="";const i=e.substring(0,e.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length)for(o=0,r=i.length;o<r;o++)if(o>=l.length||i[o]!==l[o]){s=o+1;break}if(i.length<l.length)for(o=0,r=l.length;o<r;o++)if(o>=i.length||i[o]!==l[o]){s=o+1;break}if(1===s)return n;for(o=0,r=i.length-(s-1);o<r;o++)a+="../";for(o=s-1,r=l.length;o<r;o++)a+=o!==s-1?"/"+l[o]:l[o];return a}toAbsPath(e,n){let o=0;const r=/\/$/.test(n)?"/":"",s=e.split("/"),a=n.split("/"),i=[];av(s,u=>{u&&i.push(u)});const l=[];for(let u=a.length-1;u>=0;u--)0!==a[u].length&&"."!==a[u]&&(".."!==a[u]?o>0?o--:l.push(a[u]):o++);const d=i.length-o;let c;return c=d<=0?es(l).join("/"):i.slice(0,d).join("/")+"/"+es(l).join("/"),0!==c.indexOf("/")&&(c="/"+c),r&&c.lastIndexOf("/")!==c.length-1&&(c+=r),c}getURI(e=!1){let n;return this.source&&!e||(n="",e||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const lv=H.makeMap,dv=H.extend,CE={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]},wE=H.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),bu="data-mce-type",cv=(t,e,n)=>{const o=t.name,r=o in n&&"title"!==o&&"textarea"!==o,s=e.childNodes;for(let a=0,i=s.length;a<i;a++){const l=s[a],d=new xe(l.nodeName.toLowerCase(),l.nodeType);if(J(l)){const c=l.attributes;for(let u=0,f=c.length;u<f;u++){const m=c[u];d.attr(m.name,m.value)}}else z(l)?(d.value=l.data,r&&(d.raw=!0)):(eo(l)||fx(l)||gx(l))&&(d.value=l.data);cv(d,l,n),t.append(d)}},Mr=(t={},e=ro())=>{const n=tv(),o=tv(),r=it({validate:!0,root_name:"body"},t),s=new DOMParser,a=((t,e)=>{const n=fE(),o=e.getSpecialElements(),r=t.validate;let s=0;return n.addHook("uponSanitizeElement",(a,i)=>{var l,d,c;8===a.nodeType&&!t.allow_conditional_comments&&/^\[if/i.test(null!==(l=a.nodeValue)&&void 0!==l?l:"")&&(a.nodeValue=" "+a.nodeValue);const u=i.tagName;if(1!==a.nodeType||"body"===u)return;const f=R(a),m=u.toLowerCase(),g=Aa(f,bu),h=Je(f,"data-mce-bogus");if(!g&&lt(h))return void("all"===h?Ot(f):to(f));const p=e.getElementRule(m);if(!r||p){if(i.allowedTags[u]=!0,r&&p&&!g){if(j(null!==(d=p.attributesForced)&&void 0!==d?d:[],v=>{Qt(f,v.name,"{$uid}"===v.value?"mce_"+s++:v.value)}),j(null!==(c=p.attributesDefault)&&void 0!==c?c:[],v=>{Aa(f,v.name)||Qt(f,v.name,"{$uid}"===v.value?"mce_"+s++:v.value)}),p.attributesRequired&&!zt(p.attributesRequired,v=>Aa(f,v))||p.removeEmptyAttrs&&(v=>{const b=v.dom.attributes;return null==b||0===b.length})(f))return void to(f);p.outputName&&p.outputName!==m&&((v,b)=>{const C=((k,x)=>{const E=Jt(x),S=Nf(k);return Qn(E,S),E})(v,b);Zn(v,C);const w=ae(v);Ro(C,w),Ot(v)})(f,p.outputName)}}else gt(o,m)?Ot(f):to(f)}),n.addHook("uponSanitizeAttribute",(a,i)=>{const l=a.tagName.toLowerCase(),{attrName:d,attrValue:c}=i;i.keepAttr=!r||e.isValid(l,d)||ne(d,"data-")||ne(d,"aria-"),d in wE&&iv(t,c,l)&&(i.keepAttr=!1),i.keepAttr?(i.allowedAttributes[d]=!0,d in e.getBoolAttrs()&&(i.attrValue=d),t.allow_svg_data_urls&&ne(c,"data:image/svg+xml")&&(i.forceKeepAttr=!0)):!a.hasAttribute(bu)||"id"!==d&&"class"!==d&&"style"!==d||(i.forceKeepAttr=!0)}),n})(r,e),l=n.getFilters,u=o.getFilters,m={schema:e,addAttributeFilter:o.addFilter,getAttributeFilters:u,removeAttributeFilter:o.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:l,removeNodeFilter:n.removeFilter,parse:(g,h={})=>{var p;const v=r.validate,b=null!==(p=h.context)&&void 0!==p?p:r.root_name,C=((D,M,U="html")=>{const K="xhtml"===U?"application/xhtml+xml":"text/html",Y=gt(e.getSpecialElements(),M.toLowerCase()),V=Y?`<${M}>${D}</${M}>`:D,ht=s.parseFromString("xhtml"===U?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${V}</body></html>`:`<body>${V}</body>`,K).body;return a.sanitize(ht,((St,nt)=>{const ct=it({},CE);return ct.PARSER_MEDIA_TYPE=nt,St.allow_script_urls?ct.ALLOWED_URI_REGEXP=/.*/:St.allow_html_data_urls&&(ct.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),ct})(r,K)),a.removed=[],Y?ht.firstChild:ht})(g,b,h.format),w=new xe(b,11);cv(w,C,e.getSpecialElements());const[k,x]=((D,M,U,K)=>{const Y=U.validate,V=M.getNonEmptyElements(),st=M.getWhitespaceElements(),ht=dv(lv("script,style,head,html,body,title,meta,param"),M.getBlockElements()),St=Ng(M),nt=/[ \t\r\n]+/g,ct=/^[ \t\r\n]+/,mt=/[ \t\r\n]+$/,N=L=>{let T=L.parent;for(;Q(T);){if(T.name in st)return!0;T=T.parent}return!1},A=(L,T)=>!Q(T?L.prev:L.next)&&!Ft(L.parent)&&L.parent.name in ht&&(L.parent!==D||!0===K.isRootContent);return[L=>{var T,q,X;if(3===L.type&&!N(L)){let I=null!==(T=L.value)&&void 0!==T?T:"";I=I.replace(nt," "),X=ht,(Q(q=L.prev)&&(q.name in X||"br"===q.name)||A(L,!0))&&(I=I.replace(ct,"")),0===I.length?L.remove():L.value=I}},L=>{var T,X,$;if(1===L.type){const I=M.getElementRule(L.name);if(Y&&I){const q=Qs(M,V,st,L);I.paddInEmptyBlock&&q&&(X=>{let $=X;for(;Q($);){if($.name in St)return Qs(M,V,st,$);$=$.parent}return!1})(L)?Hc(0,K,ht,L):I.removeEmpty&&q?ht[L.name]?L.remove():L.unwrap():I.paddEmpty&&(q||l0(X=L,"#text")&&(null===($=null==X?void 0:X.firstChild)||void 0===$?void 0:$.value)===Zt)&&Hc(0,K,ht,L)}}else if(3===L.type&&!N(L)){let I=null!==(T=L.value)&&void 0!==T?T:"";(L.next&&ht[L.next.name]||A(L,!1))&&(I=I.replace(mt,"")),0===I.length?L.remove():L.value=I}}]})(w,e,r,h),E=[],O={nodes:{},attributes:{}},B=D=>s0(l(),u(),D,O);if(((D,M,U)=>{const K=[];for(let Y=D,V=Y;Y;V=Y,Y=Y.walk()){const st=Y;j(M,ht=>ht(st)),Ft(st.parent)&&st!==D?Y=V:K.push(st)}for(let Y=K.length-1;Y>=0;Y--){const V=K[Y];j(U,st=>st(V))}})(w,[k,B],[x,v?D=>((M,U)=>{const K=M.parent;K&&e.children[M.name]&&!e.isValidChild(K.name,M.name)&&U.push(M)})(D,E):pt]),E.reverse(),v&&E.length>0)if(h.context){const{pass:D,fail:M}=Zr(E,U=>U.parent===w);Vc(M,e,B),h.invalid=D.length>0}else Vc(E,e,B);const _=((D,M)=>{var U;const K=null!==(U=M.forced_root_block)&&void 0!==U?U:D.forced_root_block;return!1===K?"":!0===K?"p":K})(r,h);return _&&("body"===w.name||h.isRootContent)&&((D,M)=>{const U=dv(lv("script,style,head,html,body,title,meta,param"),e.getBlockElements()),K=/^[ \t\r\n]+/,Y=/[ \t\r\n]+$/;let V=D.firstChild,st=null;const ht=St=>{var nt,ct;St&&(V=St.firstChild,V&&3===V.type&&(V.value=null===(nt=V.value)||void 0===nt?void 0:nt.replace(K,"")),V=St.lastChild,V&&3===V.type&&(V.value=null===(ct=V.value)||void 0===ct?void 0:ct.replace(Y,"")))};if(e.isValidChild(D.name,M.toLowerCase())){for(;V;){const St=V.next;3===V.type||1===V.type&&"p"!==V.name&&!U[V.name]&&!V.attr(bu)?(st||(st=new xe(M,1),st.attr(r.forced_root_block_attrs),D.insert(st,V)),st.append(V)):(ht(st),st=null),V=St}ht(st)}})(w,_),h.invalid||a0(O,h),w}};return((g,h)=>{const p=g.schema;h.remove_trailing_brs&&g.addNodeFilter("br",(b,C,w)=>{const k=H.extend({},p.getBlockElements()),x=p.getNonEmptyElements(),E=p.getWhitespaceElements();k.body=1;for(let S=0,O=b.length;S<O;S++){let B=b[S],_=B.parent;if(_&&k[_.name]&&B===_.lastChild){let D=B.prev;for(;D;){const M=D.name;if("span"!==M||"bookmark"!==D.attr("data-mce-type")){"br"===M&&(B=null);break}D=D.prev}if(B&&(B.remove(),Qs(p,x,E,_))){const M=p.getElementRule(_.name);M&&(M.removeEmpty?_.remove():M.paddEmpty&&Hc(0,w,k,_))}}else{let D=B;for(;_&&_.firstChild===D&&_.lastChild===D&&(D=_,!k[_.name]);)_=_.parent;if(D===_){const M=new xe("#text",3);M.value=Zt,B.replace(M)}}}}),g.addAttributeFilter("href",b=>{let C=b.length;const w=k=>{const x=k?H.trim(k):"";return/\b(noopener)\b/g.test(x)?x:x.split(" ").filter(S=>S.length>0).concat(["noopener"]).sort().join(" ")};if(!h.allow_unsafe_link_target)for(;C--;){const k=b[C];"a"===k.name&&"_blank"===k.attr("target")&&k.attr("rel",w(k.attr("rel")))}}),h.allow_html_in_named_anchor||g.addAttributeFilter("id,name",b=>{let C,w,k,x,E=b.length;for(;E--;)if(x=b[E],"a"===x.name&&x.firstChild&&!x.attr("href"))for(k=x.parent,C=x.lastChild;C&&k;)w=C.prev,k.insert(C,x),C=w}),h.fix_list_elements&&g.addNodeFilter("ul,ol",b=>{let C,w,k=b.length;for(;k--;)if(C=b[k],w=C.parent,w&&("ul"===w.name||"ol"===w.name))if(C.prev&&"li"===C.prev.name)C.prev.append(C);else{const x=new xe("li",1);x.attr("style","list-style-type: none"),C.wrap(x)}});const v=p.getValidClasses();h.validate&&v&&g.addAttributeFilter("class",b=>{var C;let w=b.length;for(;w--;){const k=b[w],x=null!==(C=k.attr("class"))&&void 0!==C?C:"",E=H.explode(x," ");let S="";for(let O=0;O<E.length;O++){const B=E[O];let _=!1,D=v["*"];D&&D[B]&&(_=!0),D=v[k.name],!_&&D&&D[B]&&(_=!0),_&&(S&&(S+=" "),S+=B)}S.length||(S=null),k.attr("class",S)}}),((b,C)=>{const{blob_cache:w}=C;if(w){const k=x=>{const E=x.attr("src");var S;(S=x).attr("src")===vt.transparentSrc||Q(S.attr("data-mce-placeholder"))||(S=>Q(S.attr("data-mce-bogus")))(x)||Ft(E)||sv(w,E,!0).each(S=>{x.attr("src",S.blobUri())})};b.addAttributeFilter("src",x=>j(x,k))}})(g,h)})(m,r),(h=r).inline_styles&&((t,e,n)=>{var o;const r=vd();var s,a,i;e.convert_fonts_to_spans&&(s=t,a=r,i=H.explode(null!==(o=e.font_size_legacy_values)&&void 0!==o?o:""),s.addNodeFilter("font",l=>{j(l,d=>{const c=a.parse(d.attr("style")),u=d.attr("color"),f=d.attr("face"),m=d.attr("size");var g;u&&(c.color=u),f&&(c["font-family"]=f),m&&Na(m).each(g=>{c["font-size"]=i[g-1]}),d.name="span",d.attr("style",a.serialize(c)),g=d,j(["color","face","size"],p=>{g.attr(p,null)})})})),((s,a,i)=>{s.addNodeFilter("strike",l=>{const d="html4"!==a.type;j(l,c=>{if(d)c.name="s";else{const u=i.parse(c.attr("style"));u["text-decoration"]="line-through",c.name="span",c.attr("style",i.serialize(u))}})})})(t,n,r)})(m,h,e),m;var h},uv=(t,e)=>{const n=Ai(r=t)?uo({validate:!1}).serialize(r):r,o=e(n);var r;if(o.isDefaultPrevented())return o;if(Ai(t)){if(o.content!==n){const r=Mr({validate:!1,forced_root_block:!1}).parse(o.content,{context:t.name});return kt(it({},o),{content:r})}return kt(it({},o),{content:t})}return o},mv=(t,e)=>{if(e.no_events)return Ce.value(e);{const n=t.dispatch("BeforeGetContent",e);return n.isDefaultPrevented()?Ce.error(Bh(t,it({content:""},n)).content):Ce.value(n)}},fv=(t,e,n)=>n.no_events?e:uv(e,o=>Bh(t,kt(it({},n),{content:o}))).content,vu=(t,e)=>{if(e.no_events)return Ce.value(e);{const n=uv(e.content,o=>{return r=t,s=kt(it({},e),{content:o}),r.dispatch("BeforeSetContent",s);var r,s});return n.isDefaultPrevented()?(Th(t,n),Ce.error(void 0)):Ce.value(n)}},yu=(t,e,n)=>{n.no_events||Th(t,kt(it({},n),{content:e}))},Cu=(t,e,n)=>({element:t,width:e,rows:n}),gv=(t,e)=>({element:t,cells:e}),kE=(t,e)=>({x:t,y:e}),pv=(t,e)=>In(t,e).bind(Na).getOr(1),SE=(t,e,n)=>{const o=t.rows;return!!(o[n]?o[n].cells:[])[e]},hv=t=>Oe(t,(e,n)=>n.cells.length>e?n.cells.length:e,0),bv=(t,e)=>{const n=t.rows;for(let o=0;o<n.length;o++){const r=n[o].cells;for(let s=0;s<r.length;s++)if(wt(r[s],e))return y.some(kE(s,o))}return y.none()},vv=(t,e,n,o,r)=>{const s=[],a=t.rows;for(let i=n;i<=r;i++){const l=a[i].cells,d=e<o?l.slice(e,o+1):l.slice(o,e+1);s.push(gv(a[i].element,d))}return s},_E=t=>((e,n)=>{const o=Cr(e.element),r=Jt("tbody");return Ro(r,n),qt(o,r),o})(t,bt(t.rows,n=>{const o=bt(n.cells,s=>{const a=jg(s);return se(a,"colspan"),se(a,"rowspan"),a}),r=Cr(n.element);return Ro(r,o),r})),yv=()=>dc([]),Ii=(t,e)=>e>=0&&e<t.length&&Er(t.charAt(e)),Cv=t=>jn(t.innerText),wv=t=>J(t)?t.outerHTML:z(t)?oo.encodeRaw(t.data,!1):eo(t)?"\x3c!--"+t.data+"--\x3e":"",OE=So(()=>document.implementation.createHTMLDocument("undo")),Fi=t=>{const e=(n=t.getBody(),ut(bt(be(n.childNodes),wv),s=>s.length>0));var n;const o=Ln(e,s=>{const a=pb(t.serializer,s);return a.length>0?[a]:[]}),r=o.join("");return-1!==r.indexOf("</iframe>")?{type:"fragmented",fragments:o,content:"",bookmark:null,beforeBookmark:null}:(s=>({type:"complete",fragments:null,content:s,bookmark:null,beforeBookmark:null}))(r)},wu=(t,e,n)=>{const o=n?e.beforeBookmark:e.bookmark;"fragmented"===e.type?((t,e)=>{((n,o)=>{let r=0;j(n,s=>{var a,i;0===s[0]?r++:1===s[0]?(((a,i,l)=>{const d=(c=>{let u;const f=document.createElement("div"),m=document.createDocumentFragment();for(c&&(f.innerHTML=c);u=f.firstChild;)m.appendChild(u);return m})(i);a.hasChildNodes()&&l<a.childNodes.length?a.insertBefore(d,a.childNodes[l]):a.appendChild(d)})(o,s[1],r),r++):2===s[0]&&(i=r,(a=o).hasChildNodes()&&i<a.childNodes.length&&a.removeChild(a.childNodes[i]))})})(((n,o)=>{const r=n.length+o.length+2,s=new Array(r),a=new Array(r),i=(u,f,m,g,h)=>{const p=d(u,f,m,g);if(null===p||p.start===f&&p.diag===f-g||p.end===u&&p.diag===u-m){let v=u,b=m;for(;v<f||b<g;)v<f&&b<g&&n[v]===o[b]?(h.push([0,n[v]]),++v,++b):f-u>g-m?(h.push([2,n[v]]),++v):(h.push([1,o[b]]),++b)}else{i(u,p.start,m,p.start-p.diag,h);for(let v=p.start;v<p.end;++v)h.push([0,n[v]]);i(p.end,f,p.end-p.diag,g,h)}},l=(u,f,m,g)=>{let h=u;for(;h-f<g&&h<m&&n[h]===o[h-f];)++h;return{start:u,end:h,diag:f}},d=(u,f,m,g)=>{const h=f-u,p=g-m;if(0===h||0===p)return null;const v=h-p,b=p+h,C=(b%2==0?b:b+1)/2;let w,k,x,E,S;for(s[1+C]=u,a[1+C]=f+1,w=0;w<=C;++w){for(k=-w;k<=w;k+=2){for(x=k+C,s[x]=k===-w||k!==w&&s[x-1]<s[x+1]?s[x+1]:s[x-1]+1,E=s[x],S=E-u+m-k;E<f&&S<g&&n[E]===o[S];)s[x]=++E,++S;if(v%2!=0&&v-w<=k&&k<=v+w&&a[x-v]<=s[x])return l(a[x-v],k+u-m,f,g)}for(k=v-w;k<=v+w;k+=2){for(x=k+C-v,a[x]=k===v-w||k!==v+w&&a[x+1]<=a[x-1]?a[x+1]-1:a[x-1],E=a[x]-1,S=E-u+m-k;E>=u&&S>=m&&n[E]===o[S];)a[x]=E--,S--;if(v%2==0&&-w<=k&&k<=w&&a[x]<=s[x+v])return l(a[x],k+u-m,f,g)}}return null},c=[];return i(0,n.length,0,o.length,c),c})(bt(be(e.childNodes),wv),t),e)})(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!Q(o)||!eh(o)||!o.isFakeCaret}),o&&t.selection.moveToBookmark(o)},xu=t=>"fragmented"===t.type?t.fragments.join(""):t.content,xv=t=>{const e=Jt("body",OE());return La(e,xu(t)),j(ye(e,"*[data-mce-bogus]"),to),Kf(e)},ku=(t,e)=>{return!(!t||!e)&&(o=e,!(xu(t)!==xu(o))||((n,o)=>xv(n)===xv(o))(t,e));var o},Su=t=>0===t.get(),Ui=(t,e,n)=>{Su(n)&&(t.typing=e)},kv=(t,e)=>{t.typing&&(Ui(t,!1,e),t.add())},Sv=t=>({init:{bindEvents:pt},undoManager:{beforeChange:(e,n)=>{return o=t,s=n,void(Su(e)&&s.set(Bd(o.selection)));var o,s},add:(e,n,o,r,s,a)=>((i,l,d,c,u,f,m)=>{const g=Fi(i),h=H.extend(f||{},g);if(!Su(c)||i.removed)return null;const p=l.data[d.get()];if(i.dispatch("BeforeAddUndo",{level:h,lastLevel:p,originalEvent:m}).isDefaultPrevented()||p&&ku(p,h))return null;l.data[d.get()]&&u.get().each(C=>{l.data[d.get()].beforeBookmark=C});const v=zk(i);if(v&&l.data.length>v){for(let C=0;C<l.data.length-1;C++)l.data[C]=l.data[C+1];l.data.length--,d.set(l.data.length)}h.bookmark=Bd(i.selection),d.get()<l.data.length-1&&(l.data.length=d.get()+1),l.data.push(h),d.set(l.data.length-1);const b={level:h,lastLevel:p,originalEvent:m};return d.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",b),i.dispatch("change",b)):i.dispatch("AddUndo",b),h})(t,e,n,o,r,s,a),undo:(e,n,o)=>((r,s,a,i)=>{let l;return s.typing&&(s.add(),s.typing=!1,Ui(s,!1,a)),i.get()>0&&(i.set(i.get()-1),l=s.data[i.get()],wu(r,l,!0),r.setDirty(!0),r.dispatch("Undo",{level:l})),l})(t,e,n,o),redo:(e,n)=>((o,r,s)=>{let a;return r.get()<s.length-1&&(r.set(r.get()+1),a=s[r.get()],wu(o,a,!1),o.setDirty(!0),o.dispatch("Redo",{level:a})),a})(t,e,n),clear:(e,n)=>{return o=t,s=n,(r=e).data=[],s.set(0),r.typing=!1,void o.dispatch("ClearUndos");var o,r,s},reset:e=>{return(n=e).clear(),void n.add();var n},hasUndo:(e,n)=>{return o=t,r=e,n.get()>0||r.typing&&r.data[0]&&!ku(Fi(o),r.data[0]);var o,r},hasRedo:(e,n)=>{return o=e,n.get()<o.data.length-1&&!o.typing;var o},transact:(e,n,o)=>{return a=o,kv(r=e,n),r.beforeChange(),r.ignore(a),r.add();var r,a},ignore:(e,n)=>((o,r)=>{try{o.set(o.get()+1),r()}finally{o.set(o.get()-1)}})(e,n),extra:(e,n,o,r)=>((s,a,i,l,d)=>{if(a.transact(l)){const c=a.data[i.get()].bookmark,u=a.data[i.get()-1];wu(s,u,!0),a.transact(d)&&(a.data[i.get()-1].beforeBookmark=c)}})(t,e,n,o,r)},formatter:{match:(e,n,o,r)=>Jc(t,e,n,o,r),matchAll:(e,n)=>((o,r,s)=>{const a=[],i={},l=o.selection.getStart();return o.dom.getParent(l,d=>{for(let c=0;c<r.length;c++){const u=r[c];!i[u]&&Rn(o,d,u,s)&&(i[u]=!0,a.push(u))}},o.dom.getRoot()),a})(t,e,n),matchNode:(e,n,o,r)=>Rn(t,e,n,o,r),canApply:e=>((n,o)=>{const r=n.formatter.get(o),s=n.dom;if(r){const a=n.selection.getStart(),i=gi(s,a);for(let l=r.length-1;l>=0;l--){const d=r[l];if(!He(d))return!0;for(let c=i.length-1;c>=0;c--)if(s.is(i[c],d.selector))return!0}}return!1})(t,e),closest:e=>((n,o)=>{const r=s=>wt(s,R(n.getBody()));return y.from(n.selection.getStart(!0)).bind(s=>Yc(R(s),a=>sr(o,i=>{return Rn(n,a.dom,d=i)?y.some(d):y.none();var d}),r)).getOrNull()})(t,e),apply:(e,n,o)=>z0(t,e,n,o),remove:(e,n,o,r)=>I0(t,e,n,o,r),toggle:(e,n,o)=>((r,s,a,i)=>{const l=r.formatter.get(s);l&&(!Jc(r,s,a,i)||"toggle"in l[0]&&!l[0].toggle?z0(r,s,a,i):I0(r,s,a,i))})(t,e,n,o),formatChanged:(e,n,o,r,s)=>{return((f,m,g,h,p,v)=>{const b=m.get();j(g.split(","),C=>{const w=Rt(b,C).getOrThunk(()=>{const x={withSimilar:{state:Wt(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Wt(!1),similar:!1,callbacks:[]},withVars:[]};return b[C]=x,x}),k=()=>{const x=V0(f);return $0(f,x,C,p,v).isSome()};if(Se(v)){const x=p?w.withSimilar:w.withoutSimilar;x.callbacks.push(h),1===x.callbacks.length&&x.state.set(k())}else w.withVars.push({state:Wt(k()),similar:p,vars:v,callback:h})}),m.set(b)})(t,i=e,l=n,d=o,r,s),{unbind:()=>((f,m,g)=>{const h=f.get();j(m.split(","),p=>Rt(h,p).each(v=>{h[p]={withSimilar:kt(it({},v.withSimilar),{callbacks:ut(v.withSimilar.callbacks,b=>b!==g)}),withoutSimilar:kt(it({},v.withoutSimilar),{callbacks:ut(v.withoutSimilar.callbacks,b=>b!==g)}),withVars:ut(v.withVars,b=>b.callback!==g)}})),f.set(h)})(i,l,d)};var i,l,d}},editor:{getContent:e=>{return o=e,y.from((n=t).getBody()).fold(G("tree"===o.format?new xe("body",11):""),r=>((t,e,n)=>{let o;return o="raw"===e.format?H.trim(c_(t.serializer,n.innerHTML)):"text"===e.format?((r,s)=>{const a=r.getDoc(),i=Jn(R(r.getBody())),l=Jt("div",a);Qt(l,"data-mce-bogus","all"),Da(l,{position:"fixed",left:"-9999999px",top:"0"}),La(l,s.innerHTML);const d=ye(l,"[data-mce-bogus]");j(d,f=>{"all"===Je(f,"data-mce-bogus")?Ot(f):Bo(f)?(Ie(f,dr("\ufeff")),Ot(f)):to(f)});const c=Jl(f=i)?f:R(Un(f).dom.body);var f;qt(c,l);const u=jn(l.dom.innerText);return Ot(l),u})(t,n):"tree"===e.format?t.serializer.serialize(n,e):((r,s)=>{const a=Te(r),i=new RegExp(`^(<${a}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${a}>[\r\n]*|<br \\/>[\r\n]*)$`);return s.replace(i,"")})(t,t.serializer.serialize(n,e)),"text"!==e.format&&!ja(R(n))&&lt(o)?H.trim(o):o})(n,o,r));var n,o},setContent:(e,n)=>{return r=e,s=n,y.from((o=t).getBody()).map(a=>Ai(r)?((i,l,d,c)=>{i0(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),d);const u=uo({validate:!1},i.schema).serialize(d),f=ja(R(l))?u:H.trim(u);return Gc(i,f,c.no_selection),{content:d,html:f}})(o,a,r,s):((i,l,d,c)=>{if(0===d.length||/^\s+$/.test(d)){const u='<br data-mce-bogus="1">';"TABLE"===l.nodeName?d="<tr><td>"+u+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(d="<li>"+u+"</li>");const f=Te(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),f.toLowerCase())?(d=u,d=i.dom.createHTML(f,Ts(i),d)):d||(d=u),Gc(i,d,c.no_selection),{content:d,html:d}}{"raw"!==c.format&&(d=uo({validate:!1},i.schema).serialize(i.parser.parse(d,{isRootContent:!0,insert:!0})));const u=ja(R(l))?d:H.trim(d);return Gc(i,u,c.no_selection),{content:u,html:u}}})(o,a,r,s)).getOr({content:r,html:Ai(s.content)?"":s.content});var o,r,s},insertContent:(e,n)=>F_(t,e,n),addVisual:e=>((n,o)=>{const r=n.dom,s=Q(o)?o:n.getBody();j(r.select("table,a",s),a=>{switch(a.nodeName){case"TABLE":const i=Wk(n),l=r.getAttrib(a,"border");l&&"0"!==l||!n.hasVisual?r.removeClass(a,i):r.addClass(a,i);break;case"A":if(!r.getAttrib(a,"href")){const d=r.getAttrib(a,"name")||a.id,c=Op(n);d&&n.hasVisual?r.addClass(a,c):r.removeClass(a,c)}}}),n.dispatch("VisualAid",{element:o,hasVisual:n.hasVisual})})(t,e)},selection:{getContent:(e,n)=>((o,r,s={})=>{const a=(l=r,kt(it({},s),{format:l,get:!0,selection:!0,getInner:!0}));var l;return mv(o,a).fold(he,i=>{const l=((d,c)=>{if("text"===c.format)return y.from((u=d).selection.getRng()).map(f=>{var m;const g=y.from(u.dom.getParent(f.commonAncestorContainer,u.dom.isBlock)),h=u.getBody(),p=g.map(k=>k.nodeName).getOr("div").toLowerCase(),v=u.dom.add(h,p,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.cloneContents()),b=Cv(v),C=jn(null!==(m=v.textContent)&&void 0!==m?m:"");if(u.dom.remove(v),Ii(C,0)||Ii(C,C.length-1)){const w=g.getOr(h),k=Cv(w),x=k.indexOf(b);return-1===x?b:(Ii(k,x-1)?" ":"")+b+(Ii(k,x+b.length)?" ":"")}return b}).getOr("");var u;{const u=((f,m)=>{const g=f.selection.getRng(),h=f.dom.create("body"),p=f.selection.getSel(),v=Cc(f,Gd(p)),b=m.contextual?((t,e)=>{const n=lh(e,t);return n.length>0?((t,e)=>{return(n=t,o=e[0],hs(o,"table",et(wt,n))).bind(n=>{const o=e[0],r=e[e.length-1],s=(a=>{const i=Cu(Cr(a),0,[]);return j(ye(a,"tr"),(l,d)=>{j(ye(l,"td,th"),(c,u)=>{((f,m,g,h,p)=>{const v=pv(p,"rowspan"),b=pv(p,"colspan"),C=f.rows;for(let w=g;w<g+v;w++){C[w]||(C[w]=gv(jg(h),[]));for(let k=m;k<m+b;k++)C[w].cells[k]=w===g&&k===m?p:Cr(p)}})(i,((f,m,g)=>{for(;SE(f,m,g);)m++;return m})(i,u,d),d,l,c)})}),Cu(i.element,hv(i.rows),i.rows)})(n);return(a=s,i=o,l=r,bv(a,i).bind(d=>bv(a,l).map(c=>((u,f,m)=>{const g=f.x,h=f.y,p=m.x,v=m.y,b=h<v?vv(u,g,h,p,v):vv(u,g,v,p,h);return Cu(u.element,hv(b),b)})(a,d,c)))).map(a=>dc([_E(a)]));var a,i,l}).getOrThunk(yv);var n,o})(t,n):(o=t,(r=e).length>0&&r[0].collapsed?yv():(s=o,((i,l)=>{const d=Oe(l,(c,u)=>(qt(u,c),u),i);return l.length>0?dc([d]):d})(R((a=r[0]).cloneContents()),((t,e)=>{const n=R(e.commonAncestorContainer),o=Vn(n,t),r=ut(o,wx),s=(l=e,Vt(i=o,d=>"li"===Bt(d)&&Xd(d,l)).fold(G([]),d=>{return(c=i,Vt(c,u=>"ul"===Bt(u)||"ol"===Bt(u))).map(c=>{const u=Jt(Bt(c)),f=os(Vf(c),(m,g)=>ne(g,"list-style"));return Da(u,f),[Jt("li"),u]}).getOr([]);var c})),a=r.concat(s.length?s:(i=>vs(i)?Me(i).filter(ad).fold(G([]),l=>[i,l]):ad(i)?[i]:[])(n));var i,l;return bt(a,Cr)})(s,a))));var o,r,s,a})(R(f.getBody()),v).dom:g.cloneContents();return b&&h.appendChild(b),f.selection.serializer.serialize(h,m)})(d,c);return"tree"===c.format?u:d.selection.isCollapsed()?"":u}})(o,i);return fv(o,l,i)})})(t,e,n)},autocompleter:{addDecoration:e=>((t,e)=>{if(mb(R(t.getBody())).isNone()){const o=Ta('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());qt(o,R(e.extractContents())),e.insertNode(o.dom),Me(o).each(r=>r.dom.normalize()),(n=o,((r,s)=>{const a=i=>{const l=ae(i);for(let d=l.length-1;d>=0;d--){const c=l[d];if(s(c))return y.some(c);const u=a(c);if(u.isSome())return u}return y.none()};return a(r)})(n,cb)).map(r=>{var s;t.selection.setCursorLocation(r.dom,"img"===Bt(s=r)?1:mg(s).fold(()=>ae(s).length,a=>a.length))})}var n})(t,e),removeDecoration:()=>{return e=t,n=R(t.getBody()),mb(n).each(o=>{const r=e.selection.getBookmark();to(o),e.selection.moveToBookmark(r)});var e,n}},raw:{getModel:()=>y.none()}}),On=t=>gt(t.plugins,"rtc"),_u=t=>t.rtcInstance?t.rtcInstance:Sv(t),Pt=t=>{const e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},_v=t=>Pt(t).init.bindEvents(),Ev=t=>0===t.dom.length?(Ot(t),y.none()):y.some(t),Nv=(t,e,n,o)=>{t.bind(r=>((o?Oc:_i)(r.dom,o?r.dom.length:0),e.filter(Le).map(s=>((a,i,l,d)=>{const c=a.dom,u=i.dom,f=d?c.length:u.length;d?(Tc(c,u,!1,!d),l.setStart(u,f)):(Tc(u,c,!1,!d),l.setEnd(u,f))})(r,s,n,o)))).orThunk(()=>{return(s=e,a=o,s.filter(i=>Hs.isBookmarkNode(i.dom)).bind(a?fs:No)).or(e).filter(Le).map(s=>((a,i)=>{Me(a).each(l=>{const d=a.dom;i&&Gs(l,F(d,0))?_i(d,0):!i&&Ys(l,F(d,d.length))&&Oc(d,d.length)})})(s,o));var s,a})},Rv=(t,e,n)=>{if(gt(t,e)){const o=ut(t[e],r=>r!==n);0===o.length?delete t[e]:t[e]=o}},Av=t=>!(!t||!t.ownerDocument)&&Fn(R(t.ownerDocument),R(t)),Ov=(t,e,n,o)=>{let r,s;const{selectorChangedWithUnbind:a}=((p,v)=>{let b,C;const w=(x,E)=>Vt(E,S=>p.is(S,x)),k=x=>p.getParents(x,void 0,p.getRoot());return{selectorChangedWithUnbind:(x,E)=>(b||(b={},C={},v.on("NodeChange",S=>{const O=S.element,B=k(O),_={};Nt(b,(D,M)=>{w(M,B).each(U=>{C[M]||(j(D,K=>{K(!0,{node:U,selector:M,parents:B})}),C[M]=D),_[M]=D})}),Nt(C,(D,M)=>{_[M]||(delete C[M],j(D,U=>{U(!1,{node:O,selector:M,parents:B})}))})})),b[x]||(b[x]=[]),b[x].push(E),w(x,k(v.selection.getStart())).each(()=>{C[x]=b[x]}),{unbind:()=>{Rv(b,x,E),Rv(C,x,E)}})}})(t,o),i=(p,v)=>((b,C,w={})=>{const k=(E=C,kt(it({format:"html"},w),{set:!0,selection:!0,content:E}));var E;vu(b,k).each(x=>{const E=((O,B)=>{if("raw"!==B.format){const _=O.selection.getRng(),D=O.dom.getParent(_.commonAncestorContainer,O.dom.isBlock),M=D?{context:D.nodeName.toLowerCase()}:{},U=O.parser.parse(B.content,it(it({forced_root_block:!1},M),B));return uo({validate:!1},O.schema).serialize(U)}return B.content})(b,x),S=b.selection.getRng();((O,B)=>{const _=y.from(B.firstChild).map(R),D=y.from(B.lastChild).map(R);O.deleteContents(),O.insertNode(B);const M=_.bind(No).filter(Le).bind(Ev),U=D.bind(fs).filter(Le).bind(Ev);Nv(M,_,O,!0),Nv(U,D,O,!1),O.collapse(!1)})(S,S.createContextualFragment(E)),b.selection.setRng(S),qs(b,S),yu(b,E,x)})})(o,p,v),l=p=>{const v=c();v.collapse(!!p),u(v)},d=()=>e.getSelection?e.getSelection():e.document.selection,c=()=>{let p;const v=(C,w,k)=>{try{return w.compareBoundaryPoints(C,k)}catch(x){return-1}},b=e.document;if(Q(o.bookmark)&&!qo(o)){const C=hc(o);if(C.isSome())return C.map(w=>Cc(o,[w])[0]).getOr(b.createRange())}try{const C=d();C&&!Ia(C.anchorNode)&&(p=C.rangeCount>0?C.getRangeAt(0):b.createRange(),p=Cc(o,[p])[0])}catch(C){}if(p||(p=b.createRange()),ps(p.startContainer)&&p.collapsed){const C=t.getRoot();p.setStart(C,0),p.setEnd(C,0)}return r&&s&&(0===v(p.START_TO_START,p,r)&&0===v(p.END_TO_END,p,r)?p=s:(r=null,s=null)),p},u=(p,v)=>{if(!((C=p)&&Av(C.startContainer)&&Av(C.endContainer)))return;var C;const b=d();if(p=o.dispatch("SetSelectionRange",{range:p,forward:v}).range,b){s=p;try{b.removeAllRanges(),b.addRange(p)}catch(C){}!1===v&&b.extend&&(b.collapse(p.endContainer,p.endOffset),b.extend(p.startContainer,p.startOffset)),r=b.rangeCount>0?b.getRangeAt(0):null}if(!p.collapsed&&p.startContainer===p.endContainer&&(null==b?void 0:b.setBaseAndExtent)&&p.endOffset-p.startOffset<2&&p.startContainer.hasChildNodes()){const C=p.startContainer.childNodes[p.startOffset];C&&"IMG"===C.nodeName&&(b.setBaseAndExtent(p.startContainer,p.startOffset,p.endContainer,p.endOffset),b.anchorNode===p.startContainer&&b.focusNode===p.endContainer||b.setBaseAndExtent(C,0,C,1))}o.dispatch("AfterSetSelectionRange",{range:p,forward:v})},f=()=>{const p=d(),v=null==p?void 0:p.anchorNode,b=null==p?void 0:p.focusNode;if(!p||!v||!b||Ia(v)||Ia(b))return!0;const C=t.createRng(),w=t.createRng();try{C.setStart(v,p.anchorOffset),C.collapse(!0),w.setStart(b,p.focusOffset),w.collapse(!0)}catch(k){return!0}return C.compareBoundaryPoints(C.START_TO_START,w)<=0},m={dom:t,win:e,serializer:n,editor:o,collapse:l,setCursorLocation:(p,v)=>{const b=t.createRng();Q(p)&&Q(v)?(b.setStart(p,v),b.setEnd(p,v),u(b),l(!1)):(Qd(t,b,o.getBody(),!0),u(b))},getContent:p=>((v,b={})=>{return w=b.format?b.format:"html",k=b,Pt(v).selection.getContent(w,k);var w,k})(o,p),setContent:i,getBookmark:(p,v)=>g.getBookmark(p,v),moveToBookmark:p=>g.moveToBookmark(p),select:(p,v)=>{return(b=t,C=p,w=v,y.from(C).bind(k=>y.from(k.parentNode).map(x=>{const E=b.nodeIndex(k),S=b.createRng();return S.setStart(x,E),S.setEnd(x,E+1),w&&(Qd(b,S,k,!0),Qd(b,S,k,!1)),S}))).each(u),p;var b,C,w},isCollapsed:()=>{const p=c(),v=d();return!(!p||p.item)&&(p.compareEndPoints?0===p.compareEndPoints("StartToEnd",p):!v||p.collapsed)},isForward:f,setNode:p=>(i(t.getOuterHTML(p)),p),getNode:()=>((p,v)=>{if(!v)return p;let b=v.startContainer,C=v.endContainer;const w=v.startOffset,k=v.endOffset;let x=v.commonAncestorContainer;v.collapsed||(b===C&&k-w<2&&b.hasChildNodes()&&(x=b.childNodes[w]),z(b)&&z(C)&&(b=b.length===w?db(b.nextSibling,!0):b.parentNode,C=0===k?db(C.previousSibling,!1):C.parentNode,b&&b===C&&(x=b)));const E=z(x)?x.parentNode:x;return J(E)?E:p})(o.getBody(),c()),getSel:d,setRng:u,getRng:c,getStart:p=>ib(o.getBody(),c(),p),getEnd:p=>lb(o.getBody(),c(),p),getSelectedBlocks:(p,v)=>((b,C,w,k)=>{const x=[],E=b.getRoot(),S=b.getParent(w||ib(E,C,C.collapsed),b.isBlock),O=b.getParent(k||lb(E,C,C.collapsed),b.isBlock);if(S&&S!==E&&x.push(S),S&&O&&S!==O){let B=S;const _=new Ht(S,E);for(;(B=_.next())&&B!==O;)b.isBlock(B)&&x.push(B)}return O&&S!==O&&O!==E&&x.push(O),x})(t,c(),p,v),normalize:()=>{const p=c(),v=d();if(!(Gd(v).length>1)&&mi(o)){const b=yi(t,p);return b.each(C=>{u(C,f())}),b.getOr(p)}return p},selectorChanged:(p,v)=>(a(p,v),m),selectorChangedWithUnbind:a,getScrollContainer:()=>{let p,v=t.getRoot();for(;v&&"BODY"!==v.nodeName;){if(v.scrollHeight>v.clientHeight){p=v;break}v=v.parentNode}return p},scrollIntoView:(p,v)=>{var b;Q(p)?((b=o).inline?QS:ZS)(b,p,v):qs(o,c(),v)},placeCaretAt:(p,v)=>u(zh(p,v,o.getDoc())),getBoundingClientRect:()=>{const p=c();return p.collapsed?F.fromRangeStart(p).getClientRects()[0]:p.getBoundingClientRect()},destroy:()=>{e=r=s=null,h.destroy()}},g=Hs(m),h=Lh(m,o);return m.bookmarkManager=g,m.controlSelection=h,m},TE=(t,e,n)=>{-1===H.inArray(e,n)&&(t.addAttributeFilter(n,(o,r)=>{let s=o.length;for(;s--;)o[s].attr(r,null)}),e.push(n))},Tv=(t,e)=>{const n=((t,e)=>{const n=["data-mce-selected"],o=e&&e.dom?e.dom:_t.DOM,r=e&&e.schema?e.schema:ro(t);t.entity_encoding=t.entity_encoding||"named",t.remove_trailing_brs=!("remove_trailing_brs"in t)||t.remove_trailing_brs;const s=Mr(t,r);return i=t,l=o,(a=s).addAttributeFilter("data-mce-tabindex",(d,c)=>{let u=d.length;for(;u--;){const f=d[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),a.addAttributeFilter("src,href,style",(d,c)=>{const u="data-mce-"+c,f=i.url_converter,m=i.url_converter_scope;let g=d.length;for(;g--;){const h=d[g];let p=h.attr(u);void 0!==p?(h.attr(c,p.length>0?p:null),h.attr(u,null)):(p=h.attr(c),"style"===c?p=l.serializeStyle(l.parseStyle(p),h.name):f&&(p=f.call(m,p,c,h.name)),h.attr(c,p.length>0?p:null))}}),a.addAttributeFilter("class",d=>{let c=d.length;for(;c--;){const u=d[c];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),a.addAttributeFilter("data-mce-type",(d,c,u)=>{let f=d.length;for(;f--;){const m=d[f];"bookmark"===m.attr("data-mce-type")&&!u.cleanup&&(y.from(m.firstChild).exists(h=>{var p;return!Ha(null!==(p=h.value)&&void 0!==p?p:"")})?m.unwrap():m.remove())}}),a.addNodeFilter("noscript",d=>{var c;let u=d.length;for(;u--;){const f=d[u].firstChild;f&&(f.value=oo.decode(null!==(c=f.value)&&void 0!==c?c:""))}}),a.addNodeFilter("script,style",(d,c)=>{var u;const f=g=>g.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let m=d.length;for(;m--;){const g=d[m],h=g.firstChild,p=null!==(u=null==h?void 0:h.value)&&void 0!==u?u:"";if("script"===c){const v=g.attr("type");v&&g.attr("type","mce-no/type"===v?null:v.replace(/^mce\-/,"")),"xhtml"===i.element_format&&h&&p.length>0&&(h.value="// <![CDATA[\n"+f(p)+"\n// ]]>")}else"xhtml"===i.element_format&&h&&p.length>0&&(h.value="\x3c!--\n"+f(p)+"\n--\x3e")}}),a.addNodeFilter("#comment",d=>{let c=d.length;for(;c--;){const u=d[c],f=u.value;i.preserve_cdata&&0===(null==f?void 0:f.indexOf("[CDATA["))?(u.name="#cdata",u.type=4,u.value=l.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==f?void 0:f.indexOf("mce:protected "))&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),a.addNodeFilter("xml:namespace,input",(d,c)=>{let u=d.length;for(;u--;){const f=d[u];7===f.type?f.remove():1===f.type&&("input"!==c||f.attr("type")||f.attr("type","text"))}}),a.addAttributeFilter("data-mce-type",d=>{j(d,c=>{"format-caret"===c.attr("data-mce-type")&&(c.isEmpty(a.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),a.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",(d,c)=>{let u=d.length;for(;u--;)d[u].attr(c,null)}),{schema:r,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:(a,i={})=>{const l=it({format:"html"},i),d=(m=a,p=g=l,Q(h=f=e)&&h.hasEventListeners("PreProcess")&&!p.no_events?((h,p,v)=>{let b;const C=h.dom;let w=p.cloneNode(!0);const k=document.implementation;if(k.createHTMLDocument){const x=k.createHTMLDocument("");H.each("BODY"===w.nodeName?w.childNodes:[w],E=>{x.body.appendChild(x.importNode(E,!0))}),w="BODY"!==w.nodeName?x.body.firstChild:x.body,b=C.doc,C.doc=x}return x=h,E=kt(it({},v),{node:w}),x.dispatch("PreProcess",E),b&&(C.doc=b),w;var x,E})(f,m,g):m),c=((f,m,g)=>{const h=jn(g.getInner?m.innerHTML:f.getOuterHTML(m));return g.selection||ja(R(m))?h:H.trim(h)})(o,d,l),u=((f,m,g)=>{const h=g.selection?it({forced_root_block:!1},g):g,p=f.parse(m,h);return(v=>{const b=w=>"br"===(null==w?void 0:w.name),C=v.lastChild;if(b(C)){const w=C.prev;b(w)&&(C.remove(),w.remove())}})(p),p})(s,c,l);var f,m,g,h,p;return"tree"===l.format?u:((f,m,g,h,p)=>{var w;return((b,C,w)=>{return!C.no_events&&b?(x=b,E=kt(it({},C),{content:w}),x.dispatch("PostProcess",E)).content:w;var x,E})(f,p,(w=h,uo(m,g).serialize(w)))})(e,t,r,u,l)},addRules:r.addValidElements,setRules:r.setValidElements,addTempAttr:et(TE,s,n),getTempAttrs:G(n),getNodeFilters:s.getNodeFilters,getAttributeFilters:s.getAttributeFilters,removeNodeFilter:s.removeNodeFilter,removeAttributeFilter:s.removeAttributeFilter};var a,i,l})(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},Eu=(t,e,n={})=>{const o=(s=e,kt(it({format:"html"},n),{set:!0,content:s}));var s;return vu(t,o).map(r=>{const s=(i=r.content,l=r,_u(t).editor.setContent(i,l));var i,l;return yu(t,s.html,r),s.content}).getOr(e)},DE="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),PE="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),zi=_t.DOM,ji=t=>y.from(t).each(e=>e.destroy()),Hi=(()=>{const t={};return{add:(e,n)=>{t[e]=n},get:e=>t[e]?t[e]:{icons:{}},has:e=>gt(t,e)}})(),Ir=de.ModelManager,Bv=(t,e)=>e.dom[t],Dv=(t,e)=>parseInt(yn(e,t),10),IE=et(Bv,"clientWidth"),FE=et(Bv,"clientHeight"),UE=et(Dv,"margin-top"),zE=et(Dv,"margin-left"),Pv=t=>{const e=[],n=()=>{const l=t.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const d=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:d,close:d,getArgs:d}})()},o=()=>y.from(e[0]),r=()=>{j(e,l=>{l.reposition()})},s=l=>{ts(e,d=>d===l).each(d=>{e.splice(d,1)})},a=(l,d=!0)=>{return t.removed||!(u=(c=t).inline?c.getBody():c.getContentAreaContainer(),y.from(u).map(R)).map(cr).getOr(!1)?{}:(d&&t.dispatch("BeforeOpenNotification",{notification:l}),Vt(e,c=>{return!((u=n().getArgs(c)).type!==(f=l).type||u.text!==f.text||u.progressBar||u.timeout||f.progressBar||f.timeout);var u,f}).getOrThunk(()=>{t.editorManager.setActive(t);const c=n().open(l,()=>{s(c),r(),o().fold(()=>t.focus(),u=>Zh(R(u.getEl())))});return(u=>{e.push(u)})(c),r(),t.dispatch("OpenNotification",{notification:it({},c)}),c}));var c,u},i=G(e);return(l=t).on("SkinLoaded",()=>{const d=Rk(l);d&&a({text:d,type:"warning",timeout:0},!1),r()}),l.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),l.on("remove",()=>{j(e.slice(),d=>{n().close(d)})}),{open:a,close:()=>{o().each(l=>{n().close(l),s(l),r()})},getNotifications:i};var l},Fr=de.PluginManager,Qo=de.ThemeManager,Lv=t=>{let e=[];const n=()=>{const a=t.theme;return a&&a.getWindowManagerImpl?a.getWindowManagerImpl():(()=>{const i=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:i,openUrl:i,alert:i,confirm:i,close:i}})()},o=(a,i)=>(...l)=>i?i.apply(a,l):void 0,r=a=>{t.dispatch("CloseWindow",{dialog:a}),e=ut(e,i=>i!==a),0===e.length&&t.focus()},s=a=>{t.editorManager.setActive(t),pc(t),t.ui.show();const i=a();return e.push(l=i),t.dispatch("OpenWindow",{dialog:l}),i;var l};return t.on("remove",()=>{j(e,a=>{n().close(a)})}),{open:(a,i)=>s(()=>n().open(a,i,r)),openUrl:a=>s(()=>n().openUrl(a,r)),alert:(a,i,l)=>{const d=n();d.alert(a,o(l||d,i))},confirm:(a,i,l)=>{const d=n();d.confirm(a,o(l||d,i))},close:()=>{y.from(e[e.length-1]).each(a=>{n().close(a),r(a)})}}},Mv=(t,e)=>{t.notificationManager.open({type:"error",text:e})},$i=(t,e)=>{t._skinLoaded?Mv(t,e):t.on("SkinLoaded",()=>{Mv(t,e)})},ea=(t,e,n)=>{Rh(t,e,{message:n}),console.error(n)},na=(t,e,n)=>n?`Failed to load ${t}: ${n} from url ${e}`:`Failed to load ${t} url: ${e}`,Vi=(t,...e)=>{const n=window.console;n&&(n.error?n.error(t,...e):n.log(t,...e))},Iv=(t,e)=>{const n=t.editorManager.baseURL+"/skins/content",o=`content${t.editorManager.suffix}.css`;return bt(e,r=>/^[a-z0-9\-]+$/i.test(r)&&!t.inline?`${n}/${r}/${o}`:t.documentBaseURI.toAbsolute(r))},jE=Ut,Fv=()=>{let t={};const e=(o,r)=>({status:o,resultUri:r}),n=o=>o in t;return{hasBlobUri:n,getResultUri:o=>{const r=t[o];return r?r.resultUri:null},isPending:o=>!!n(o)&&1===t[o].status,isUploaded:o=>!!n(o)&&2===t[o].status,markPending:o=>{t[o]=e(1,null)},markUploaded:(o,r)=>{t[o]=e(2,r)},removeFailed:o=>{delete t[o]},destroy:()=>{t={}}}};let $E=0;const Uv=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),zv=(t,e)=>((t,e)=>{const n={},o=(l,d)=>new Promise((c,u)=>{const f=new XMLHttpRequest;f.open("POST",e.url),f.withCredentials=e.credentials,f.upload.onprogress=g=>{d(g.loaded/g.total*100)},f.onerror=()=>{u("Image upload failed due to a XHR Transport error. Code: "+f.status)},f.onload=()=>{if(f.status<200||f.status>=300)return void u("HTTP Error: "+f.status);const g=JSON.parse(f.responseText);var h,p;g&&lt(g.location)?c((p=g.location,(h=e.basePath)?h.replace(/\/$/,"")+"/"+p.replace(/^\//,""):p)):u("Invalid JSON: "+f.responseText)};const m=new FormData;m.append("file",l.blob(),l.filename()),f.send(m)}),r=yt(e.handler)?e.handler:o,s=(l,d)=>({url:d,blobInfo:l,status:!0}),a=(l,d)=>({url:"",blobInfo:l,status:!1,error:d}),i=(l,d)=>{H.each(n[l],c=>{c(d)}),delete n[l]};return{upload:(l,d)=>{return e.url||r!==o?(u=d,c=H.grep(c=l,f=>!t.isUploaded(f.blobUri())),Promise.all(H.map(c,f=>{return t.isPending(f.blobUri())?(m=>{const g=m.blobUri();return new Promise(h=>{n[g]=n[g]||[],n[g].push(h)})})(f):(g=r,h=u,t.markPending((m=f).blobUri()),new Promise(p=>{let v,b;try{const C=()=>{v&&(v.close(),b=pt)},w=x=>{C(),t.markUploaded(m.blobUri(),x),i(m.blobUri(),s(m,x)),p(s(m,x))},k=x=>{C(),t.removeFailed(m.blobUri()),i(m.blobUri(),a(m,x)),p(a(m,x))};b=x=>{x<0||x>100||y.from(v).orThunk(()=>y.from(h).map(Pl)).each(E=>{v=E,E.progressBar.value(x)})},g(m,b).then(w,x=>{k(lt(x)?{message:x}:x)})}catch(C){p(a(m,C))}}));var m,g,h}))):new Promise(c=>{c([])});var c,u}}})(e,{url:pk(t),basePath:hk(t),credentials:bk(t),handler:vk(t)}),jv={remove_similar:!0,inherit:!1},Ur=it({selector:"td,th"},jv),WE={tablecellbackgroundcolor:it({styles:{backgroundColor:"%value"}},Ur),tablecellverticalalign:it({styles:{"vertical-align":"%value"}},Ur),tablecellbordercolor:it({styles:{borderColor:"%value"}},Ur),tablecellclass:it({classes:["%value"]},Ur),tableclass:it({selector:"table",classes:["%value"]},jv),tablecellborderstyle:it({styles:{borderStyle:"%value"}},Ur),tablecellborderwidth:it({styles:{borderWidth:"%value"}},Ur)},KE=G(WE),qi=H.each,qe=_t.DOM,Nu=t=>Q(t)&&pe(t),Hv=(t,e)=>{const n=e&&e.schema||ro({}),o=a=>{const i=lt(a)?{name:a,classes:[],attrs:{}}:a,l=qe.create(i.name);return d=l,(c=i).classes.length>0&&qe.addClass(d,c.classes.join(" ")),qe.setAttribs(d,c.attrs),l;var d,c},r=(a,i,l)=>{let d;const c=i[0],u=Nu(c)?c.name:void 0,f=((h,p)=>{const v=n.getElementRule(h.nodeName.toLowerCase()),b=null==v?void 0:v.parentsRequired;return!(!b||!b.length)&&(p&&Et(b,p)?p:b[0])})(a,u);if(f)u===f?(d=c,i=i.slice(1)):d=f;else if(c)d=c,i=i.slice(1);else if(!l)return a;const m=d?o(d):qe.create("div");m.appendChild(a),l&&H.each(l,h=>{const p=o(h);m.insertBefore(p,a)});const g=Nu(d)?d.siblings:void 0;return r(m,i,g)},s=qe.create("div");if(t.length>0){const a=t[0],i=o(a),l=Nu(a)?a.siblings:void 0;s.appendChild(r(i,t.slice(1),l))}return s},GE=t=>{let e="div";const n={name:e,classes:[],attrs:{},selector:t=H.trim(t)};return"*"!==t&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(o,r,s,a,i)=>{switch(r){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":-1!==H.inArray("checked disabled enabled read-only required".split(" "),s)&&(n.attrs[s]=s)}if("["===a){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=e||"div",n},YE=(t,e)=>{let n="",o=Bk(t);if(""===o)return"";const r=m=>lt(m)?m.replace(/%(\w+)/g,""):"",s=(m,g)=>qe.getStyle(null!=g?g:t.getBody(),m,!0);if(lt(e)){const m=t.formatter.get(e);if(!m)return"";e=m[0]}if("preview"in e){const m=e.preview;if(!1===m)return"";o=m||o}let a,i=e.block||e.inline||"span";const l=lt(d=e.selector)?(d=(d=d.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),H.map(d.split(/(?:>|\s+(?![^\[\]]+\]))/),m=>{const g=H.map(m.split(/(?:~\+|~|\+)/),GE),h=g.pop();return g.length&&(h.siblings=g),h}).reverse()):[];var d;l.length>0?(l[0].name||(l[0].name=i),i=e.selector,a=Hv(l,t)):a=Hv([i],t);const c=qe.select(i,a)[0]||a.firstChild;qi(e.styles,(m,g)=>{const h=r(m);h&&qe.setStyle(c,g,h)}),qi(e.attributes,(m,g)=>{const h=r(m);h&&qe.setAttrib(c,g,h)}),qi(e.classes,m=>{const g=r(m);qe.hasClass(c,g)||qe.addClass(c,g)}),t.dispatch("PreviewFormats"),qe.setStyles(a,{position:"absolute",left:-65535}),t.getBody().appendChild(a);const u=s("fontSize"),f=/px$/.test(u)?parseInt(u,10):0;return qi(o.split(" "),m=>{let g=s(m,c);if(!("background-color"===m&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(g)&&(g=s(m),"#ffffff"===ui(g).toLowerCase())||"color"===m&&"#000000"===ui(g).toLowerCase())){if("font-size"===m&&/em|%$/.test(g)){if(0===f)return;g=parseFloat(g)/(/%$/.test(g)?100:1)*f+"px"}"border"===m&&g&&(n+="padding:0 2px;"),n+=m+":"+g+";"}}),t.dispatch("AfterPreviewFormats"),qe.remove(a),n},$v=t=>{const e=(o=>{const r={},s=(a,i)=>{a&&(lt(a)?(jt(i)||(i=[i]),j(i,l=>{Se(l.deep)&&(l.deep=!He(l)),Se(l.split)&&(l.split=!He(l)||Gt(l)),Se(l.remove)&&He(l)&&!Gt(l)&&(l.remove="none"),He(l)&&Gt(l)&&(l.mixed=!0,l.block_expand=!0),lt(l.classes)&&(l.classes=l.classes.split(/\s+/))}),r[a]=i):Nt(a,(l,d)=>{s(d,l)}))};return s((a=>{const i=a.dom,l=a.schema.type,d={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{i.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{i.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==l?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>J(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{H.each(f,(m,g)=>{i.setAttrib(c,g,m)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return null!==(u=null==c?void 0:c.customValue)&&void 0!==u?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return H.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{d[c]={block:c,remove:"all"}}),d})(o)),s(KE()),s(Tk(o)),{get:a=>Q(a)?r[a]:r,has:a=>gt(r,a),register:s,unregister:a=>(a&&r[a]&&delete r[a],r)}})(t),n=Wt({});return(o=>{o.addShortcut("meta+b","","Bold"),o.addShortcut("meta+i","","Italic"),o.addShortcut("meta+u","","Underline");for(let r=1;r<=6;r++)o.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);o.addShortcut("access+7","",["FormatBlock",!1,"p"]),o.addShortcut("access+8","",["FormatBlock",!1,"div"]),o.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(o=t).on("mouseup keydown",r=>{((s,a)=>{const i=s.selection,l=s.getBody();eu(s,null,!1),8!==a&&46!==a||!i.isCollapsed()||"\ufeff"!==i.getStart().innerHTML||eu(s,$o(l,i.getStart())),37!==a&&39!==a||eu(s,$o(l,i.getStart()))})(o,r.keyCode)}),On(t)||((o,r)=>{o.set({}),r.on("NodeChange",s=>{q0(r,s.element,o.get())}),r.on("FormatApply FormatRemove",s=>{const a=y.from(s.node).map(i=>zs(i)?i:i.startContainer).bind(i=>J(i)?y.some(i):y.from(i.parentElement)).getOrThunk(()=>H0(r));q0(r,a,o.get())})})(n,t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(o,r,s)=>{var i,l,d;i=o,l=r,d=s,Pt(t).formatter.apply(i,l,d)},remove:(o,r,s,a)=>{var l,d,c,u;l=o,d=r,c=s,u=a,Pt(t).formatter.remove(l,d,c,u)},toggle:(o,r,s)=>{var i,l,d;i=o,l=r,d=s,Pt(t).formatter.toggle(i,l,d)},match:(o,r,s,a)=>{return l=o,d=r,c=s,u=a,Pt(t).formatter.match(l,d,c,u);var l,d,c,u},closest:o=>{return s=o,Pt(t).formatter.closest(s);var s},matchAll:(o,r)=>{return a=o,i=r,Pt(t).formatter.matchAll(a,i);var a,i},matchNode:(o,r,s,a)=>{return l=o,d=r,c=s,u=a,Pt(t).formatter.matchNode(l,d,c,u);var l,d,c,u},canApply:o=>{return s=o,Pt(t).formatter.canApply(s);var s},formatChanged:(o,r,s,a)=>{return l=n,d=o,c=r,u=s,f=a,Pt(t).formatter.formatChanged(l,d,c,u,f);var l,d,c,u,f},getCssText:et(YE,t)};var o},Vv=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},qv=t=>{const e=so(),n=Wt(0),o=Wt(0),r={data:[],typing:!1,beforeChange:()=>{var a,i;a=n,i=e,Pt(t).undoManager.beforeChange(a,i)},add:(s,a)=>{return l=r,d=o,c=n,u=e,f=s,m=a,Pt(t).undoManager.add(l,d,c,u,f,m);var l,d,c,u,f,m},dispatchChange:()=>{t.setDirty(!0);const s=Fi(t);s.bookmark=Bd(t.selection),t.dispatch("change",{level:s,lastLevel:Fl(r.data,o.get()).getOrUndefined()})},undo:()=>{return a=r,i=n,l=o,Pt(t).undoManager.undo(a,i,l);var a,i,l},redo:()=>{return a=o,i=r.data,Pt(t).undoManager.redo(a,i);var a,i},clear:()=>{var a,i;a=r,i=o,Pt(t).undoManager.clear(a,i)},reset:()=>{var a;a=r,Pt(t).undoManager.reset(a)},hasUndo:()=>{return a=r,i=o,Pt(t).undoManager.hasUndo(a,i);var a,i},hasRedo:()=>{return a=r,i=o,Pt(t).undoManager.hasRedo(a,i);var a,i},transact:s=>{return i=r,l=n,d=s,Pt(t).undoManager.transact(i,l,d);var i,l,d},ignore:s=>{var i,l;i=n,l=s,Pt(t).undoManager.ignore(i,l)},extra:(s,a)=>{var l,d,c,u;l=r,d=o,c=s,u=a,Pt(t).undoManager.extra(l,d,c,u)}};return On(t)||((s,a,i)=>{const l=Wt(!1),d=c=>{Ui(a,!1,i),a.add({},c)};s.on("init",()=>{a.add()}),s.on("BeforeExecCommand",c=>{Vv(c.command)||(kv(a,i),a.beforeChange())}),s.on("ExecCommand",c=>{Vv(c.command)||d(c)}),s.on("ObjectResizeStart cut",()=>{a.beforeChange()}),s.on("SaveContent ObjectResized blur",d),s.on("dragend",d),s.on("keyup",c=>{const u=c.keyCode;c.isDefaultPrevented()||((u>=33&&u<=36||u>=37&&u<=40||45===u||c.ctrlKey)&&(d(),s.nodeChanged()),46!==u&&8!==u||s.nodeChanged(),l.get()&&a.typing&&!ku(Fi(s),a.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged()))}),s.on("keydown",c=>{const u=c.keyCode;c.isDefaultPrevented()||(u>=33&&u<=36||u>=37&&u<=40||45===u?a.typing&&d(c):!(u<16||u>20)||224===u||91===u||a.typing||c.ctrlKey&&!c.altKey||c.metaKey||(a.beforeChange(),Ui(a,!0,i),a.add({},c),l.set(!0)))}),s.on("mousedown",c=>{a.typing&&d(c)}),s.on("input",c=>{var u,f;c.inputType&&("insertReplacementText"===c.inputType||"insertText"===(u=c).inputType&&null===u.data||"insertFromPaste"===(f=c).inputType||"insertFromDrop"===f.inputType)&&d(c)}),s.on("AddUndo Undo Redo ClearUndos",c=>{c.isDefaultPrevented()||s.nodeChanged()})})(t,r,n),(s=t).addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo"),r;var s},XE=[9,27,ot.HOME,ot.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ot.DOWN,ot.UP,ot.LEFT,ot.RIGHT].concat(vt.browser.isFirefox()?[224]:[]),Wv="data-mce-placeholder",Kv=t=>"keydown"===t.type||"keyup"===t.type,Gv=t=>{const e=t.keyCode;return e===ot.BACKSPACE||e===ot.DELETE},QE=(t,e)=>({from:t,to:e}),Ru=(t,e)=>{const n=R(t),o=R(e.container());return Ei(n,o).map(r=>({block:r,position:e}))},Yv=t=>{const e=(t=>{const e=ae(t);return ts(e,an).fold(G(e),n=>e.slice(0,n))})(t);return j(e,Ot),e},Xv=(t,e)=>{const n=Vn(e,t);return Vt(n.reverse(),o=>te(o)).each(Ot)},ZE=(t,e,n,o)=>{if(te(n))return Do(n),we(n.dom);0===ut(Lf(o),s=>!te(s)).length&&te(e)&&Ie(o,Jt("br"));const r=ze(n.dom,F.before(o.dom));return j(Yv(e),s=>{Ie(o,s)}),Xv(t,e),r},tN=(t,e,n)=>{if(te(n))return Ot(n),te(e)&&Do(e),we(e.dom);const o=En(n.dom);return j(Yv(e),r=>{qt(n,r)}),Xv(t,e),o},Qv=(t,e)=>{_r(t,e.dom).bind(n=>y.from(n.getNode())).map(R).filter(Bo).each(Ot)},Jv=(t,e,n)=>{return Qv(!0,e),Qv(!1,n),(o=e,r=n,Fn(r,o)?((s,a)=>{const i=Vn(a,s);return y.from(i[i.length-1])})(r,o):y.none()).fold(et(tN,t,e,n),et(ZE,t,e,n));var o,r},Zv=(t,e,n,o)=>e?Jv(t,o,n):Jv(t,n,o),Au=(t,e)=>{const n=R(t.getBody());return(r=n.dom,s=e,a=t.selection.getRng(),a.collapsed?((i,l,d)=>{const c=Ru(i,F.fromRangeStart(d)),u=c.bind(f=>Ue(l,i,f.position).bind(m=>Ru(i,m).map(g=>{return h=i,p=l,It((v=g).position.getNode())&&!te(v.block)?_r(!1,v.block.dom).bind(b=>b.isEqual(v.position)?Ue(p,h,b).bind(C=>Ru(h,C)):y.some(v)).getOr(v):v;var h,p,v})));return ve(c,u,QE).filter(f=>{return!wt((m=f).from.block,m.to.block)&&(m=>Me(m.from.block).bind(g=>Me(m.to.block).filter(h=>wt(g,h))).isSome())(f)&&(m=>!1===At(m.from.block.dom)&&!1===At(m.to.block.dom))(f);var m})})(r,s,a):y.none()).map(r=>()=>{Zv(n,e,r.from.block,r.to.block).each(s=>{t.selection.setRng(s.toRange())})});var r,s,a},ty=(t,e)=>{const n=R(e),o=et(wt,t);return mr(n,za,o).isSome()},Ou=(t,e)=>t.selection.isCollapsed()?y.none():(t=>{const e=R(t.getBody());return((n,o)=>{const r=ze(n.dom,F.fromRangeStart(o)).isNone(),s=Ee(n.dom,F.fromRangeEnd(o)).isNone();return!(ty(a=n,(i=o).startContainer)||ty(a,i.endContainer))&&r&&s;var a,i})(e,t.selection.getRng())?(n=t,y.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,o)=>{const r=o.getRng();return ve(Ei(n,R(r.startContainer)),Ei(n,R(r.endContainer)),(s,a)=>wt(s,a)?y.none():y.some(()=>{r.deleteContents(),Zv(n,!0,s,a).each(i=>{o.setRng(i.toRange())})})).getOr(y.none())})(e,t.selection);var n})(t),qn=(t,e,n,o,r)=>y.from(e._selectionOverrides.showCaret(t,n,o,r)),oa=(t,e)=>t.dispatch("BeforeObjectSelected",{target:e}).isDefaultPrevented()?y.none():y.some((n=>{const o=n.ownerDocument.createRange();return o.selectNode(n),o})(e)),Tu=(t,e,n)=>e.collapsed?((o,r,s)=>{const a=zd(1,o.getBody(),r),i=F.fromRangeStart(a),l=i.getNode();if(Ds(l))return qn(1,o,l,!i.isAtEnd(),!1);const d=i.getNode(!0);if(Ds(d))return qn(1,o,d,!1,!1);const c=Go(o.dom.getRoot(),i.getNode());return Ds(c)?qn(1,o,c,!1,s):y.none()})(t,e,n).getOr(e):e,nN=t=>fo(t)||Ws(t),oN=t=>go(t)||Ks(t),ey=(t,e,n,o,r,s)=>{var a,i;qn(o,t,s.getNode(!r),r,!0).each(a=>{if(e.collapsed){const i=e.cloneRange();r?i.setEnd(a.startContainer,a.startOffset):i.setStart(a.endContainer,a.endOffset),i.deleteContents()}else e.deleteContents();t.selection.setRng(a)}),a=t.dom,z(i=n)&&0===i.data.length&&a.remove(i)},Bu=(t,e)=>((n,o)=>{const r=n.selection.getRng();if(!z(r.commonAncestorContainer))return y.none();const s=o?Kt.Forwards:Kt.Backwards,a=_n(n.getBody()),i=et(jd,o?a.next:a.prev),l=o?nN:oN,d=Fs(s,n.getBody(),r),c=i(d),u=c&&Ve(o,c);if(!u||!ai(d,u))return y.none();if(l(u))return y.some(()=>ey(n,r,d.getNode(),s,o,u));const f=i(u);return f&&l(f)&&ai(u,f)?y.some(()=>ey(n,r,d.getNode(),s,o,f)):y.none()})(t,e),Du=(t,e)=>{const n=t.getBody();return e?we(n).filter(fo):En(n).filter(go)},Pu=t=>{const e=t.selection.getRng();return!e.collapsed&&(Du(t,!0).exists(n=>n.isEqual(F.fromRangeStart(e)))||Du(t,!1).exists(n=>n.isEqual(F.fromRangeEnd(e))))},We=xn([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),ny=(t,e,n)=>Ue(e,t,n).bind(o=>{return r=o.getNode(),Q(r)&&(za(R(r))||vs(R(r)))||((s,a,i,l)=>{const d=c=>sd(R(c))&&!kn(i,l,s);return qp(!a,i).fold(()=>qp(a,l).fold(Tt,d),d)})(t,e,n,o)?y.none():e&&At(o.getNode())||!e&&At(o.getNode(!0))?((s,a,i,l)=>{const d=l.getNode(!a);return Ei(R(s),R(i.getNode())).map(c=>te(c)?We.remove(c.dom):We.moveToElement(d)).orThunk(()=>y.some(We.moveToElement(d)))})(t,e,n,o):e&&go(n)||!e&&fo(n)?y.some(We.moveToPosition(o)):y.none();var r}),oy=(t,e)=>y.from(Go(t.getBody(),e)),ry=t=>{const e=t.dom,n=t.selection,o=Go(t.getBody(),n.getNode());if(Cn(o)&&e.isBlock(o)&&e.isEmpty(o)){const r=e.create("br",{"data-mce-bogus":"1"});e.setHTML(o,""),o.appendChild(r),n.setRng(F.before(r).toRange())}return!0},Lu=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=t.selection.getNode();return oy(t,n).filter(At).fold(()=>((o,r,s)=>{const a=zd(r?1:-1,o,s),i=F.fromRangeStart(a),l=R(o);return!r&&go(i)?y.some(We.remove(i.getNode(!0))):r&&fo(i)?y.some(We.remove(i.getNode())):!r&&fo(i)&&Nc(l,i)?y_(l,i).map(d=>We.remove(d.getNode())):r&&go(i)&&Ec(l,i)?C_(l,i).map(d=>We.remove(d.getNode())):(d=o,((f,m)=>{const g=m.getNode(!f),h=f?"after":"before";return J(g)&&g.getAttribute("data-mce-caret")===h})(c=r,u=i)?(f=c,m=u.getNode(!c),Ft(m)?y.none():f&&At(m.nextSibling)?y.some(We.moveToElement(m.nextSibling)):!f&&At(m.previousSibling)?y.some(We.moveToElement(m.previousSibling)):y.none()).orThunk(()=>ny(d,c,u)):ny(d,c,u).bind(f=>((m,g,h)=>h.fold(p=>y.some(We.remove(p)),p=>y.some(We.moveToElement(p)),p=>kn(g,p,m)?y.none():y.some(We.moveToPosition(p))))(d,u,f)));var d,c,u,f,m})(t.getBody(),e,t.selection.getRng()).map(o=>()=>{return o.fold((r=t,s=e,a=>(r._selectionOverrides.hideFakeCaret(),Wo(r,s,R(a)),!0)),((r,s)=>a=>{const i=s?F.before(a):F.after(a);return r.selection.setRng(i.toRange()),!0})(t,e),(r=>s=>(r.selection.setRng(s.toRange()),!0))(t));var r,s}),()=>y.some(pt))})(t,e):((n,o)=>{const r=n.selection.getNode();return At(r)&&!Ua(r)?oy(n,r.parentNode).filter(At).fold(()=>y.some(()=>{var s;s=R(n.getBody()),j(ye(s,".mce-offscreen-selection"),Ot),Wo(n,o,R(n.selection.getNode())),Bc(n)}),()=>y.some(pt)):Pu(n)?y.some(()=>{Gb(n,n.selection.getRng(),R(n.getBody()))}):y.none()})(t,e),Mu=(t,e)=>t.selection.isCollapsed()?((n,o)=>{const r=F.fromRangeStart(n.selection.getRng());return Ue(o,n.getBody(),r).filter(s=>o?g_(s):p_(s)).bind(s=>Ud(o?0:-1,s)).map(s=>()=>n.selection.select(s))})(t,e):y.none(),zr=z,sy=t=>zr(t)&&t.data[0]===ie,ay=t=>zr(t)&&t.data[t.data.length-1]===ie,iy=t=>{var e;return(null!==(e=t.ownerDocument)&&void 0!==e?e:document).createTextNode(ie)},Wi=(t,e)=>t?(n=>{var o;if(zr(n.previousSibling))return ay(n.previousSibling)||n.previousSibling.appendData(ie),n.previousSibling;if(zr(n))return sy(n)||n.insertData(0,ie),n;{const r=iy(n);return null===(o=n.parentNode)||void 0===o||o.insertBefore(r,n),r}})(e):(n=>{var o,r;if(zr(n.nextSibling))return sy(n.nextSibling)||n.nextSibling.insertData(0,ie),n.nextSibling;if(zr(n))return ay(n)||n.appendData(ie),n;{const s=iy(n);return n.nextSibling?null===(o=n.parentNode)||void 0===o||o.insertBefore(s,n.nextSibling):null===(r=n.parentNode)||void 0===r||r.appendChild(s),s}})(e),sN=et(Wi,!0),aN=et(Wi,!1),ly=(t,e)=>z(t.container())?Wi(e,t.container()):Wi(e,t.getNode()),dy=(t,e)=>{const n=e.get();return n&&t.container()===n&&hr(n)},Iu=(t,e)=>e.fold(n=>{jo(t.get());const o=sN(n);return t.set(o),y.some(F(o,o.length-1))},n=>we(n).map(o=>{if(dy(o,t)){const r=t.get();return F(r,1)}{jo(t.get());const r=ly(o,!0);return t.set(r),F(r,1)}}),n=>En(n).map(o=>{if(dy(o,t)){const r=t.get();return F(r,r.length-1)}{jo(t.get());const r=ly(o,!1);return t.set(r),F(r,r.length-1)}}),n=>{jo(t.get());const o=aN(n);return t.set(o),y.some(F(o,1))}),cy=(t,e)=>{for(let n=0;n<t.length;n++){const o=t[n].apply(null,e);if(o.isSome())return o}return y.none()},ce=xn([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),uy=(t,e)=>lo(e,t)||t,iN=(t,e,n)=>{const o=$b(n),r=uy(e,o.container());return po(t,r,o).fold(()=>Ee(r,o).bind(et(po,t,r)).map(s=>ce.before(s)),y.none)},lN=(t,e)=>null===$o(t,e),my=(t,e,n)=>po(t,e,n).filter(et(lN,e)),dN=(t,e,n)=>{const o=Vb(n);return my(t,e,o).bind(r=>ze(r,o).isNone()?y.some(ce.start(r)):y.none())},cN=(t,e,n)=>{const o=$b(n);return my(t,e,o).bind(r=>Ee(r,o).isNone()?y.some(ce.end(r)):y.none())},uN=(t,e,n)=>{const o=Vb(n),r=uy(e,o.container());return po(t,r,o).fold(()=>ze(r,o).bind(et(po,t,r)).map(s=>ce.after(s)),y.none)},fy=t=>{return e=Fu(t),!("rtl"===_t.DOM.getStyle(e,"direction",!0)||(o=null!==(n=e.textContent)&&void 0!==n?n:"",E_.test(o)));var o,e,n},Tn=(t,e,n)=>cy([iN,dN,cN,uN],[t,e,n]).filter(fy),Fu=t=>t.fold(he,he,he,he),gy=t=>t.fold(G("before"),G("start"),G("end"),G("after")),Ki=t=>t.fold(ce.before,ce.before,ce.after,ce.after),Uu=t=>t.fold(ce.start,ce.start,ce.end,ce.end),mN=(t,e,n,o,r,s)=>ve(po(e,n,o),po(e,n,r),(a,i)=>a!==i&&((l,d,c)=>{const u=lo(d,l),f=lo(c,l);return Q(u)&&u===f})(n,a,i)?ce.after(t?a:i):s).getOr(s),fN=(t,e)=>t.fold(Ut,n=>{return r=e,!(gy(o=n)===gy(r)&&Fu(o)===Fu(r));var o,r}),gN=(t,e)=>t?e.fold(wo(y.some,ce.start),y.none,wo(y.some,ce.after),y.none):e.fold(y.none,wo(y.some,ce.before),y.none,wo(y.some,ce.end)),py=(t,e,n)=>{const o=t?1:-1;return e.setRng(F(n.container(),n.offset()+o).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0};var Bn;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(Bn||(Bn={}));const Gi=(t,e)=>t===Kt.Backwards?es(e):e,pN=(t,e,n)=>t===Kt.Forwards?e.next(n):e.prev(n),hN=(t,e,n,o)=>It(o.getNode(e===Kt.Forwards))?Bn.Br:!1===kn(n,o)?Bn.Block:Bn.Wrap,hy=(t,e,n,o)=>{const r=_n(n);let s=o;const a=[];for(;s;){const i=pN(e,r,s);if(!i)break;if(It(i.getNode(!1)))return e===Kt.Forwards?{positions:Gi(e,a).concat([i]),breakType:Bn.Br,breakAt:y.some(i)}:{positions:Gi(e,a),breakType:Bn.Br,breakAt:y.some(i)};if(i.isVisible()){if(t(s,i)){const l=hN(0,e,s,i);return{positions:Gi(e,a),breakType:l,breakAt:y.some(i)}}a.push(i),s=i}else s=i}return{positions:Gi(e,a),breakType:Bn.Eol,breakAt:y.none()}},by=(t,e,n,o)=>e(n,o).breakAt.map(r=>{const s=e(n,r).positions;return t===Kt.Backwards?s.concat(r):[r].concat(s)}).getOr([]),zu=(t,e)=>Oe(t,(n,o)=>n.fold(()=>y.some(o),r=>ve(_e(r.getClientRects()),_e(o.getClientRects()),(s,a)=>{const i=Math.abs(e-s.left);return Math.abs(e-a.left)<=i?o:r}).or(n)),y.none()),Yi=(t,e)=>_e(e.getClientRects()).bind(n=>zu(t,n.left)),ra=et(hy,F.isAbove,-1),sa=et(hy,F.isBelow,1),vy=et(by,-1,ra),yy=et(by,1,sa),bN=(t,e)=>Yi(vy(t,e),e),vN=(t,e)=>Yi(yy(t,e),e),yN=At,Cy=(t,e)=>Math.abs(t.left-e),wy=(t,e)=>Math.abs(t.right-e),xy=(t,e)=>Ea(t,(n,o)=>{const r=Math.min(Cy(n,e),wy(n,e)),s=Math.min(Cy(o,e),wy(o,e));return s===r&&ar(o,"node")&&yN(o.node)||s<r?o:n}),CN=t=>{const e=n=>bt(n,o=>{const r=Uo(o);return r.node=t,r});if(J(t))return e(t.getClientRects());if(z(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}return[]},ky=t=>Ln(t,CN);var aa;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(aa||(aa={}));const Sy=(t,e,n,o,r,s)=>{let a=0;const i=[],l=u=>{let f=ky([u]);-1===t&&(f=f.reverse());for(let m=0;m<f.length;m++){const g=f[m];if(!n(g,d)){if(i.length>0&&e(g,ko(i))&&a++,g.line=a,r(g))return!0;i.push(g)}}return!1},d=ko(s.getClientRects());if(!d)return i;const c=s.getNode();return c&&(l(c),((u,f,m,g)=>{let h=g;for(;h=Ls(h,u,bg,f);)if(m(h))return})(t,o,l,c)),i},wN=et(Sy,aa.Up,Ns,Rs),xN=et(Sy,aa.Down,Rs,Ns),_y=t=>ko(t.getClientRects()),Ey=t=>e=>e.line>t,ju=t=>e=>e.line===t,Wn=(t,e)=>{t.selection.setRng(e),qs(t,t.selection.getRng())},Hu=(t,e,n)=>y.some(Tu(t,e,n)),Ny=(t,e,n,o,r,s)=>{const a=e===Kt.Forwards,i=_n(t.getBody()),l=et(jd,a?i.next:i.prev),d=a?o:r;if(!n.collapsed){const g=Ja(n);if(s(g))return qn(e,t,g,e===Kt.Backwards,!1);if(Pu(t)){const h=n.cloneRange();return h.collapse(e===Kt.Backwards),y.from(h)}}const c=Fs(e,t.getBody(),n);if(d(c))return oa(t,c.getNode(!a));let u=l(c);const f=gg(n);if(!u)return f?y.some(n):y.none();if(u=Ve(a,u),d(u))return qn(e,t,u.getNode(!a),a,!1);const m=l(u);return m&&d(m)&&ai(u,m)?qn(e,t,m.getNode(!a),a,!1):f?Hu(t,u.toRange(),!1):y.none()},Ry=(t,e,n,o,r,s)=>{const a=Fs(e,t.getBody(),n),i=ko(a.getClientRects()),l=e===aa.Down,d=t.getBody();if(!i)return y.none();if(Pu(t)){const h=l?F.fromRangeEnd(n):F.fromRangeStart(n);return(l?vN:bN)(d,h).orThunk(()=>y.from(h)).map(p=>p.toRange())}const c=(l?xN:wN)(d,Ey(1),a),u=ut(c,ju(1)),f=i.left,m=xy(u,f);if(m&&s(m.node)){const h=Math.abs(f-m.left),p=Math.abs(f-m.right);return qn(e,t,m.node,h<p,!1)}let g;if(g=o(a)?a.getNode():r(a)?a.getNode(!0):Ja(n),g){const h=((v,b,C,w)=>{const k=_n(b);let x,E,S,O;const B=[];let _=0;1===v?(x=k.next,E=Rs,S=Ns,O=F.after(w)):(x=k.prev,E=Ns,S=Rs,O=F.before(w));const D=_y(O);do{if(!O.isVisible())continue;const M=_y(O);if(S(M,D))continue;B.length>0&&E(M,ko(B))&&_++;const U=Uo(M);if(U.position=O,U.line=_,C(U))return B;B.push(U)}while(O=x(O));return B})(e,d,Ey(1),g);let p=xy(ut(h,ju(1)),f);if(p||(p=ko(ut(h,ju(0))),p))return Hu(t,p.position.toRange(),!1)}return 0===u.length?$u(t,l).filter(l?r:o).map(h=>Tu(t,h.toRange(),!1)):y.none()},$u=(t,e)=>{const n=t.selection.getRng(),o=e?F.fromRangeEnd(n):F.fromRangeStart(n),r=(s=o.container(),a=t.getBody(),mr(R(s),i=>xS(i.dom),i=>i.dom===a).map(i=>i.dom).getOr(a));var s,a;if(e){const i=sa(r,o);return xo(i.positions)}{const i=ra(r,o);return _e(i.positions)}},Ay=(t,e,n)=>$u(t,e).filter(n).exists(o=>(t.selection.setRng(o.toRange()),!0)),Xi=(t,e)=>{const n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},Oy=(t,e)=>{t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},Ty=(t,e,n)=>Iu(e,n).map(o=>(Xi(t,o),n)),By=(t,e,n)=>!!Bs(t)&&((t,e,n)=>{const o=t.getBody(),r=((s,a,i)=>{const l=F.fromRangeStart(s);if(s.collapsed)return l;{const d=F.fromRangeEnd(s);return i?ze(a,d).getOr(d):Ee(a,l).getOr(l)}})(t.selection.getRng(),o,n);return((s,a,i,l)=>{const d=Ve(s,l),c=Tn(a,i,d);return Tn(a,i,d).bind(et(gN,s)).orThunk(()=>((u,f,m,g,h)=>{const p=Ve(u,h);return Ue(u,m,p).map(et(Ve,u)).fold(()=>g.map(Ki),v=>Tn(f,m,v).map(et(mN,u,f,m,p,v)).filter(et(fN,g))).filter(fy)})(s,a,i,c,l))})(n,et(Ko,t),o,r).bind(s=>Ty(t,e,s))})(t,e,n).isSome(),Dy=(t,e,n)=>!!Bs(e)&&((o,r)=>{const s=r.selection.getRng(),a=o?F.fromRangeEnd(s):F.fromRangeStart(s);return!!yt(r.selection.getSel().modify)&&(o&&dd(a)?py(!0,r.selection,a):!(o||!cd(a))&&py(!1,r.selection,a))})(t,e),_N=et(Dy,!0),EN=et(Dy,!1),Qi=(t,e,n)=>{if(Bs(t)){const o=$u(t,e).getOrThunk(()=>{const r=t.selection.getRng();return e?F.fromRangeEnd(r):F.fromRangeStart(r)});return Tn(et(Ko,t),t.getBody(),o).exists(r=>{const s=Ki(r);return Iu(n,s).exists(a=>(Xi(t,a),!0))})}return!1},Py=(t,e)=>n=>Iu(e,n).map(o=>()=>Xi(t,o)),Ly=(t,e,n,o)=>{const r=t.getBody(),s=et(Ko,t);t.undoManager.ignore(()=>{t.selection.setRng(((a,i)=>{const l=document.createRange();return l.setStart(a.container(),a.offset()),l.setEnd(i.container(),i.offset()),l})(n,o)),Wb(t),Tn(s,r,F.fromRangeStart(t.selection.getRng())).map(Uu).bind(Py(t,e)).each(Jr)}),t.nodeChanged()},Vu=(t,e,n)=>{if(t.selection.isCollapsed()&&Bs(t)){const o=F.fromRangeStart(t.selection.getRng());return((r,s,a,i)=>{const l=(u=r.getBody(),f=i.container(),lo(f,u)||u),d=et(Ko,r),c=Tn(d,l,i);var u,f;return c.bind(u=>a?u.fold(G(y.some(Uu(u))),y.none,G(y.some(Ki(u))),y.none):u.fold(y.none,G(y.some(Ki(u))),y.none,G(y.some(Uu(u))))).map(Py(r,s)).getOrThunk(()=>{const u=li(a,l,i),f=u.bind(m=>Tn(d,l,m));return ve(c,f,()=>po(d,l,i).bind(m=>{return ve(we(g=m),En(g),(h,p)=>{const v=Ve(!0,h),b=Ve(!1,p);return Ee(g,v).forall(C=>C.isEqual(b))}).getOr(!0)?y.some(()=>{Wo(r,a,R(m))}):y.none();var g})).getOrThunk(()=>f.bind(()=>u.map(m=>()=>{a?Ly(r,s,i,m):Ly(r,s,m,i)})))})})(t,e,n,o)}return y.none()},NN=t=>1===Ff(t),qu=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=R(t.getBody()),o=R(t.selection.getStart()),r=ut(((s,a)=>{const i=Vn(a,s);return ts(i,an).fold(G(i),l=>i.slice(0,l))})(n,o),NN);return xo(r).bind(s=>{const a=F.fromRangeStart(t.selection.getRng());return l=e,d=a,!ve(we(c=s.dom),En(c),(u,f)=>{const m=Ve(!0,u),g=Ve(!1,f),h=Ve(!1,d);return l?Ee(c,h).exists(p=>p.isEqual(g)&&d.isEqual(m)):ze(c,h).exists(p=>p.isEqual(m)&&d.isEqual(g))}).getOr(!0)||cn((i=s).dom)&&f0(i.dom)?y.none():y.some(()=>((l,d,c,u)=>{const f=et(j_,d),m=bt(ut(u,f),g=>g.dom);if(0===m.length)Wo(d,l,c);else{const g=((h,p)=>{const v=Zc(!1),b=h0(p,v.dom);return Ie(R(h),v),Ot(R(h)),F(b,0)})(c.dom,m);d.selection.setRng(g.toRange())}})(e,t,s,r));var l,d,c,i})})(t,e):y.none(),Wu=(t,e,n)=>Q(n)?y.some(()=>{t._selectionOverrides.hideFakeCaret(),Wo(t,e,R(n))}):y.none(),Ku=(t,e)=>t.selection.isCollapsed()?((n,o)=>{const r=o?Ws:Ks,a=Fs(o?Kt.Forwards:Kt.Backwards,n.getBody(),n.selection.getRng());return r(a)?Wu(n,o,a.getNode(!o)):y.from(Ve(o,a)).filter(i=>r(i)&&ai(a,i)).bind(i=>Wu(n,o,i.getNode(!o)))})(t,e):((n,o)=>{const r=n.selection.getNode();return wn(r)?Wu(n,o,r):y.none()})(t,e),Gu=t=>Na(null!=t?t:"").getOr(0),My=(t,e)=>(t||"table"===Bt(e)?"margin":"padding")+("rtl"===yn(e,"direction")?"-right":"-left"),Iy=t=>{const e=Uy(t);return!t.mode.isReadOnly()&&(e.length>1||(n=t,rr(e,r=>{const s=My(_p(n),r),a=Pa(r,s).map(Gu).getOr(0);return"false"!==n.dom.getContentEditable(r.dom)&&a>0})));var n},Fy=t=>ad(t)||vs(t),Uy=t=>{return ut((e=t.selection.getSelectedBlocks(),bt(e,R)),n=>!Fy(n)&&!Me(n).exists(Fy)&&fr(n,o=>Cn(o.dom)||At(o.dom)).exists(o=>Cn(o.dom)));var e},zy=(t,e)=>{var n,o;const{dom:r}=t,s=wk(t),a=null!==(o=null===(n=/[a-z%]+$/i.exec(s))||void 0===n?void 0:n[0])&&void 0!==o?o:"px",i=Gu(s),l=_p(t);j(Uy(t),d=>{((c,u,f,m,g,h)=>{const p=My(f,R(h)),v=Gu(c.getStyle(h,p));if("outdent"===u){const b=Math.max(0,v-m);c.setStyle(h,p,b?b+g:"")}else c.setStyle(h,p,v+m+g)})(r,e,l,i,a,d.dom)})},jy=t=>zy(t,"outdent"),Hy=t=>{if(t.selection.isCollapsed()&&Iy(t)){const e=t.dom,n=t.selection.getRng(),o=F.fromRangeStart(n),r=e.getParent(n.startContainer,e.isBlock);if(null!==r&&_c(R(r),o))return y.some(()=>jy(t))}return y.none()},$y=(t,e,n)=>sr([Hy,Lu,Bu,(o,r)=>Vu(o,e,r),Au,zc,Mu,Ku,Ou,qu],o=>o(t,n)),Vy=t=>void 0===t.touches||1!==t.touches.length?y.none():y.some(t.touches[0]),Yu=(t,e)=>gt(t,e.nodeName),ON=(t,e)=>!!z(e)||!!J(e)&&!Yu(t,e)&&!je(e),TN=(t,e)=>!(!z(e)||0!==e.data.length&&(!/^\s+$/.test(e.data)||e.nextSibling&&!Yu(t,e.nextSibling))),qy=t=>t.dom.create(Te(t),Ts(t)),BN=t=>{const e=t.dom,n=t.selection,o=t.schema,r=o.getBlockElements(),s=n.getStart(),a=t.getBody();let i,l,d=!1;const c=Te(t);if(!s||!J(s))return;const u=a.nodeName.toLowerCase();if(!o.isValidChild(u,c.toLowerCase())||(C=r,w=a,zt(_b(R(s),R(w)),x=>Yu(C,x.dom))))return;var C,w;const f=n.getRng(),{startContainer:m,startOffset:g,endContainer:h,endOffset:p}=f,v=qo(t);let b=a.firstChild;for(;b;)if(ON(r,b)){if(TN(r,b)){l=b,b=b.nextSibling,e.remove(l);continue}i||(i=qy(t),a.insertBefore(i,b),d=!0),l=b,b=b.nextSibling,i.appendChild(l)}else i=null,b=b.nextSibling;d&&v&&(f.setStart(m,g),f.setEnd(h,p),n.setRng(f),t.nodeChanged())},Wy=(t,e,n)=>{const o=R(qy(t)),r=ld();qt(o,r),n(e,o);const s=document.createRange();return s.setStartBefore(r.dom),s.setEndBefore(r.dom),s},Ky=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),DN=(t,e,n)=>function(o){const r=arguments,s=r[r.length-2],a=s>0?e.charAt(s-1):"";if('"'===a)return o;if(">"===a){const i=e.lastIndexOf("<",s);if(-1!==i&&-1!==e.substring(i,s).indexOf('contenteditable="false"'))return o}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(r[0])+'">'+t.dom.encode("string"==typeof r[1]?r[1]:r[0])+"</span>"},Gy=(t,e)=>{e.hasAttribute("data-mce-caret")&&(ud(e),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(e))},PN=(t,e)=>{const n=bs(R(t.getBody()),"*[data-mce-caret]").map(r=>r.dom).getOrNull();if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void Gy(t,n)):void(fg(n)&&(Gy(t,n),t.undoManager.add()))},Yy=At,Xy=(t,e,n)=>{const o=_n(t.getBody()),r=et(jd,1===e?o.next:o.prev);if(n.collapsed){const s=t.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!r(F.fromRangeStart(n))){const a=R((i=>{const l=i.dom.create(Te(i));return l.innerHTML='<br data-mce-bogus="1">',l})(t));1===e?Zn(R(s),a):Ie(R(s),a),t.selection.select(a.dom,!0),t.selection.collapse()}}},Qy=(t,e)=>((n,o)=>{const r=o?Kt.Forwards:Kt.Backwards,s=n.selection.getRng();return(a=r,i=n,l=s,Ny(i,a,l,fo,go,Yy)).orThunk(()=>(Xy(n,r,s),y.none()));var a,i,l})(t,e).exists(n=>(Wn(t,n),!0)),Jy=(t,e)=>((n,o)=>{const r=o?1:-1,s=n.selection.getRng();return(a=r,i=n,l=s,Ry(i,a,l,d=>fo(d)||kb(d),d=>go(d)||Sb(d),Yy)).orThunk(()=>(Xy(n,r,s),y.none()));var a,i,l})(t,e).exists(n=>(Wn(t,n),!0)),Zy=(t,e)=>Ay(t,e,e?go:fo),Ji=(t,e)=>Du(t,!e).map(n=>{const o=n.toRange(),r=t.selection.getRng();return e?o.setStart(r.startContainer,r.startOffset):o.setEnd(r.endContainer,r.endOffset),o}).exists(n=>(Wn(t,n),!0)),LN=t=>Et(["figcaption"],Bt(t)),tC=(t,e)=>!!t.selection.isCollapsed()&&((t,e)=>{const n=R(t.getBody()),o=F.fromRangeStart(t.selection.getRng());return((r,s)=>{const a=et(wt,s);return fr(R(r.container()),an,a).filter(LN)})(o,n).exists(()=>{if(r=n,a=o,e?sa(r.dom,a).breakAt.isNone():ra(r.dom,a).breakAt.isNone()){const r=Wy(t,n,e?qt:Wf);return t.selection.setRng(r),!0}var r,a;return!1})})(t,e),eC={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},nC=(t,e)=>e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey,ft=(t,...e)=>()=>t.apply(null,e),ia=(t,e)=>{return Vt((o=e,Ln(bt(t,s=>it(it({},eC),s)),r=>nC(r,o)?[r]:[])),n=>n.action());var o},oC=(t,e)=>{return sr((o=e,Ln(bt(t,s=>it(it({},eC),s)),r=>nC(r,o)?[r]:[])),n=>n.action());var o},rC=(t,e)=>{const n=e?Kt.Forwards:Kt.Backwards,o=t.selection.getRng();return Ny(t,n,o,Ws,Ks,wn).exists(r=>(Wn(t,r),!0))},sC=(t,e)=>{const n=e?1:-1,o=t.selection.getRng();return Ry(t,n,o,Ws,Ks,wn).exists(r=>(Wn(t,r),!0))},aC=(t,e)=>Ay(t,e,e?Ks:Ws),iC=xn([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),la=kt(it({},iC),{none:t=>iC.none(t)}),lC=(t,e,n)=>Ln(ae(t),o=>rn(o,e)?n(o)?[o]:[]:lC(o,e,n)),dC=(t,e)=>To(t,"table",e),Xu=(t,e,n,o,r=Ut)=>{const s=1===o;if(!s&&n<=0)return la.first(t[0]);if(s&&n>=t.length-1)return la.last(t[t.length-1]);{const a=n+o,i=t[a];return r(i)?la.middle(e,i):Xu(t,e,a,o,r)}},cC=(t,e)=>dC(t,e).bind(n=>{const o=lC(n,"th,td",Ut);return ts(o,r=>wt(t,r)).map(r=>({index:r,all:o}))}),uC=(t,e=!1)=>{return cr(t)?t.dom.isContentEditable:(n=t,To(n,"[contenteditable]")).fold(G(e),o=>"true"===IN(o));var n},IN=t=>t.dom.contentEditable,mC=(t,e,n,o,r)=>{const s=ye(R(n),"td,th,caption").map(i=>i.dom);var i;return((i,l,d)=>Oe(i,(c,u)=>c.fold(()=>y.some(u),f=>{const m=Math.sqrt(Math.abs(f.x-l)+Math.abs(f.y-d)),g=Math.sqrt(Math.abs(u.x-l)+Math.abs(u.y-d));return y.some(g<m?u:f)}),y.none()))(ut((i=t,Ln(s,d=>{const c={left:(u=Uo(d.getBoundingClientRect())).left- -1,top:u.top- -1,right:u.right+-2,bottom:u.bottom+-2,width:u.width+-1,height:u.height+-1};var u;return[{x:c.left,y:i(c),cell:d},{x:c.right,y:i(c),cell:d}]})),i=>e(i,r)),o,r).map(i=>i.cell)},FN=et(mC,t=>t.bottom,(t,e)=>t.y<e),UN=et(mC,t=>t.top,(t,e)=>t.y>e),fC=(t,e,n)=>{const o=t(e,n);return(r=o).breakType===Bn.Wrap&&0===r.positions.length||!It(n.getNode())&&(r=>r.breakType===Bn.Br&&1===r.positions.length)(o)?!((r,s,a)=>a.breakAt.exists(i=>r(s,i).breakAt.isSome()))(t,e,o):o.breakAt.isNone();var r},zN=et(fC,ra),jN=et(fC,sa),HN=(t,e,n,o)=>{const r=t.selection.getRng(),s=e?1:-1;return!(!Up()||!((a,i,l)=>{const d=F.fromRangeStart(i);return _r(!a,l).exists(c=>c.isEqual(d))})(e,r,n)||(qn(s,t,n,!e,!1).each(a=>{Wn(t,a)}),0))},gC=(t,e,n)=>{const o=((s,a)=>{const i=a.getNode(s);return zn(i)?y.some(i):y.none()})(!!e,n),r=!1===e;o.fold(()=>Wn(t,n.toRange()),s=>_r(r,t.getBody()).filter(a=>a.isEqual(n)).fold(()=>Wn(t,n.toRange()),a=>{return i=e,d=s,void(l=t).undoManager.transact(()=>{const c=i?Zn:Ie,u=Wy(l,R(d),c);Wn(l,u)});var i,l,d}))},$N=(t,e,n,o)=>{const r=t.selection.getRng(),s=F.fromRangeStart(r),a=t.getBody();if(!e&&zN(o,s)){const i=(l=a,(u=d=n,f=c=s,_e(f.getClientRects()).bind(m=>FN(u,m.left,m.top)).bind(m=>{return Yi(En(g=m).map(h=>ra(g,h).positions.concat(h)).getOr([]),f);var g})).orThunk(()=>_e(c.getClientRects()).bind(u=>zu(vy(l,F.before(d)),u.left))).getOr(F.before(d)));return gC(t,e,i),!0}var l,d,c,u,f;if(e&&jN(o,s)){const i=((l,d,c)=>((u,f)=>xo(f.getClientRects()).bind(m=>UN(u,m.left,m.top)).bind(m=>{return Yi(we(g=m).map(h=>[h].concat(sa(g,h).positions)).getOr([]),f);var g}))(d,c).orThunk(()=>_e(c.getClientRects()).bind(u=>zu(yy(l,F.after(d)),u.left))).getOr(F.after(d)))(a,n,s);return gC(t,e,i),!0}return!1},pC=(t,e,n)=>y.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(o=>y.from(t.dom.getParent(o,"table")).map(r=>n(t,e,r,o))).getOr(!1),hC=(t,e)=>pC(t,e,HN),bC=(t,e)=>pC(t,e,$N),vC=(t,e,n)=>n.fold(y.none,y.none,(o,r)=>{return(s=r,((a,i)=>{const l=d=>{for(let c=0;c<d.childNodes.length;c++){const u=R(d.childNodes[c]);if(i(u))return y.some(u);const f=l(d.childNodes[c]);if(f.isSome())return f}return y.none()};return l(a.dom)})(s,cb)).map(a=>{return(t=>{const e=Tr.getWin(t).dom,n=(r,s,a,i)=>ic(e,r,s,a,i),o=t.match({domRange:s=>{const a=R(s.startContainer),i=R(s.endContainer);return Uh(a,s.startOffset,i,s.endOffset)},relative:HS,exact:Uh});return((r,s)=>{var i;return((i,l)=>{const d=l.ltr();return d.collapsed?l.rtl().filter(c=>!1===c.collapsed).map(c=>Vs.rtl(R(c.endContainer),c.endOffset,R(c.startContainer),c.startOffset)).getOrThunk(()=>Ih(0,Vs.ltr,d)):Ih(0,Vs.ltr,d)})(0,(i=r,s.match({domRange:d=>({ltr:G(d),rtl:y.none}),relative:(d,c)=>({ltr:So(()=>Mh(i,d,c)),rtl:So(()=>y.some(Mh(i,c,d)))}),exact:(d,c,u,f)=>({ltr:So(()=>ic(i,d,c,u,f)),rtl:So(()=>y.some(ic(i,u,f,d,c)))})})))})(e,o).match({ltr:n,rtl:n})})(Tr.exact(i=a,0,i,0));var i});var s},o=>(t.execCommand("mceTableInsertRowAfter"),yC(t,e,o))),yC=(t,e,n)=>{return vC(t,e,(r=uC,cC(o=n,void 0).fold(()=>la.none(o),s=>Xu(s.all,o,s.index,1,r))));var o,r},VN=(t,e,n)=>{return vC(t,e,(r=uC,cC(o=n,void 0).fold(()=>la.none(),s=>Xu(s.all,o,s.index,-1,r))));var o,r},CC=(t,e)=>{const n=["table","li","dl"],o=R(t.getBody()),r=a=>{const i=Bt(a);return wt(a,o)||Et(n,i)},s=t.selection.getRng();return(a=R(e?s.endContainer:s.startContainer),i=r,((l,d,c=Tt)=>c(d)?y.none():Et(l,Bt(d))?y.some(d):hs(d,l.join(","),u=>rn(u,"table")||c(u)))(["td","th"],a,i)).map(a=>(dC(a,r).each(i=>{t.model.table.clearSelectedCells(i.dom)}),t.selection.collapse(!e),(e?yC:VN)(t,r,a).each(i=>{t.selection.setRng(i)}),!0)).getOr(!1);var a,i},gn=(t,e)=>({container:t,offset:e}),Zi=_t.DOM,tl=t=>e=>t===e?-1:0,Qu=(t,e,n)=>{if(z(t)&&e>=0)return y.some(gn(t,e));{const o=Fo(Zi);return y.from(o.backwards(t,e,tl(t),n)).map(r=>gn(r.container,r.container.data.length))}},Ju=(t,e,n)=>{if(!z(t))return y.none();if(e>=0&&e<=t.data.length)return y.some(gn(t,e));{const r=Fo(Zi);return y.from(r.backwards(t,e,tl(t),n)).bind(s=>Ju(s.container,e+s.container.data.length,n))}},wC=(t,e,n)=>{if(!z(t))return y.none();const o=t.data;if(e<=o.length)return y.some(gn(t,e));{const r=Fo(Zi);return y.from(r.forwards(t,e,tl(t),n)).bind(s=>wC(s.container,e-o.length,n))}},Zu=(t,e,n,o,r)=>{const s=Fo(t,(a=t,i=>a.isBlock(i)||Et(["BR","IMG","HR","INPUT"],i.nodeName)||"false"===a.getContentEditable(i)));var a;return y.from(s.backwards(e,n,o,r))},xC=t=>jn(t.toString().replace(/\u00A0/g," ")),kC=t=>""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t),tm=(t,e)=>t.substring(e.length),SC=(t,e,n,o=0)=>{return(r=R(e.startContainer),To(r,ub)).fold(()=>((s,a,i,l=0)=>{if(!(d=a).collapsed||!z(d.startContainer))return y.none();var d;const c={text:"",offset:0},u=s.getParent(a.startContainer,s.isBlock)||s.getRoot();return Zu(s,a.startContainer,a.startOffset,(f,m,g)=>(c.text=g+c.text,c.offset+=m,((h,p,v)=>{let b;const C=v.charAt(0);for(b=p-1;b>=0;b--){const w=h.charAt(b);if(kC(w))return y.none();if(C===w&&re(h,v,b,p))break}return y.some(b)})(c.text,c.offset,i).getOr(m)),u).bind(f=>{const m=a.cloneRange();if(m.setStart(f.container,f.offset),m.setEnd(a.endContainer,a.endOffset),m.collapsed)return y.none();const g=xC(m);return 0!==g.lastIndexOf(i)||tm(g,i).length<l?y.none():y.some({text:tm(g,i),range:m,trigger:i})})})(t,e,n,o),s=>{const a=t.createRng();a.selectNode(s.dom);const i=xC(a);return y.some({range:a,text:tm(i,n),trigger:n})});var r},_C=t=>{if(3===t.nodeType)return gn(t,t.data.length);{const e=t.childNodes;return e.length>0?_C(e[e.length-1]):gn(t,e.length)}},EC=(t,e)=>{const n=t.childNodes;return n.length>0&&e<n.length?EC(n[e],0):n.length>0&&1===t.nodeType&&n.length===e?_C(n[n.length-1]):gn(t,e)},NC=(t,e,n,o={})=>{var r;const s=e(),a=null!==(r=t.selection.getRng().startContainer.nodeValue)&&void 0!==r?r:"",i=ut(s.lookupByTrigger(n.trigger),d=>n.text.length>=d.minChars&&d.matches.getOrThunk(()=>{return c=t.dom,u=>{const f=EC(u.startContainer,u.startOffset);return!((m,g)=>{var h;const p=null!==(h=m.getParent(g.container,m.isBlock))&&void 0!==h?h:m.getRoot();return Zu(m,g.container,g.offset,(v,b)=>0===b?-1:b,p).filter(v=>{const b=v.container.data.charAt(v.offset-1);return!kC(b)}).isSome()})(c,f)};var c})(n.range,a,n.text));if(0===i.length)return y.none();const l=Promise.all(bt(i,d=>d.fetch(n.text,d.maxResults,o).then(c=>({matchText:n.text,items:c,columns:d.columns,onAction:d.onAction,highlightOn:d.highlightOn}))));return y.some({lookupData:l,context:n})};var Dn;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(Dn||(Dn={}));const em=(t,e,n)=>t.stype===Dn.Error?e(t.serror):n(t.svalue),jr=t=>({stype:Dn.Value,svalue:t}),da=t=>({stype:Dn.Error,serror:t}),qN=em,nm=t=>pe(t)&&Pe(t).length>100?" removed due to size":JSON.stringify(t,null,2),el=(t,e)=>da([{path:t,getErrorInfo:e}]),RC=t=>(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<e.length;o++){const r=e[o];for(const s in r)gt(r,s)&&(n[s]=t(n[s],r[s]))}return n},om=RC((t,e)=>Wm(t)&&Wm(e)?om(t,e):e),AC=(RC((t,e)=>e),t=>({tag:"defaultedThunk",process:G(t)})),OC=(t,e,n)=>{switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},rm=t=>({extract:(e,n)=>{return(o=t(n)).stype===Dn.Error?el(e,G(o.serror)):o;var o},toString:G("val")}),GN=rm(jr),TC=(t,e,n,o)=>o(Rt(t,e).getOrThunk(()=>n(t))),YN=(t,e,n,o,r)=>{const s=i=>r.extract(e.concat([o]),i),a=i=>i.fold(()=>jr(y.none()),l=>{return(c=r.extract(e.concat([o]),l)).stype===Dn.Value?{stype:Dn.Value,svalue:(0,y.some)(c.svalue)}:c;var c});switch(t.tag){case"required":return i=e,c=s,Rt(l=n,d=o).fold(()=>{return f=d,m=l,el(i,()=>'Could not find valid *required* value for "'+f+'" in '+nm(m));var f,m},c);case"defaultedThunk":return TC(n,o,t.process,s);case"option":return((i,l,d)=>d(Rt(i,l)))(n,o,a);case"defaultedOptionThunk":return((i,l,d,c)=>c(Rt(i,l).map(u=>!0===u?d(i):u)))(n,o,t.process,a);case"mergeWithThunk":return TC(n,o,G({}),i=>{const l=om(t.process(n),i);return s(l)})}var i,l,d,c},sm=t=>({extract:(e,n)=>((o,r,s)=>{const a={},i=[];for(const l of s)OC(l,(d,c,u,f)=>{const m=YN(u,o,r,d,f);qN(m,g=>{i.push(...g)},g=>{a[c]=g})},(d,c)=>{a[d]=c(r)});return i.length>0?da(i):jr(a)})(e,n,t),toString:()=>"obj{\n"+bt(t,n=>OC(n,(o,r,s,a)=>o+" -> "+a.toString(),(o,r)=>"state("+o+")")).join("\n")+"}"}),BC=t=>({extract:(e,n)=>(t=>{const e=(o=>{const r=[],s=[];return j(o,a=>{em(a,i=>s.push(i),i=>r.push(i))}),{values:r,errors:s}})(t);return e.errors.length>0?(n=e.errors,wo(da,Qm)(n)):jr(e.values);var n})(bt(n,(r,s)=>t.extract(e.concat(["["+s+"]"]),r))),toString:()=>"array("+t.toString()+")"}),DC=(t,e)=>((t,e)=>({extract:(n,o)=>Rt(o,t).fold(()=>{return s=t,el(n,()=>'Choice schema did not contain choice key: "'+s+'"');var s},r=>{return s=n,a=o,Rt(i=e,l=r).fold(()=>{return c=i,u=l,el(s,()=>'The chosen schema: "'+u+'" did not exist in branches: '+nm(c));var c,u},d=>d.extract(s.concat(["branch: "+l]),a));var s,a,i,l}),toString:()=>"chooseOn("+t+"). Possible values: "+Pe(e)}))(t,Sa(e,sm)),QN=G(GN),nl=(t,e)=>rm(n=>{const o=typeof n;return t(n)?jr(n):da(`Expected type: ${e} but got: ${o}`)}),JN=nl(on,"number"),ol=nl(lt,"string"),ZN=nl(Co,"boolean"),am=nl(yt,"function"),ca=(t,e,n,o)=>({tag:"field",key:t,newKey:e,presence:n,prop:o}),PC=(t,e)=>({tag:"custom",newKey:t,instantiator:e}),LC=(t,e)=>ca(t,t,{tag:"required",process:{}},e),MC=t=>LC(t,ol),IC=t=>LC(t,am),im=(t,e)=>ca(t,t,{tag:"option",process:{}},e),rl=t=>im(t,ol),Hr=(t,e,n)=>ca(t,t,AC(e),n),FC=(t,e)=>Hr(t,e,JN),UC=(t,e,n)=>{return Hr(t,e,(o=n,r=s=>Et(o,s)?Ce.value(s):Ce.error(`Unsupported value: "${s}", choose one of "${o.join(", ")}".`),rm(s=>r(s).fold(da,jr))));var o,r},lm=(t,e)=>Hr(t,e,ZN),dm=(t,e)=>Hr(t,e,am),tR=MC("type"),eR=IC("fetch"),cm=IC("onAction"),nR=dm("onSetup",()=>pt),oR=rl("text"),rR=rl("icon"),sR=rl("tooltip"),aR=rl("label"),iR=lm("active",!1),lR=lm("enabled",!0),zC=lm("primary",!1),ua=t=>Hr("type",t,ol),dR=sm([tR,MC("trigger"),FC("minChars",1),((t,e)=>ca(t,t,AC(1),QN()))("columns"),FC("maxResults",10),im("matches",am),eR,cm,(jC=ol,Hr("highlightOn",[],BC(jC)))]);var jC;const um=[lR,sR,rR,oR,nR],HC=[iR].concat(um),cR=[dm("predicate",Tt),UC("scope","node",["node","editor"]),UC("position","selection",["node","selection","line"])],uR=um.concat([ua("contextformbutton"),zC,cm,PC("original",he)]),mR=HC.concat([ua("contextformbutton"),zC,cm,PC("original",he)]),fR=um.concat([ua("contextformbutton")]),gR=HC.concat([ua("contextformtogglebutton")]),pR=DC("type",{contextformbutton:uR,contextformtogglebutton:mR});sm([ua("contextform"),dm("initValue",G("")),aR,((t,e)=>ca(t,t,{tag:"required",process:{}},BC(e)))("commands",pR),im("launch",DC("type",{contextformbutton:fR,contextformtogglebutton:gR}))].concat(cR));const bR=t=>{const e=so(),n=Wt(!1),o=e.isSet,r=()=>{o()&&(Pt(t).autocompleter.removeDecoration(),t.dispatch("AutocompleterEnd"),n.set(!1),e.clear())},s=So(()=>(t=>{const e=t.ui.registry.getAll().popups,n=Sa(e,s=>{return(a=s,((t,e,n)=>{return o=(i=e.extract([t],a=n)).stype===Dn.Error?{stype:Dn.Error,serror:(i=>({input:a,errors:i}))(i.serror)}:i,em(o,Ce.error,Ce.value);var a,i,o})("Autocompleter",dR,it({trigger:a.ch},a))).fold(i=>{throw new Error("Errors: \n"+(d=>{const c=d.length>10?d.slice(0,10).concat([{path:[],getErrorInfo:G("... (only showing first ten failures)")}]):d;return bt(c,u=>"Failed path: ("+u.path.join(" > ")+")\n"+u.getErrorInfo())})((l=i).errors).join("\n")+"\n\nInput object: "+nm(l.input));var l},he);var a}),o=Zm(zl(n,s=>s.trigger)),r=jl(n);return{dataset:n,triggers:o,lookupByTrigger:s=>ut(r,a=>a.trigger===s)}})(t)),a=i=>{var l;(l=i,e.get().map(d=>SC(t.dom,t.selection.getRng(),d.trigger).bind(c=>NC(t,s,c,l))).getOrThunk(()=>((d,c)=>{const u=c(),f=d.selection.getRng();return(m=d.dom,g=f,h=u,sr(h.triggers,p=>SC(m,g,p))).bind(m=>NC(d,c,m));var m,g,h})(t,s))).fold(r,l=>{var d,u;d=l.context,o()||(u=d.range,Pt(t).autocompleter.addDecoration(u),e.set({trigger:d.trigger,matchLength:d.text.length})),l.lookupData.then(d=>{e.get().map(c=>{const u=l.context;c.trigger===u.trigger&&(u.text.length-c.matchLength>=10?r():(e.set(kt(it({},c),{matchLength:u.text.length})),n.get()?t.dispatch("AutocompleterUpdate",{lookupData:d}):(n.set(!0),t.dispatch("AutocompleterStart",{lookupData:d}))))})})})};t.addCommand("mceAutocompleterReload",(i,l)=>{const d=pe(l)?l.fetchOptions:{};a(d)}),t.addCommand("mceAutocompleterClose",r),((i,l)=>{const d=Sd(l.load,50);i.on("keypress compositionend",c=>{27!==c.which&&d.throttle()}),i.on("keydown",c=>{const u=c.which;8===u?d.throttle():27===u&&l.cancelIfNecessary()}),i.on("remove",d.cancel)})(t,{cancelIfNecessary:r,load:a})},$C=t=>(e,n,o={})=>{const r=e.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:r,currentTarget:r,eventPhase:Event.AT_TARGET,originalTarget:r,explicitOriginalTarget:r,isTrusted:!1,srcElement:r,cancelable:!1,preventDefault:pt,inputType:n},a=Rg(new InputEvent(t));return e.dispatch(t,it(it(it({},a),s),o))},mm=$C("input"),fm=$C("beforeinput"),ma=(t,e)=>{const n=t.dom,o=t.schema.getMoveCaretBeforeOnEnterElements();if(!e)return;if(/^(LI|DT|DD)$/.test(e.nodeName)){const s=(a=>{for(;a;){if(J(a)||z(a)&&a.data&&/[\r\n\s]/.test(a.data))return a;a=a.nextSibling}return null})(e.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&e.insertBefore(n.doc.createTextNode(Zt),e.firstChild)}const r=n.createRng();if(e.normalize(),e.hasChildNodes()){const s=new Ht(e,e);let a,i=e;for(;a=s.current();){if(z(a)){r.setStart(a,0),r.setEnd(a,0);break}if(o[a.nodeName.toLowerCase()]){r.setStartBefore(a),r.setEndBefore(a);break}i=a,a=s.next()}a||(r.setStart(i,0),r.setEnd(i,0))}else It(e)?e.nextSibling&&n.isBlock(e.nextSibling)?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)):(r.setStart(e,0),r.setEnd(e,0));t.selection.setRng(r),qs(t,r)},sl=(t,e)=>{const n=t.getRoot();let o,r=e;for(;r!==n&&r&&"false"!==t.getContentEditable(r);)"true"===t.getContentEditable(r)&&(o=r),r=r.parentNode;return r!==n?o:n},gm=t=>y.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),VC=(t,e)=>{const n=null==t?void 0:t.parentNode;return Q(n)&&n.nodeName===e},qC=t=>Q(t)&&/^(OL|UL|LI)$/.test(t.nodeName),al=t=>{const e=t.parentNode;return Q(n=e)&&/^(LI|DT|DD)$/.test(n.nodeName)?e:t;var n},il=(t,e,n)=>{let o=t[n?"firstChild":"lastChild"];for(;o&&!J(o);)o=o[n?"nextSibling":"previousSibling"];return o===e},vR=(t,e)=>e&&"A"===e.nodeName&&t.isEmpty(e),pm=t=>{t.innerHTML='<br data-mce-bogus="1">'},hm=(t,e)=>t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e,WC=(t,e)=>Q(e)&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==t.getContentEditable(e),bm=(t,e,n)=>z(e)?t?1===n&&e.data.charAt(n-1)===ie?0:n:n===e.data.length-1&&e.data.charAt(n)===ie?e.data.length:n:n,fa=(t,e)=>{Te(t).toLowerCase()===e.tagName.toLowerCase()&&((n,o,r)=>{const s=n.dom;y.from(r.style).map(s.parseStyle).each(c=>{const u=it(it({},Vf(R(o))),c);s.setStyles(o,u)});const a=y.from(r.class).map(c=>c.split(/\s+/)),i=y.from(o.className).map(c=>ut(c.split(/\s+/),u=>""!==u));ve(a,i,(c,u)=>{const f=ut(u,g=>!Et(c,g)),m=[...c,...f];s.setAttrib(o,"class",m.join(" "))});const l=["style","class"],d=os(r,(c,u)=>!Et(l,u));s.setAttribs(o,d)})(t,e,Ts(t))},KC={insert:(t,e)=>{let n,o,r,s,a=!1;const i=t.dom,l=t.schema,d=l.getNonEmptyElements(),c=t.selection.getRng(),u=Te(t),f=x=>{let E=n;const S=l.getTextInlineElements();let O;O=x||"TABLE"===r||"HR"===r?i.create(x||u):b.cloneNode(!1);let B=O;if(!1===uk(t))i.setAttrib(O,"style",null),i.setAttrib(O,"class",null);else do{if(S[E.nodeName]){if(cn(E)||je(E))continue;const _=E.cloneNode(!1);i.setAttrib(_,"id",""),O.hasChildNodes()?(_.appendChild(O.firstChild),O.appendChild(_)):(B=_,O.appendChild(_))}}while((E=E.parentNode)&&E!==v);return fa(t,O),pm(B),O},m=x=>{const E=bm(x,n,o);if(z(n)&&(x?E>0:E<n.data.length))return!1;if(n.parentNode===b&&a&&!x||x&&J(n)&&n===b.firstChild)return!0;if(hm(n,"TABLE")||hm(n,"HR"))return a&&!x||!a&&x;const S=new Ht(n,b);let O;for(z(n)&&(x&&0===E?S.prev():x||E!==n.data.length||S.next());O=S.current();){if(J(O)){if(!O.getAttribute("data-mce-bogus")){const B=O.nodeName.toLowerCase();if(d[B]&&"br"!==B)return!1}}else if(z(O)&&!Po(O.data))return!1;x?S.prev():S.next()}return!0},g=()=>{let x;return x=/^(H[1-6]|PRE|FIGURE)$/.test(r)&&"HGROUP"!==C?f(u):f(),((E,S)=>{const O=mk(E);return!Ft(S)&&(lt(O)?Et(H.explode(O),S.nodeName.toLowerCase()):O)})(t,s)&&WC(i,s)&&i.isEmpty(b)?x=i.split(s,b):i.insertAfter(x,b),ma(t,x),x};yi(i,c).each(x=>{c.setStart(x.startContainer,x.startOffset),c.setEnd(x.endContainer,x.endOffset)}),n=c.startContainer,o=c.startOffset;const h=!(!e||!e.shiftKey),p=!(!e||!e.ctrlKey);J(n)&&n.hasChildNodes()&&(a=o>n.childNodes.length-1,n=n.childNodes[Math.min(o,n.childNodes.length-1)]||n,o=a&&z(n)?n.data.length:0);const v=sl(i,n);if(!v||((x,E)=>{const S=x.dom.getParent(E,"ol,ul,dl");return null!==S&&"false"===x.dom.getContentEditableParent(S)})(t,n))return;h||(n=((x,E,S,O,B)=>{var _;const D=x.dom,M=null!==(_=sl(D,O))&&void 0!==_?_:D.getRoot();let U=D.getParent(O,D.isBlock);if(!U||!WC(D,U)){let K;if(U=U||M,K=U===x.getBody()||ng(U)?U.nodeName.toLowerCase():U.parentNode?U.parentNode.nodeName.toLowerCase():"",!U.hasChildNodes()){const st=D.create(E);return fa(x,st),U.appendChild(st),S.setStart(st,0),S.setEnd(st,0),st}let Y,V=O;for(;V&&V.parentNode!==U;)V=V.parentNode;for(;V&&!D.isBlock(V);)Y=V,V=V.previousSibling;if(Y&&x.schema.isValidChild(K,E.toLowerCase())){const st=Y.parentNode,ht=D.create(E);for(fa(x,ht),st.insertBefore(ht,Y),V=Y;V&&!D.isBlock(V);){const St=V.nextSibling;ht.appendChild(V),V=St}S.setStart(O,B),S.setEnd(O,B)}}return O})(t,u,c,n,o));let b=i.getParent(n,i.isBlock)||i.getRoot();s=Q(null==b?void 0:b.parentNode)?i.getParent(b.parentNode,i.isBlock):null,r=b?b.nodeName.toUpperCase():"";const C=s?s.nodeName.toUpperCase():"";if("LI"!==C||p||(b=s,s=s.parentNode,r=C),/^(LI|DT|DD)$/.test(r)&&J(s)&&i.isEmpty(b))return void((x,E,S,O,B)=>{const _=x.dom,D=x.selection.getRng(),M=S.parentNode;if(S===x.getBody()||!M)return;var U;qC(U=S)&&qC(U.parentNode)&&(B="LI");let K=E(B);if(il(S,O,!0)&&il(S,O,!1))if(VC(S,"LI")){const Y=al(S);_.insertAfter(K,Y),(null===(st=(V=S).parentNode)||void 0===st?void 0:st.firstChild)===V?_.remove(Y):_.remove(S)}else _.replace(K,S);else if(il(S,O,!0))VC(S,"LI")?(_.insertAfter(K,al(S)),K.appendChild(_.doc.createTextNode(" ")),K.appendChild(S)):M.insertBefore(K,S),_.remove(O);else if(il(S,O,!1))_.insertAfter(K,al(S)),_.remove(O);else{S=al(S);const Y=D.cloneRange();Y.setStartAfter(O),Y.setEndAfter(S);const V=Y.extractContents();"LI"===B&&((st,ht)=>st.firstChild&&"LI"===st.firstChild.nodeName)(V)?(K=V.firstChild,_.insertAfter(V,S)):(_.insertAfter(V,S),_.insertAfter(K,S)),_.remove(O)}var V,st;ma(x,K)})(t,f,s,b,u);if(b===t.getBody())return;const w=b.parentNode;let k;if(pr(b))k=ud(b),i.isEmpty(b)&&pm(b),fa(t,k),ma(t,k);else if(m(!1))k=g();else if(m(!0)&&w)k=w.insertBefore(f(),b),ma(t,hm(b,"HR")?k:b);else{const x=(S=>{const O=S.cloneRange();return O.setStart(S.startContainer,bm(!0,S.startContainer,S.startOffset)),O.setEnd(S.endContainer,bm(!1,S.endContainer,S.endOffset)),O})(c).cloneRange();x.setEndAfter(b);const E=x.extractContents();j(cg(R(E),Le),O=>{const B=O.dom;B.nodeValue=jn(B.data)}),(S=>{let O=S;do{z(O)&&(O.data=O.data.replace(/^[\r\n]+/,"")),O=O.firstChild}while(O)})(E),k=E.firstChild,i.insertAfter(E,b),((S,O,B)=>{var _;const D=[];if(!B)return;let M=B;for(;M=M.firstChild;){if(S.isBlock(M))return;J(M)&&!O[M.nodeName.toLowerCase()]&&D.push(M)}let U=D.length;for(;U--;)M=D[U],(!M.hasChildNodes()||M.firstChild===M.lastChild&&""===(null===(_=M.firstChild)||void 0===_?void 0:_.nodeValue)||vR(S,M))&&S.remove(M)})(i,d,k),((S,O)=>{O.normalize();const B=O.lastChild;(!B||J(B)&&/^(left|right)$/gi.test(S.getStyle(B,"float",!0)))&&S.add(O,"br")})(i,b),i.isEmpty(b)&&pm(b),k.normalize(),i.isEmpty(k)?(i.remove(k),g()):(fa(t,k),ma(t,k))}i.setAttrib(k,"id",""),t.dispatch("NewBlock",{newBlock:k})},fakeEventName:"insertParagraph"},GC=(t,e,n)=>{const o=t.dom.createRng();n?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)),t.selection.setRng(o),qs(t,o)},yR=(t,e)=>{const n=Jt("br");Ie(R(e),n),t.undoManager.add()},CR=(t,e)=>{wR(t.getBody(),e)||Zn(R(e),Jt("br"));const n=Jt("br");Zn(R(e),n),GC(t,n.dom,!1),t.undoManager.add()},wR=(t,e)=>{return n=F.after(e),!!It(n.getNode())||Ee(t,F.after(e)).map(o=>It(o.getNode())).getOr(!1);var n},YC=t=>t&&"A"===t.nodeName&&"href"in t,xR=t=>t.fold(Tt,YC,YC,Tt),kR=(t,e)=>{e.fold(pt,et(yR,t),et(CR,t),pt)},XC={insert:(t,e)=>{const n=(o=>{const r=et(Ko,o),s=F.fromRangeStart(o.selection.getRng());return Tn(r,o.getBody(),s).filter(xR)})(t);n.isSome()?n.each(et(kR,t)):((o,r)=>{const a=o.dom,i=o.selection.getRng();let l,d=!1;yi(a,i).each(p=>{i.setStart(p.startContainer,p.startOffset),i.setEnd(p.endContainer,p.endOffset)});let c=i.startOffset,u=i.startContainer;if(J(u)&&u.hasChildNodes()){const p=c>u.childNodes.length-1;u=u.childNodes[Math.min(c,u.childNodes.length-1)]||u,c=p&&z(u)?u.data.length:0}let f=a.getParent(u,a.isBlock);const m=f&&f.parentNode?a.getParent(f.parentNode,a.isBlock):null;"LI"!==(m?m.nodeName.toUpperCase():"")||!(!r||!r.ctrlKey)||(f=m),z(u)&&c>=u.data.length&&(((p,v,b)=>{const C=new Ht(v,b);let w;const k=p.getNonEmptyElements();for(;w=C.next();)if(k[w.nodeName.toLowerCase()]||z(w)&&w.length>0)return!0;return!1})(o.schema,u,f||a.getRoot())||(l=a.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),d=!0)),l=a.create("br"),Ad(a,i,l),GC(o,l,d),o.undoManager.add()})(t,e)},fakeEventName:"insertLineBreak"},QC=(t,e)=>gm(t).filter(n=>e.length>0&&rn(R(n),e)).isSome(),Ke=xn([{br:[]},{block:[]},{none:[]}]),SR=(t,e)=>{return QC(n=t,ck(n));var n},JC=t=>(e,n)=>gm(e).filter(r=>vs(R(r))).isSome()===t,ZC=(t,e)=>(n,o)=>gm(n).fold(G(""),a=>a.nodeName.toUpperCase())===t.toUpperCase()===e,_R=t=>{const e=sl(t.dom,t.selection.getStart());return Ft(e)},ga=t=>ZC("pre",t),ll=t=>(e,n)=>ik(e)===t,ER=(t,e)=>{return QC(n=t,dk(n));var n},dl=(t,e)=>e,NR=t=>{const e=Te(t),n=sl(t.dom,t.selection.getStart());return Q(n)&&t.schema.isValidChild(n.nodeName,e)},tn=(t,e)=>(n,o)=>Oe(t,(r,s)=>r&&s(n,o),!0)?y.some(e):y.none(),cl=(t,e,n)=>{e.selection.isCollapsed()||e.execCommand("delete"),Q(n)&&fm(e,t.fakeEventName).isDefaultPrevented()||(t.insert(e,n),Q(n)&&mm(e,t.fakeEventName))},t1=(t,e)=>{const n=()=>cl(XC,t,e),o=()=>cl(KC,t,e),r=(s=t,a=e,cy([tn([SR],Ke.none()),tn([ga(!0),_R],Ke.none()),tn([ZC("summary",!0)],Ke.br()),tn([ga(!0),ll(!1),dl],Ke.br()),tn([ga(!0),ll(!1)],Ke.block()),tn([ga(!0),ll(!0),dl],Ke.block()),tn([ga(!0),ll(!0)],Ke.br()),tn([JC(!0),dl],Ke.br()),tn([JC(!0)],Ke.block()),tn([ER],Ke.br()),tn([dl],Ke.br()),tn([NR],Ke.block())],[s,!(!a||!a.shiftKey)]).getOr(Ke.none()));var s,a;switch(lk(t)){case"linebreak":r.fold(n,n,pt);break;case"block":r.fold(o,o,pt);break;case"invert":r.fold(o,n,pt);break;default:r.fold(n,o,pt)}},RR=_o(),e1=t=>t.stopImmediatePropagation(),n1=t=>t.keyCode===ot.PAGE_UP||t.keyCode===ot.PAGE_DOWN,o1=(t,e,n)=>{n&&!t.get()?e.on("NodeChange",e1,!0):!n&&t.get()&&e.off("NodeChange",e1),t.set(n)},r1=(t,e)=>{const n=e.container(),o=e.offset();return z(n)?(n.insertData(o,t),y.some(F(n,o+t.length))):si(e).map(r=>{const s=dr(t);return e.isAtEnd()?Zn(r,s):Ie(r,s),F(s.dom,t.length)})},AR=et(r1,Zt),OR=et(r1," "),BR=t=>{const e=F.fromRangeStart(t.selection.getRng()),n=R(t.getBody());if(t.selection.isCollapsed()){const o=et(Ko,t),r=F.fromRangeStart(t.selection.getRng());return Tn(o,t.getBody(),r).bind((s=n,a=>a.fold(i=>ze(s.dom,F.before(i)),i=>we(i),i=>En(i),i=>Ee(s.dom,F.after(i))))).map(s=>()=>{return((t,e)=>n=>{return o=t,!Rc(r=n)&&(ze((s=o).dom,a=r).isNone()||Ee(s.dom,a).isNone()||_c(s,a)||Ab(s,a)||Nc(s,a)||Ec(s,a)||Bb(o,r)||Db(o,r))?AR(e):OR(e);var o,r,s,a})(n,e)(s).each((a=t,i=>(a.selection.setRng(i.toRange()),a.nodeChanged(),!0)));var a})}var s;return y.none()},DR=t=>pS(t)?[{keyCode:ot.TAB,action:ft(CC,t,!0)},{keyCode:ot.TAB,shiftKey:!0,action:ft(CC,t,!1)}]:[],PR=t=>{if(t.addShortcut("Meta+P","","mcePrint"),bR(t),On(t))return Wt(null);{const e=(t=>{const e=Wt(null),n=et(Ko,t);return t.on("NodeChange",o=>{Bs(t)&&(((r,s,a)=>{const i=bt(ye(R(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),c=>c.dom),l=ut(i,r),d=ut(a,r);j(Ml(l,d),et(Oy,!1)),j(Ml(d,l),et(Oy,!0))})(n,t.dom,o.parents),((r,s)=>{const a=s.get();if(r.selection.isCollapsed()&&!r.composing&&a){const i=F.fromRangeStart(r.selection.getRng());F.isTextPosition(i)&&!dd(l=i)&&!cd(l)&&(Xi(r,((t,e)=>{return F.isTextPosition(e)?(o=e,Dp(n=t)&&o.container()===n?((r,s)=>{const a=Lp(r.data.substr(0,s.offset())),i=Lp(r.data.substr(s.offset()));return(a.text+i.text).length>0?(Mp(r),F(r,s.offset()-a.count)):s})(n,o):Ip(n,o)):((n,o)=>o.container()===n.parentNode?((r,s)=>{const a=s.container(),i=((l,d)=>{const c=Gm(l,d);return-1===c?y.none():y.some(c)})(be(a.childNodes),r).map(l=>l<s.offset()?F(a,s.offset()-1):s).getOr(s);return jo(r),i})(n,o):Ip(n,o))(t,e);var n,o})(a,i)),s.set(null))}var l})(t,e),((r,s,a,i)=>{if(s.selection.isCollapsed()){const l=ut(i,r);j(l,d=>{const c=F.fromRangeStart(s.selection.getRng());Tn(r,s.getBody(),c).bind(u=>Ty(s,a,u))})}})(n,t,e,o.parents))}),e})(t);return(n=t).on("keyup compositionstart",et(PN,n)),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=vt.os.isMacOS()||vt.os.isiOS();ia([{keyCode:ot.RIGHT,action:ft(Qy,s,!0)},{keyCode:ot.LEFT,action:ft(Qy,s,!1)},{keyCode:ot.UP,action:ft(Jy,s,!1)},{keyCode:ot.DOWN,action:ft(Jy,s,!0)},...l?[{keyCode:ot.UP,action:ft(Ji,s,!1),metaKey:!0,shiftKey:!0},{keyCode:ot.DOWN,action:ft(Ji,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:ot.RIGHT,action:ft(hC,s,!0)},{keyCode:ot.LEFT,action:ft(hC,s,!1)},{keyCode:ot.UP,action:ft(bC,s,!1)},{keyCode:ot.DOWN,action:ft(bC,s,!0)},{keyCode:ot.RIGHT,action:ft(rC,s,!0)},{keyCode:ot.LEFT,action:ft(rC,s,!1)},{keyCode:ot.UP,action:ft(sC,s,!1)},{keyCode:ot.DOWN,action:ft(sC,s,!0)},{keyCode:ot.RIGHT,action:ft(By,s,a,!0)},{keyCode:ot.LEFT,action:ft(By,s,a,!1)},{keyCode:ot.RIGHT,ctrlKey:!l,altKey:l,action:ft(_N,s,a)},{keyCode:ot.LEFT,ctrlKey:!l,altKey:l,action:ft(EN,s,a)},{keyCode:ot.UP,action:ft(tC,s,!1)},{keyCode:ot.DOWN,action:ft(tC,s,!0)}],i).each(d=>{i.preventDefault()})})(n,o,r)})})(t,e),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=i.keyCode===ot.BACKSPACE?"deleteContentBackward":"deleteContentForward";oC([{keyCode:ot.BACKSPACE,action:ft(Hy,s)},{keyCode:ot.BACKSPACE,action:ft(Lu,s,!1)},{keyCode:ot.DELETE,action:ft(Lu,s,!0)},{keyCode:ot.BACKSPACE,action:ft(Bu,s,!1)},{keyCode:ot.DELETE,action:ft(Bu,s,!0)},{keyCode:ot.BACKSPACE,action:ft(Vu,s,a,!1)},{keyCode:ot.DELETE,action:ft(Vu,s,a,!0)},{keyCode:ot.BACKSPACE,action:ft(zc,s,!1)},{keyCode:ot.DELETE,action:ft(zc,s,!0)},{keyCode:ot.BACKSPACE,action:ft(Mu,s,!1)},{keyCode:ot.DELETE,action:ft(Mu,s,!0)},{keyCode:ot.BACKSPACE,action:ft(Ku,s,!1)},{keyCode:ot.DELETE,action:ft(Ku,s,!0)},{keyCode:ot.BACKSPACE,action:ft(Ou,s,!1)},{keyCode:ot.DELETE,action:ft(Ou,s,!0)},{keyCode:ot.BACKSPACE,action:ft(Au,s,!1)},{keyCode:ot.DELETE,action:ft(Au,s,!0)},{keyCode:ot.BACKSPACE,action:ft(qu,s,!1)},{keyCode:ot.DELETE,action:ft(qu,s,!0)}],i).each(d=>{i.preventDefault(),fm(s,l).isDefaultPrevented()||(d(),mm(s,l))})})(n,o,r)}),n.on("keyup",r=>{var s,a;r.isDefaultPrevented()||(a=r,ia([{keyCode:ot.BACKSPACE,action:ft(ry,s=n)},{keyCode:ot.DELETE,action:ft(ry,s)}],a))})})(t,e),(n=>{n.on("keydown",o=>{var r,s,a;o.keyCode===ot.ENTER&&(r=n,(s=o).isDefaultPrevented()||(s.preventDefault(),(a=r.undoManager).typing&&(a.typing=!1,a.add()),r.undoManager.transact(()=>{t1(r,s)})))})})(t),(n=>{n.on("keydown",o=>{var r,s;o.isDefaultPrevented()||(s=o,oC([{keyCode:ot.SPACEBAR,action:ft(BR,r=n)}],s).each(a=>{s.preventDefault(),fm(r,"insertText",{data:" "}).isDefaultPrevented()||(a(),mm(r,"insertText",{data:" "}))}))})})(t),(n=>{n.on("input",o=>{o.isComposing||(r=>{const s=R(r.getBody());r.selection.isCollapsed()&&((t,e)=>{const n=e.container();if(!z(n))return y.none();if((o=>{const r=o.container();return z(r)&&re(r.data,Zt)})(e)){const o=Ib(t,n,!1)||(r=>{const s=r.data,a=(i=>{const l=i.split("");return bt(l,(d,c)=>ci(d)&&c>0&&c<l.length-1&&Wd(l[c-1])&&Wd(l[c+1])?" ":d).join("")})(s);return a!==s&&(r.data=a,!0)})(n)||Fb(t,n,!1);return is(o,e)}if(Ac(t,e)){const o=Ib(t,n,!0)||Fb(t,n,!0);return is(o,e)}return y.none()})(s,F.fromRangeStart(r.selection.getRng())).each(a=>{r.selection.setRng(a.toRange())})})(n)})})(t),(n=>{n.on("keydown",o=>{var s;o.isDefaultPrevented()||(s=o,ia([...DR(n)],s).each(a=>{s.preventDefault()}))})})(t),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=vt.os.isMacOS()||vt.os.isiOS();ia([{keyCode:ot.END,action:ft(Zy,s,!0)},{keyCode:ot.HOME,action:ft(Zy,s,!1)},...l?[]:[{keyCode:ot.HOME,action:ft(Ji,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:ot.END,action:ft(Ji,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:ot.END,action:ft(aC,s,!0)},{keyCode:ot.HOME,action:ft(aC,s,!1)},{keyCode:ot.END,action:ft(Qi,s,!0,a)},{keyCode:ot.HOME,action:ft(Qi,s,!1,a)}],i).each(d=>{i.preventDefault()})})(n,o,r)})})(t,e),((n,o)=>{if(RR.os.isMacOS())return;const r=Wt(!1);n.on("keydown",s=>{n1(s)&&o1(r,n,!0)}),n.on("keyup",s=>{var a,i,l;s.isDefaultPrevented()||(l=s,ia([{keyCode:ot.PAGE_UP,action:ft(Qi,a=n,!1,i=o)},{keyCode:ot.PAGE_DOWN,action:ft(Qi,a,!0,i)}],l)),n1(s)&&r.get()&&(o1(r,n,!1),n.nodeChanged())})})(t,e),e}var n};class LR{constructor(e){let n;this.lastPath=[],this.editor=e;const o=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",r=>{const s=e.selection.getRng(),a={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};"nodechange"!==r.type&&cc(a,n)||e.dispatch("SelectionChange"),n=a}),e.on("contextmenu",()=>{e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const r=e.selection.getStart(!0);r&&mi(e)&&!o.isSameElementPath(r)&&e.dom.isChildOf(r,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",r=>{!r.isDefaultPrevented()&&mi(e)&&("IMG"===e.selection.getNode().nodeName?$e.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){const n=this.editor.selection;let o;if(this.editor.initialized&&n&&!jk(this.editor)&&!this.editor.mode.isReadOnly()){const r=this.editor.getBody();o=n.getStart(!0)||r,o.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(o,r)||(o=r);const s=[];this.editor.dom.getParent(o,a=>a===r||(s.push(a),!1)),this.editor.dispatch("NodeChange",kt(it({},e),{element:o,parents:s}))}}isSameElementPath(e){let n;const o=this.editor,r=es(o.dom.getParents(e,Ut,o.getBody()));if(r.length===this.lastPath.length){for(n=r.length;n>=0&&r[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=r,!0}return this.lastPath=r,!1}}const ul=G("x-tinymce/html"),vm="\x3c!-- x-tinymce/html --\x3e",MR=t=>vm+t,s1=t=>-1!==t.indexOf(vm),a1="%MCEPASTEBIN%",ym=t=>t.dom.get("mcepastebin"),IR=t=>Q(t)&&"mcepastebin"===t.id,i1=t=>t===a1,l1=(t,e)=>(H.each(e,n=>{t=xa(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),d1=t=>l1(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,n,o)=>n||o?Zt:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),c1=(t,e)=>({content:t,cancelled:e}),Cm=(t,e)=>(t.insertContent(e,{merge:sS(t),paste:!0}),!0),wm=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),FR=(t,e,n)=>{return!(t.selection.isCollapsed()||!wm(e)||(o=t,r=e,s=n,o.undoManager.extra(()=>{s(o,r)},()=>{o.execCommand("mceInsertLink",!1,r)}),0));var o,r,s},UR=(t,e,n)=>{return o=t,!(!wm(r=e)||!zt(Bp(o),s=>sf(r.toLowerCase(),`.${s.toLowerCase()}`)))&&((o,r,s)=>(o.undoManager.extra(()=>{s(o,r)},()=>{o.insertContent('<img src="'+r+'">')}),!0))(t,e,n);var o,r},zR=(t=>{let e=0;return()=>"mceclip"+e++})(),u1=(t,e,n,o)=>{const r=((l,d,c)=>{const u=l.dispatch("PastePreProcess",{content:d,internal:c}),f=((m,g)=>{const h=Mr({},m.schema);h.addNodeFilter("meta",v=>{H.each(v,b=>{b.remove()})});const p=h.parse(g,{forced_root_block:!1,isRootContent:!0});return uo({validate:!0},m.schema).serialize(p)})(l,u.content);return l.hasEventListeners("PastePostProcess")&&!u.isDefaultPrevented()?((m,g,h)=>{const p=m.dom.create("div",{style:"display:none"},g),v=m.dispatch("PastePostProcess",{node:p,internal:h});return c1(v.node.innerHTML,v.isDefaultPrevented())})(l,f,c):c1(f,u.isDefaultPrevented())})(t,e,n);var s,a,l,d;r.cancelled||(s=t,a=r.content,o||!aS(s)?Cm(s,a):(l=s,d=a,H.each([FR,UR,Cm],c=>!c(l,d,Cm))))},ml=(t,e,n)=>{const o=n||s1(e);u1(t,e.replace(vm,""),o,!1)},xm=(t,e)=>{const n=t.dom.encode(e).replace(/\r\n/g,"\n"),o=((r,s,a)=>{const i=r.split(/\n\n/),l=((u,f)=>{let m="<"+u;const g=zl(f,(h,p)=>p+'="'+oo.encodeAllRaw(h)+'"');return g.length&&(m+=" "+g.join(" ")),m+">"})(s,a),d="</"+s+">",c=bt(i,u=>u.split(/\n/).join("<br />"));return 1===c.length?c[0]:bt(c,u=>l+u+d).join("")})(yg(n,lS(t)),Te(t),Ts(t));u1(t,o,!1,!0)},m1=t=>{const e={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const o=t.types[n];try{e[o]=t.getData(o)}catch(r){e[o]=""}}return e},$r=(t,e)=>e in t&&t[e].length>0,f1=t=>$r(t,"text/html")||$r(t,"text/plain"),g1=(t,e,n)=>{const o="paste"===e.type?e.clipboardData:e.dataTransfer;var r;if(oi(t)&&o){const s=((a,i)=>{const l=i.items?Ln(be(i.items),c=>"file"===c.kind?[c.getAsFile()]:[]):[],d=i.files?be(i.files):[];return ut(l.length>0?l:d,(c=>{const u=Bp(c);return f=>ne(f.type,"image/")&&zt(u,m=>(g=>{const h=g.toLowerCase(),p={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return H.hasOwn(p,h)?"image/"+p[h]:"image/"+h})(m)===f.type)})(a))})(t,o);if(s.length>0)return e.preventDefault(),(r=s,Promise.all(bt(r,a=>nv(a).then(i=>({file:a,uri:i}))))).then(a=>{n&&t.selection.setRng(n),j(a,i=>{var l,d;l=t,hu((d=i).uri).each(({data:c,type:u,base64Encoded:f})=>{const m=f?c:btoa(c),g=d.file,h=l.editorUpload.blobCache,p=h.getByData(m,u),v=null!=p?p:((b,C,w,k)=>{const x=zR(),E=xp(b)&&Q(w.name),S=E?((_,D)=>{const M=D.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Q(M)?_.dom.encode(M[1]):void 0})(b,w.name):x,B=C.create(x,w,k,S,E?w.name:void 0);return C.add(B),B})(l,h,g,m);ml(l,`<img src="${v.blobUri()}">`,!1)})})}),!0}return!1},p1=(t,e,n,o)=>{let r=d1(n);const s=$r(e,ul())||s1(n),a=!s&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(r),i=wm(r);(i1(r)||!r.length||a&&!i)&&(o=!0),(o||i)&&(r=$r(e,"text/plain")&&a?e["text/plain"]:(l=>{const d=ro(),c=Mr({},d);let u="";const f=d.getVoidElements(),m=H.makeMap("script noscript style textarea video audio iframe object"," "),g=d.getBlockElements(),h=p=>{const v=p.name,b=p;if("br"!==v){if("wbr"!==v)if(f[v]&&(u+=" "),m[v])u+=" ";else{if(3===p.type&&(u+=p.value),!(p.name in d.getVoidElements())){let C=p.firstChild;if(C)do{h(C)}while(C=C.next)}g[v]&&b.next&&(u+="\n","p"===v&&(u+="\n"))}}else u+="\n"};return l=l1(l,[/<!\[[^\]]+\]>/g]),h(c.parse(l)),u})(r)),i1(r)||(o?xm(t,r):ml(t,r,s))},h1=(t,e,n,o)=>{((r,s,a)=>{if(!r)return!1;try{return r.clearData(),r.setData("text/html",s),r.setData("text/plain",a),r.setData(ul(),s),!0}catch(i){return!1}})(t.clipboardData,e.html,e.text)?(t.preventDefault(),o()):n(e.html,o)},b1=t=>(e,n)=>{const{dom:o,selection:r}=t,s=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=o.create("div",{contenteditable:"true"},e);o.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(a),o.add(t.getBody(),s);const i=r.getRng();a.focus();const l=o.createRng();l.selectNodeContents(a),r.setRng(l),$e.setEditorTimeout(t,()=>{r.setRng(i),o.remove(s),n()},0)},v1=t=>({html:MR(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),y1=t=>{return!t.selection.isCollapsed()||!!(e=t).dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody());var e},C1=(t,e)=>{var n,o;return Br.getCaretRangeFromPoint(null!==(n=e.clientX)&&void 0!==n?n:0,null!==(o=e.clientY)&&void 0!==o?o:0,t.getDoc())},w1=(t,e)=>{t.focus(),e&&t.selection.setRng(e)},HR=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,x1=t=>H.trim(t).replace(HR,ui).toLowerCase(),$R=(t,e,n)=>{const o=oS(t);if(n||"all"===o||!rS(t))return e;const r=o?o.split(/[, ]/):[];if(r&&"none"!==o){const s=t.dom,a=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,l,d,c)=>{const u=s.parseStyle(s.decode(d)),f={};for(let g=0;g<r.length;g++){const h=u[r[g]];let p=h,v=s.getStyle(a,r[g],!0);/color/.test(r[g])&&(p=x1(p),v=x1(v)),v!==p&&(f[r[g]]=h)}const m=s.serializeStyle(f,"span");return m?l+' style="'+m+'"'+c:l+c})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(s,a,i,l)=>a+' style="'+i+'"'+l)},qR=It,k1=z,WR=t=>At(t.dom),S1=t=>e=>wt(R(t),e),_1=(t,e)=>fr(R(t),WR,S1(e)),E1=(t,e,n)=>{const o=new Ht(t,e),r=n?o.next.bind(o):o.prev.bind(o);let s=t;for(let a=n?t:r();a&&!qR(a);a=r())Ze(a)&&(s=a);return s};var pa;!function(t){t.Before="before",t.After="after"}(pa||(pa={}));const GR=(t,e)=>Math.abs(t.left-e),YR=(t,e)=>Math.abs(t.right-e),QR=(t,e,n)=>e>t.left&&e<t.right?0:Math.min(Math.abs(t.left-e),Math.abs(t.right-e)),km=(t,e,n)=>{const o=d=>Ze(d.node)?y.some(d):J(d.node)?km(be(d.node.childNodes),e,n):y.none(),r=(d,c)=>{const u=ns(d,(f,m)=>c(f,e,n)-c(m,e,n));return((f,m)=>{if(f.length>=2){const g=o(f[0]).getOr(f[0]),h=o(f[1]).getOr(f[1]);if(Math.abs(m(g,e,n)-m(h,e,n))<2){if(z(g.node))return y.some(g);if(z(h.node))return y.some(h)}}return y.none()})(u,c).orThunk(()=>sr(u,o))},[s,a]=((t,e)=>{return(n=ut(t,n=>{return(o=e)>=(r=n).top&&o<=r.bottom;var o,r}),Oe(n,(o,r)=>o.fold(()=>y.some(r),s=>{const a=Math.min(r.left,s.left),i=Math.min(r.top,s.top),l=Math.max(r.right,s.right),d=Math.max(r.bottom,s.bottom);return y.some({top:i,right:l,bottom:d,left:a,width:l-a,height:d-i})}),y.none())).fold(()=>[[],t],n=>{const{pass:o,fail:r}=Zr(t,s=>((a,i)=>{const l=(d=a,c=i,Math.max(0,Math.min(d.bottom,c.bottom)-Math.max(d.top,c.top))/Math.min(a.height,i.height));var d,c;return((d,c)=>d.top<c.bottom&&d.bottom>c.top)(a,i)&&l>.5})(s,n));return[o,r]});var n})(ky(t),n),{pass:i,fail:l}=Zr(a,d=>d.top<n);return r(s,QR).orThunk(()=>r(l,qg)).orThunk(()=>r(i,qg))},N1=t=>{var e,n;const o=t.getBoundingClientRect(),r=t.ownerDocument,s=r.documentElement,a=r.defaultView;return{top:o.top+(null!==(e=null==a?void 0:a.scrollY)&&void 0!==e?e:0)-s.clientTop,left:o.left+(null!==(n=null==a?void 0:a.scrollX)&&void 0!==n?n:0)-s.clientLeft}},Sm=At,ZR=((...t)=>e=>{for(let n=0;n<t.length;n++)if(t[n](e))return!0;return!1})(Sm,Cn),tA=(t,e,n,o)=>{const r=t.dom,s=e.cloneNode(!0);r.setStyles(s,{width:n,height:o}),r.setAttrib(s,"data-mce-selected",null);const a=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),r.setStyles(s,{margin:0,boxSizing:"border-box"}),a.appendChild(s),a},fl=(t,e)=>n=>()=>{n.scroll({[t]:("left"===t?n.scrollX:n.scrollY)+e,behavior:"smooth"})},R1=fl("left",-32),A1=fl("left",32),O1=fl("top",-32),T1=fl("top",32),B1=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},D1=t=>{t.on(e=>{e.intervalId.clear(),B1(e.ghost)}),t.clear()},Vr=At,_m=(t,e)=>Go(t.getBody(),e),oA=t=>{const e=t.selection,n=t.dom,o=t.getBody(),r=((t,e,n,o)=>{const r=so();let s,a;const i=Te(t),l=t.dom,d=()=>{(c=>{var u,f;const m=ye(R(c),"*[contentEditable=false],video,audio,embed,object");for(let g=0;g<m.length;g++){const h=m[g].dom;let p=h.previousSibling;if(Va(p)){const v=p.data;1===v.length?null===(u=p.parentNode)||void 0===u||u.removeChild(p):p.deleteData(v.length-1,1)}p=h.nextSibling,$a(p)&&(1===p.data.length?null===(f=p.parentNode)||void 0===f||f.removeChild(p):p.deleteData(0,1))}})(e),a&&(jo(a),a=null),r.on(c=>{l.remove(c.caret),r.clear()}),s&&(clearInterval(s),s=void 0)};return{show:(c,u)=>{let f;if(d(),CS(u))return null;if(!n(u))return a=((m,g)=>{var h;const p=(null!==(h=m.ownerDocument)&&void 0!==h?h:document).createTextNode(ie),v=m.parentNode;if(g){const b=m.previousSibling;if(gr(b)){if(Fe(b))return b;if(Va(b))return b.splitText(b.data.length-1)}null==v||v.insertBefore(p,m)}else{const b=m.nextSibling;if(gr(b)){if(Fe(b))return b;if($a(b))return b.splitText(1),b}m.nextSibling?null==v||v.insertBefore(p,m.nextSibling):null==v||v.appendChild(p)}return p})(u,c),f=u.ownerDocument.createRange(),Ds(a.nextSibling)?(f.setStart(a,0),f.setEnd(a,0)):(f.setStart(a,1),f.setEnd(a,1)),f;{const m=((p,v,b)=>{var C;const w=(null!==(C=v.ownerDocument)&&void 0!==C?C:document).createElement(p);w.setAttribute("data-mce-caret",b?"before":"after"),w.setAttribute("data-mce-bogus","all"),w.appendChild(ld().dom);const k=v.parentNode;return b?null==k||k.insertBefore(w,v):v.nextSibling?null==k||k.insertBefore(w,v.nextSibling):null==k||k.appendChild(w),w})(i,u,c),g=Fp(e,u,c);l.setStyle(m,"top",g.top),a=m;const h=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(h,it({},g)),l.add(e,h),r.set({caret:h,element:u,before:c}),c&&l.addClass(h,"mce-visual-caret-before"),s=setInterval(()=>{r.on(p=>{o()?l.toggleClass(p.caret,"mce-visual-caret-hidden"):l.addClass(p.caret,"mce-visual-caret-hidden")})},500),f=u.ownerDocument.createRange(),f.setStart(m,0),f.setEnd(m,0)}return f},hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on(c=>{const u=Fp(e,c.element,c.before);l.setStyles(c.caret,it({},u))})},destroy:()=>clearInterval(s)}})(t,o,n.isBlock,()=>qo(t)),s="sel-"+n.uniqueId(),a="data-mce-selected";let i;const l=p=>p!==o&&(Vr(p)||wn(p))&&n.isChildOf(p,o),d=(p,v,b,C=!0)=>t.dispatch("ShowCaret",{target:v,direction:p,before:b}).isDefaultPrevented()?null:(C&&e.scrollIntoView(v,-1===p),r.show(b,v)),c=p=>Fe(p)||$a(p)||Va(p),u=p=>c(p.startContainer)||c(p.endContainer),m=(p,v)=>{if(!p)return null;if(p.collapsed){if(!u(p)){const k=v?1:-1,x=Fs(k,o,p),E=x.getNode(!v);if(Ps(E))return d(k,E,!!v&&!x.isAtEnd(),!1);const S=x.getNode(v);if(Ps(S))return d(k,S,!v&&!x.isAtEnd(),!1)}return null}let b=p.startContainer,C=p.startOffset;const w=p.endOffset;if(z(b)&&0===C&&Vr(b.parentNode)&&(b=b.parentNode,C=n.nodeIndex(b),b=b.parentNode),!J(b))return null;if(w===C+1&&b===p.endContainer){const k=b.childNodes[C];if(l(k))return(x=>{const E=x.cloneNode(!0),S=t.dispatch("ObjectSelected",{target:x,targetClone:E});if(S.isDefaultPrevented())return null;const O=((_,D)=>{const M=R(t.getBody()),U=t.getDoc(),K=bs(M,"#"+s).getOrThunk(()=>{const st=Ta('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',U);return Qt(st,"id",s),qt(M,st),st}),Y=n.createRng();gs(K),Ro(K,[dr(Zt,U),R(D),dr(Zt,U)]),Y.setStart(K.dom.firstChild,1),Y.setEnd(K.dom.lastChild,0),Da(K,{top:n.getPos(_,t.getBody()).y+"px"}),Zh(K);const V=e.getSel();return V&&(V.removeAllRanges(),V.addRange(Y)),Y})(x,S.targetClone),B=R(x);return j(ye(R(t.getBody()),"*[data-mce-selected]"),_=>{wt(B,_)||se(_,a)}),n.getAttrib(x,a)||x.setAttribute(a,"1"),i=x,h(),O})(k)}return null},g=()=>{i&&i.removeAttribute(a),bs(R(t.getBody()),"#"+s).each(Ot),i=null},h=()=>{r.hide()};return On(t)||(t.on("click",p=>{const v=_m(t,p.target);v&&Vr(v)&&(p.preventDefault(),t.focus())}),t.on("blur NewBlock",g),t.on("ResizeWindow FullscreenStateChanged",r.reposition),t.on("tap",p=>{const v=p.target,b=_m(t,v);Vr(b)?(p.preventDefault(),oa(t,b).each(m)):l(v)&&oa(t,v).each(m)},!0),t.on("mousedown",p=>{const v=p.target;if(v!==o&&"HTML"!==v.nodeName&&!n.isChildOf(v,o)||!((C,w,k)=>{const x=R(C.getBody()),E=C.inline?x:R(Un(x).dom.documentElement),S=((O,B,_,D)=>{const M=B.dom.getBoundingClientRect();return{x:_-(O?M.left+B.dom.clientLeft+zE(B):0),y:D-(O?M.top+B.dom.clientTop+UE(B):0)}})(C.inline,E,w,k);return((O,B,_)=>{const D=IE(O),M=FE(O);return B>=0&&_>=0&&B<=D&&_<=M})(E,S.x,S.y)})(t,p.clientX,p.clientY))return;g(),h();const b=_m(t,v);Vr(b)?(p.preventDefault(),oa(t,b).each(m)):((t,e,n)=>((o,r,s)=>{const a=R(o),l=((t,e,n)=>y.from(t.dom.elementFromPoint(e,n)).map(us))(Un(a),r,s).filter(d=>Fn(a,d)).getOr(a);return((d,c,u,f)=>{const m=(g,h)=>h.fold(()=>km(be(g.dom.childNodes),u,f),p=>{const v=ut(be(g.dom.childNodes),b=>b!==p.dom);return km(v,u,f)}).orThunk(()=>{var p;return(wt(g,d)?y.none():(p=g,y.from(p.dom.parentElement).map(R))).bind(v=>m(v,y.some(g)))});return m(c,y.none())})(a,l,r,s)})(t,e,n).filter(o=>Ps(o.node)).map(o=>{return{node:(r=o).node,position:GR(r,s=e)<YR(r,s)?pa.Before:pa.After};var r,s}))(o,p.clientX,p.clientY).each(C=>{var w;p.preventDefault(),(w=d(1,C.node,C.position===pa.Before,!1))&&e.setRng(w),J(b)?b.focus():t.getBody().focus()})}),t.on("keypress",p=>{ot.modifierPressed(p)||Vr(e.getNode())&&p.preventDefault()}),t.on("GetSelectionRange",p=>{let v=p.range;if(i){if(!i.parentNode)return void(i=null);v=v.cloneRange(),v.selectNode(i),p.range=v}}),t.on("SetSelectionRange",p=>{p.range=(p=>{const v=t.schema.getVoidElements(),b=n.createRng(),C=p.startContainer,w=p.startOffset,k=p.endContainer,x=p.endOffset;return gt(v,C.nodeName.toLowerCase())?0===w?b.setStartBefore(C):b.setStartAfter(C):b.setStart(C,w),gt(v,k.nodeName.toLowerCase())?0===x?b.setEndBefore(k):b.setEndAfter(k):b.setEnd(k,x),b})(p.range);const v=m(p.range,p.forward);v&&(p.range=v)}),t.on("AfterSetSelectionRange",p=>{const v=p.range,b=v.startContainer.parentElement;var C,w;u(v)||J(C=b)&&"mcepastebin"===C.id||h(),Q(w=b)&&n.hasClass(w,"mce-offscreen-selection")||g()}),(t=>{const e=so(),n=_t.DOM,o=document,r=(l=e,d=t,c=>{if(0===c.button){const m=Vt(d.dom.getParents(c.target),ZR).getOr(null);if(Q(m)&&(u=d.getBody(),Sm(f=m)&&f!==u)){const g=d.dom.getPos(m),h=d.getBody(),p=d.getDoc().documentElement;l.set({element:m,dragging:!1,screenX:c.screenX,screenY:c.screenY,maxX:(d.inline?h.scrollWidth:p.offsetWidth)-2,maxY:(d.inline?h.scrollHeight:p.offsetHeight)-2,relX:c.pageX-g.x,relY:c.pageY-g.y,width:m.offsetWidth,height:m.offsetHeight,ghost:tA(d,m,m.offsetWidth,m.offsetHeight),intervalId:Kx(100)})}}var u,f}),s=((t,e)=>{const n=Qa((r,s)=>{e._selectionOverrides.hideFakeCaret(),e.selection.placeCaretAt(r,s)},0);e.on("remove",n.cancel);const o=t;return r=>t.on(s=>{const a=Math.max(Math.abs(r.screenX-s.screenX),Math.abs(r.screenY-s.screenY));if(!s.dragging&&a>10){if(e.dispatch("dragstart",{target:s.element}).isDefaultPrevented())return;s.dragging=!0,e.focus()}if(s.dragging){const d=((c,u)=>({pageX:u.pageX-c.relX,pageY:u.pageY+5}))(s,(u=r,f=(h=c=e).inline?N1(h.getBody()):{left:0,top:0},m=(h=>{const p=h.getBody();return h.inline?{left:p.scrollLeft,top:p.scrollTop}:{left:0,top:0}})(c),g=((h,p)=>{if(p.target.ownerDocument!==h.getDoc()){const v=N1(h.getContentAreaContainer()),b=(C=>{const w=C.getBody(),k=C.getDoc().documentElement;return C.inline?{left:w.scrollLeft,top:w.scrollTop}:{left:w.scrollLeft||k.scrollLeft,top:w.scrollTop||k.scrollTop}})(h);return{left:p.pageX-v.left+b.left,top:p.pageY-v.top+b.top}}return{left:p.pageX,top:p.pageY}})(c,u),{pageX:g.left-f.left+m.left,pageY:g.top-f.top+m.top}));i=s.ghost,l=e.getBody(),i.parentNode!==l&&l.appendChild(i),((c,u,f,m,g,h,p,v,b,C,w)=>{let k=0,x=0;c.style.left=u.pageX+"px",c.style.top=u.pageY+"px",u.pageX+f>g&&(k=u.pageX+f-g),u.pageY+m>h&&(x=u.pageY+m-h),c.style.width=f-k+"px",c.style.height=m-x+"px";const E=b.clientHeight,S=b.clientWidth,O=p+b.getBoundingClientRect().top,B=v+b.getBoundingClientRect().left;w.on(_=>{_.intervalId.clear(),_.dragging&&(p+8>=E?_.intervalId.set(T1(C)):p-8<=0?_.intervalId.set(O1(C)):v+8>=S?_.intervalId.set(A1(C)):v-8<=0?_.intervalId.set(R1(C)):O+16>=window.innerHeight?_.intervalId.set(T1(window)):O-16<=0?_.intervalId.set(O1(window)):B+16>=window.innerWidth?_.intervalId.set(A1(window)):B-16<=0&&_.intervalId.set(R1(window)))})})(s.ghost,d,s.width,s.height,s.maxX,s.maxY,r.clientY,r.clientX,e.getContentAreaContainer(),e.getWin(),o),n.throttle(r.clientX,r.clientY)}var c,u,h,f,m,g,i,l})})(e,t),a=((l,d)=>c=>{l.on(u=>{if(u.intervalId.clear(),u.dragging){if(f=d,m=(f=>{const m=f.getSel();if(Q(m)){const g=m.getRangeAt(0).startContainer;return z(g)?g.parentNode:g}return null})(d.selection),g=u.element,!Ft(m)&&m!==g&&!f.dom.isChildOf(m,g)&&!Sm(m)){const f=(m=>{const g=m.cloneNode(!0);return g.removeAttribute("data-mce-selected"),g})(u.element);d.dispatch("drop",{clientX:c.clientX,clientY:c.clientY}).isDefaultPrevented()||d.undoManager.transact(()=>{B1(u.element),d.insertContent(d.dom.getOuterHTML(f)),d._selectionOverrides.hideFakeCaret()})}d.dispatch("dragend")}var f,m,g}),D1(l)})(e,t),i=((l,d)=>()=>{l.on(c=>{c.intervalId.clear(),c.dragging&&d.dispatch("dragend")}),D1(l)})(e,t);var l,d;t.on("mousedown",r),t.on("mousemove",s),t.on("mouseup",a),n.bind(o,"mousemove",s),n.bind(o,"mouseup",i),t.on("remove",()=>{n.unbind(o,"mousemove",s),n.unbind(o,"mouseup",i)}),t.on("keydown",l=>{l.keyCode===ot.ESC&&i()})})(p=t),Vk(p)&&(v=>{const b=k=>{if(!k.isDefaultPrevented()){const x=k.dataTransfer;x&&(Et(x.types,"Files")||x.files.length>0)&&(k.preventDefault(),"drop"===k.type&&$i(v,"Dropped file type is not supported"))}},C=k=>{xi(v,k.target)&&b(k)},w=()=>{const k=_t.DOM,x=v.dom,E=document,S=v.inline?v.getBody():v.getDoc(),O=["drop","dragover"];j(O,B=>{k.bind(E,B,C),x.bind(S,B,b)}),v.on("remove",()=>{j(O,B=>{k.unbind(E,B,C),x.unbind(S,B,b)})})};v.on("init",()=>{$e.setEditorTimeout(v,w,0)})})(p),(p=>{const v=Qa(()=>{if(!p.removed&&p.getBody().contains(document.activeElement)){const b=p.selection.getRng();if(b.collapsed){const C=Tu(p,b,!1);p.selection.setRng(C)}}},0);p.on("focus",()=>{v.throttle()}),p.on("blur",()=>{v.cancel()})})(t),(p=>{p.on("init",()=>{p.on("focusin",v=>{const b=v.target;if(wn(b)){const C=Go(p.getBody(),b),w=At(C)?C:b;p.selection.getNode()!==w&&oa(p,w).each(k=>p.selection.setRng(k))}})})})(t)),{showCaret:d,showBlockCaretContainer:p=>{p.hasAttribute("data-mce-caret")&&(ud(p),e.scrollIntoView(p))},hideFakeCaret:h,destroy:()=>{r.destroy(),i=null}};var p},rA=(t,e)=>{let n=e;for(let o=t.previousSibling;z(o);o=o.previousSibling)n+=o.data.length;return n},P1=(t,e,n,o,r)=>{if(z(n)&&(o<0||o>n.data.length))return[];const s=r&&z(n)?[rA(n,o)]:[o];let a=n;for(;a!==e&&a.parentNode;)s.push(t.nodeIndex(a,r)),a=a.parentNode;return a===e?s.reverse():[]},Em=(t,e,n,o,r,s,a=!1)=>({start:P1(t,e,n,o,a),end:P1(t,e,r,s,a)}),L1=(t,e)=>{const n=e.slice(),o=n.pop();return on(o)?Oe(n,(r,s)=>r.bind(a=>y.from(a.childNodes[s])),y.some(t)).bind(r=>z(r)&&(o<0||o>r.data.length)?y.none():y.some({node:r,offset:o})):y.none()},M1=(t,e)=>L1(t,e.start).bind(({node:n,offset:o})=>L1(t,e.end).map(({node:r,offset:s})=>{const a=document.createRange();return a.setStart(n,o),a.setEnd(r,s),a})),qr=(t,e,n)=>{if(e&&t.isEmpty(e)&&!n(e)){const o=e.parentNode;t.remove(e),qr(t,o,n)}},gl=(t,e,n,o=!0)=>{const r=e.startContainer.parentNode,s=e.endContainer.parentNode;e.deleteContents(),o&&!n(e.startContainer)&&(z(e.startContainer)&&0===e.startContainer.data.length&&t.remove(e.startContainer),z(e.endContainer)&&0===e.endContainer.data.length&&t.remove(e.endContainer),qr(t,r,n),r!==s&&qr(t,s,n))},Nm=(t,e)=>y.from(t.dom.getParent(e.startContainer,t.dom.isBlock)),I1=(t,e,n)=>{const o=t.dynamicPatternsLookup({text:n,block:e});return kt(it({},t),{blockPatterns:gp(o).concat(t.blockPatterns),inlinePatterns:pp(o).concat(t.inlinePatterns)})},F1=(t,e,n,o)=>{const r=t.createRng();return r.setStart(e,0),r.setEnd(n,o),r.toString()},U1=(t,e,n)=>{((o,r,s)=>{if(z(o)&&0>=o.length)return y.some(gn(o,0));{const a=Fo(Zi);return y.from(a.forwards(o,0,tl(o),s)).map(i=>gn(i.container,0))}})(e,0,e).each(o=>{const r=o.container;wC(r,n.start.length,e).each(s=>{const a=t.createRng();a.setStart(r,0),a.setEnd(s.container,s.offset),gl(t,a,i=>i===e)})})},z1=(t,e)=>t.create("span",{"data-mce-type":"bookmark",id:e}),pl=(t,e)=>{const n=t.createRng();return n.setStartAfter(e.start),n.setEndBefore(e.end),n},j1=(t,e,n)=>{const o=M1(t.getRoot(),n).getOrDie("Unable to resolve path range"),r=o.startContainer,s=o.endContainer,a=0===o.endOffset?s:s.splitText(o.endOffset),i=0===o.startOffset?r:r.splitText(o.startOffset),l=i.parentNode;return{prefix:e,end:a.parentNode.insertBefore(z1(t,e+"-end"),a),start:l.insertBefore(z1(t,e+"-start"),i)}},H1=(t,e,n)=>{qr(t,t.get(e.prefix+"-end"),n),qr(t,t.get(e.prefix+"-start"),n)},Rm=t=>0===t.start.length,$1=(t,e,n,o)=>{const r=e.start;var s;return Zu(t,o.container,o.offset,(s=r,(a,i)=>{const l=a.data.substring(0,i),d=l.lastIndexOf(s.charAt(s.length-1)),c=l.lastIndexOf(s);return-1!==c?c+s.length:-1!==d?d+1:-1}),n).bind(a=>{if(a.offset>=r.length){const i=t.createRng();return i.setStart(a.container,a.offset-r.length),i.setEnd(a.container,a.offset),y.some(i)}return Ju(a.container,a.offset-r.length,n).map(l=>{const d=t.createRng();return d.setStart(l.container,l.offset),d.setEnd(a.container,a.offset),d}).filter(l=>l.toString()===r).orThunk(()=>$1(t,e,n,gn(a.container,0)))})},sA=(t,e,n,o)=>{const r=t.dom,s=r.getRoot(),a=n.pattern,i=n.position.container,l=n.position.offset;return Ju(i,l-n.pattern.end.length,e).bind(d=>{const c=Em(r,s,d.container,d.offset,i,l,o);if(Rm(a))return y.some({matches:[{pattern:a,startRng:c,endRng:c}],position:d});{const u=V1(t,n.remainingPatterns,d.container,d.offset,e,o),f=u.getOr({matches:[],position:d}),m=f.position;return((h,p,v,b,C,w=!1)=>{if(0===p.start.length&&!w){const k=h.createRng();return k.setStart(v,b),k.setEnd(v,b),y.some(k)}return Qu(v,b,C).bind(k=>$1(h,p,C,k).bind(x=>{var E;return w&&(x.endContainer===k.container&&x.endOffset===k.offset||0===k.offset&&(null===(E=x.endContainer.textContent)||void 0===E?void 0:E.length)===x.endOffset)?y.none():y.some(x)}))})(r,a,m.container,m.offset,e,u.isNone()).map(h=>{const p=((v,b,C,w=!1)=>Em(v,b,C.startContainer,C.startOffset,C.endContainer,C.endOffset,w))(r,s,h,o);return{matches:f.matches.concat([{pattern:a,startRng:p,endRng:c}]),position:gn(h.startContainer,h.startOffset)}})}})},V1=(t,e,n,o,r,s)=>{const a=t.dom;return Qu(n,o,a.getRoot()).bind(i=>{const l=F1(a,r,n,o);for(let d=0;d<e.length;d++){const c=e[d];if(!sf(l,c.end))continue;const u=e.slice();u.splice(d,1);const f=sA(t,r,{pattern:c,remainingPatterns:u,position:i},s);if(f.isSome())return f}return y.none()})},q1=(t,e,n)=>{t.selection.setRng(n),"inline-format"===e.type?j(e.format,o=>{t.formatter.apply(o)}):t.execCommand(e.cmd,!1,e.value)},W1=(t,e,n,o,r,s)=>V1(t,r.inlinePatterns,n,o,e,s).fold(()=>[],a=>a.matches),K1=(t,e)=>{if(0===e.length)return;const n=t.dom,o=t.selection.getBookmark(),r=((s,a)=>{const i=Ug("mce_textpattern"),l=ka(a,(d,c)=>{const u=j1(s,i+`_end${d.length}`,c.endRng);return d.concat([kt(it({},c),{endMarker:u})])},[]);return ka(l,(d,c)=>{const u=l.length-d.length-1,f=Rm(c.pattern)?c.endMarker:j1(s,i+`_start${u}`,c.startRng);return d.concat([kt(it({},c),{startMarker:f})])},[])})(n,e);j(r,s=>{const a=n.getParent(s.startMarker.start,n.isBlock),i=l=>l===a;Rm(s.pattern)?((l,d,c,u)=>{const f=pl(l.dom,c);gl(l.dom,f,u),q1(l,d,f)})(t,s.pattern,s.endMarker,i):((l,d,c,u,f)=>{const m=l.dom,g=pl(m,u),h=pl(m,c);gl(m,h,f),gl(m,g,f);const v=pl(m,{prefix:c.prefix,start:c.end,end:u.start});q1(l,d,v)})(t,s.pattern,s.startMarker,s.endMarker,i),H1(n,s.endMarker,i),H1(n,s.startMarker,i)}),t.selection.moveToBookmark(o)},G1=(t,e,n)=>{for(let o=0;o<t.length;o++)if(n(t[o],e))return!0;return!1},Am=_t.DOM,lA=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,Om=t=>os(t,e=>!1===Se(e)),Y1=t=>{const e=t.options.get,n=t.editorUpload.blobCache;return Om({allow_conditional_comments:e("allow_conditional_comments"),allow_html_data_urls:e("allow_html_data_urls"),allow_svg_data_urls:e("allow_svg_data_urls"),allow_html_in_named_anchor:e("allow_html_in_named_anchor"),allow_script_urls:e("allow_script_urls"),allow_unsafe_link_target:e("allow_unsafe_link_target"),convert_fonts_to_spans:e("convert_fonts_to_spans"),fix_list_elements:e("fix_list_elements"),font_size_legacy_values:e("font_size_legacy_values"),forced_root_block:e("forced_root_block"),forced_root_block_attrs:e("forced_root_block_attrs"),preserve_cdata:e("preserve_cdata"),remove_trailing_brs:e("remove_trailing_brs"),inline_styles:e("inline_styles"),root_name:lA(t),validate:!0,blob_cache:n,document:t.getDoc()})},X1=t=>{const e=t.options.get;return Om({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},Q1=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,J1=t=>{const e=Q1(t),n=Ep(t),o=t.contentCSS,r=()=>{e.unloadAll(o),t.inline||t.ui.styleSheetLoader.unloadAll(n)},s=()=>{t.removed?r():t.on("remove",r)};if(t.contentStyles.length>0){let l="";H.each(t.contentStyles,d=>{l+=d+"\r\n"}),t.dom.addStyle(l)}const a=Promise.all(((l,d,c)=>{const u=[Q1(l).loadAll(d)];return l.inline?u:u.concat([l.ui.styleSheetLoader.loadAll(c)])})(t,o,n)).then(s).catch(s),i=kk(t);return i&&((l,d)=>{const c=R(l.getBody()),u=Zl(Jn(c)),f=Jt("style");Qt(f,"type","text/css"),qt(f,dr(d)),qt(u,f),l.on("remove",()=>{Ot(f)})})(t,i),a},Tm=t=>{var e;!0!==t.removed&&(On(e=t)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,e.dispatch("Init"),e.focus(!0),(o=>{const r=o.dom.getRoot();o.inline||mi(o)&&o.selection.getStart(!0)!==r||we(r).each(s=>{const a=s.getNode(),i=zn(a)?we(a).getOr(s):s;o.selection.setRng(i.toRange())})})(e),e.nodeChanged({initial:!0});const n=Yk(e);yt(n)&&n.call(e,e),(o=>{const r=Qk(o);r&&$e.setEditorTimeout(o,()=>{let s;s=!0===r?o:o.editorManager.get(r),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)})(e)})(t))},Z1=t=>{const e=t.getElement();let n=t.getDoc();t.inline&&(Am.addClass(e,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);const o=t.getBody();var a,i;o.disabled=!0,t.readonly=Ap(t),t.readonly||(t.inline&&"static"===Am.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,t.editorUpload=(t=>{const e=(()=>{let h=[];const p=C=>{if(!C.blob||!C.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const w=C.id||"blobid"+$E+++(()=>{const S=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+S()+S()+S()})(),k=C.name||w,x=C.blob;var E;return{id:G(w),name:G(k),filename:G(C.filename||k+"."+(E=x.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[E.toLowerCase()]||"dat")),blob:G(x),base64:G(C.base64),blobUri:G(C.blobUri||URL.createObjectURL(x)),uri:G(C.uri)}},v=C=>Vt(h,C).getOrUndefined(),b=C=>v(w=>w.id()===C);return{create:(C,w,k,x,E)=>{if(lt(C))return p({id:C,name:x,filename:E,blob:w,base64:k});if(pe(C))return p(C);throw new Error("Unknown input type")},add:C=>{b(C.id())||h.push(C)},get:b,getByUri:C=>v(w=>w.blobUri()===C),getByData:(C,w)=>v(k=>k.base64()===C&&k.blob().type===w),findFirst:v,removeByUri:C=>{h=ut(h,w=>w.blobUri()!==C||(URL.revokeObjectURL(w.blobUri()),!1))},destroy:()=>{j(h,C=>{URL.revokeObjectURL(C.blobUri())}),h=[]}}})();let n,o;const r=Fv(),s=[],a=h=>p=>t.selection?h(p):[],i=(h,p,v)=>{let b=0;do{b=h.indexOf(p,b),-1!==b&&(h=h.substring(0,b)+v+h.substr(b+p.length),b+=v.length-p.length+1)}while(-1!==b);return h},l=(h,p,v)=>(h=i(h,`src="${p}"`,`src="${v}"${v===vt.transparentSrc?' data-mce-placeholder="1"':""}`),i(h,'data-mce-src="'+p+'"','data-mce-src="'+v+'"')),d=(h,p)=>{j(t.undoManager.data,v=>{"fragmented"===v.type?v.fragments=bt(v.fragments,b=>l(b,h,p)):v.content=l(v.content,h,p)})},c=()=>(n||(n=zv(t,r)),m().then(a(h=>{const p=bt(h,v=>v.blobInfo);return n.upload(p,Uv(t)).then(a(v=>{const b=[];let C=!1;const w=bt(v,(k,x)=>{const{blobInfo:E,image:S}=h[x];let O=!1;return k.status&&fk(t)?(k.url&&!re(S.src,k.url)&&(C=!0),e.removeByUri(S.src),On(t)||((B,_)=>{const D=t.convertURL(_,"src");var M;d(B.src,_),Qn(R(B),{src:xp(t)?(M=_,M+(-1===M.indexOf("?")?"?":"&")+(new Date).getTime()):_,"data-mce-src":D})})(S,k.url)):k.error&&(k.error.remove&&(d(S.src,vt.transparentSrc),b.push(S),O=!0),$i(t,ln.translate(["Failed to upload image: {0}",k.error.message]))),{element:S,status:k.status,uploadUri:k.url,blobInfo:E,removed:O}});return b.length>0&&!On(t)?t.undoManager.transact(()=>{j(b,k=>{t.dom.remove(k),e.removeByUri(k.src)})}):C&&t.undoManager.dispatchChange(),w}))}))),u=()=>wp(t)?c():Promise.resolve([]),f=h=>rr(s,p=>p(h)),m=()=>(o||(o=((t,e)=>{const n={};return{findAll:(o,r=Ut)=>{const s=ut((i=o)?be(i.getElementsByTagName("img")):[],i=>{const l=i.src;return!i.hasAttribute("data-mce-bogus")&&!i.hasAttribute("data-mce-placeholder")&&!(!l||l===vt.transparentSrc)&&(ne(l,"blob:")?!t.isUploaded(l)&&r(i):!!ne(l,"data:")&&r(i))}),a=bt(s,i=>{const l=i.src;if(gt(n,l))return n[l].then(d=>lt(d)?d:{image:i,blobInfo:d.blobInfo});{const d=((c,u)=>{const f=()=>Promise.reject("Invalid data URI");if(ne(u,"blob:")){const h=c.getByUri(u);return Q(h)?Promise.resolve(h):(m=u,ne(m,"blob:")?(p=m,fetch(p).then(v=>v.ok?v.blob():Promise.reject()).catch(()=>Promise.reject(`Cannot convert ${p} to Blob. Resource might not exist or is inaccessible.`))):ne(m,"data:")?(g=m,new Promise((p,v)=>{hu(g).bind(({type:b,data:C,base64Encoded:w})=>ev(b,C,w)).fold(()=>v("Invalid data URI"),p)})):Promise.reject("Unknown URI format")).then(p=>nv(p).then(v=>ov(v,!1,b=>y.some(rv(c,p,b))).getOrThunk(f)))}var p,m,g;return ne(u,"data:")?sv(c,u).fold(f,h=>Promise.resolve(h)):Promise.reject("Unknown image data format")})(e,l).then(c=>(delete n[l],{image:i,blobInfo:c})).catch(c=>(delete n[l],c));return n[l]=d,d}});var i;return Promise.all(a)}}})(r,e)),o.findAll(t.getBody(),f).then(a(h=>{const p=ut(h,v=>!lt(v)||($i(t,v),!1));return On(t)||j(p,v=>{d(v.image.src,v.blobInfo.blobUri()),v.image.src=v.blobInfo.blobUri(),v.image.removeAttribute("data-mce-src")}),p}))),g=h=>h.replace(/src="(blob:[^"]+)"/g,(p,v)=>{const b=r.getResultUri(v);if(b)return'src="'+b+'"';let C=e.getByUri(v);return C||(C=Oe(t.editorManager.get(),(w,k)=>w||k.editorUpload&&k.editorUpload.blobCache.getByUri(v),void 0)),C?'src="data:'+C.blob().type+";base64,"+C.base64()+'"':p});return t.on("SetContent",()=>{wp(t)?u():m()}),t.on("RawSaveContent",h=>{h.content=g(h.content)}),t.on("GetContent",h=>{h.source_view||"raw"===h.format||"tree"===h.format||(h.content=g(h.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",h=>{j(h,p=>{const v=p.attr("src");if(!v||e.getByUri(v))return;const b=r.getResultUri(v);b&&p.attr("src",b)})})}),{blobCache:e,addFilter:h=>{s.push(h)},uploadImages:c,uploadImagesAuto:u,scanForImages:m,destroy:()=>{e.destroy(),r.destroy(),o=n=null}}})(t),t.schema=ro(X1(t)),t.dom=_t(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:yk(t),referrerPolicy:Ld(t),onSetAttrib:a=>{t.dispatch("SetAttrib",a)}}),t.parser=(a=>{const i=Mr(Y1(a),a.schema);return i.addAttributeFilter("src,href,style,tabindex",(l,d)=>{const c=a.dom,u="data-mce-"+d;let f=l.length;for(;f--;){const m=l[f];let g=m.attr(d);if(g&&!m.attr(u)){if(0===g.indexOf("data:")||0===g.indexOf("blob:"))continue;"style"===d?(g=c.serializeStyle(c.parseStyle(g),m.name),g.length||(g=null),m.attr(u,g),m.attr(d,g)):"tabindex"===d?(m.attr(u,g),m.attr(d,null)):m.attr(u,a.convertURL(g,d,m.name))}}}),i.addNodeFilter("script",l=>{let d=l.length;for(;d--;){const c=l[d],u=c.attr("type")||"no/type";0!==u.indexOf("mce-")&&c.attr("type","mce-"+u)}}),gS(a)&&i.addNodeFilter("#cdata",l=>{var d;let c=l.length;for(;c--;){const u=l[c];u.type=8,u.name="#comment",u.value="[CDATA["+a.dom.encode(null!==(d=u.value)&&void 0!==d?d:"")+"]]"}}),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let d=l.length;const c=a.schema.getNonEmptyElements();for(;d--;){const u=l[d];u.isEmpty(c)&&0===u.getAll("br").length&&u.append(new xe("br",1))}}),i})(t),t.serializer=Tv((a=>{const i=a.options.get;return it(it(it({},Y1(a)),X1(a)),Om({url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")}))})(t),t),t.selection=Ov(t.dom,t.getWin(),t.serializer,t),t.annotator=Eh(t),t.formatter=$v(t),t.undoManager=qv(t),t._nodeChangeDispatcher=new LR(t),t._selectionOverrides=oA(t),(a=>{const i=so(),l=Wt(!1),d=Sd(c=>{a.dispatch("longpress",kt(it({},c),{type:"longpress"})),l.set(!0)},400);a.on("touchstart",c=>{Vy(c).each(u=>{d.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};d.throttle(c),l.set(!1),i.set(f)})},!0),a.on("touchmove",c=>{d.cancel(),Vy(c).each(u=>{i.on(f=>{((m,g)=>{const h=Math.abs(m.clientX-g.x),p=Math.abs(m.clientY-g.y);return h>5||p>5})(u,f)&&(i.clear(),l.set(!1),a.dispatch("longpresscancel"))})})},!0),a.on("touchend touchcancel",c=>{d.cancel(),"touchcancel"!==c.type&&i.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{l.get()?c.preventDefault():a.dispatch("tap",kt(it({},c),{type:"tap"}))})},!0)})(t),(i=a=t).on("click",l=>{i.dom.getParent(l.target,"details")&&l.preventDefault()}),(i=>{i.parser.addNodeFilter("details",l=>{j(l,d=>{d.attr("data-mce-open",d.attr("open")),d.attr("open","open")})}),i.serializer.addNodeFilter("details",l=>{j(l,d=>{const c=d.attr("data-mce-open");d.attr("open",lt(c)?c:null),d.attr("data-mce-open",null)})})})(a),(a=>{const i="contenteditable",l=" "+H.trim(mS(a))+" ",d=" "+H.trim(Tp(a))+" ",c=Ky(l),u=Ky(d),f=fS(a);f.length>0&&a.on("BeforeSetContent",m=>{((g,h,p)=>{let v=h.length,b=p.content;if("raw"!==p.format){for(;v--;)b=b.replace(h[v],DN(g,b,Tp(g)));p.content=b}})(a,f,m)}),a.parser.addAttributeFilter("class",m=>{let g=m.length;for(;g--;){const h=m[g];c(h)?h.attr(i,"true"):u(h)&&h.attr(i,"false")}}),a.serializer.addAttributeFilter(i,m=>{let g=m.length;for(;g--;){const h=m[g];(c(h)||u(h))&&(f.length>0&&h.attr("data-mce-content")?(h.name="#text",h.type=3,h.raw=!0,h.value=h.attr("data-mce-content")):h.attr(i,null))}})})(t),On(t)||((a=>{a.on("mousedown",i=>{i.detail>=3&&(i.preventDefault(),(t=>{const e=((n,o)=>{const r=F.fromRangeStart(n).getNode(),s=(c=o,fr(R(r),u=>Cn(u.dom)||an(u),S1(c)).getOr(R(c)).dom),a=E1(r,s,!1),i=E1(r,s,!0),l=document.createRange();var c;return _1(a,s).fold(()=>{k1(a)?l.setStart(a,0):l.setStartBefore(a)},d=>l.setStartBefore(d.dom)),_1(i,s).fold(()=>{k1(i)?l.setEnd(i,i.data.length):l.setEndAfter(i)},d=>l.setEndAfter(d.dom)),l})(t.selection.getRng(),t.getBody());t.selection.setRng(qc(e))})(a))})})(t),(a=>{(i=>{const l=[",",".",";",":","!","?"],d=[32],c=()=>{return m=cS(i),g=uS(i),{inlinePatterns:pp(m),blockPatterns:gp(m),dynamicPatternsLookup:g};var m,g},u=()=>i.options.isSet("text_patterns_lookup");i.on("keydown",m=>{if(13===m.keyCode&&!ot.modifierPressed(m)&&i.selection.isCollapsed()){const g=c();(g.inlinePatterns.length>0||g.blockPatterns.length>0||u())&&((t,e)=>{const n=t.selection.getRng();return Nm(t,n).map(o=>{var r;const s=Math.max(0,n.startOffset),a=I1(e,o,null!==(r=o.textContent)&&void 0!==r?r:""),i=W1(t,o,n.startContainer,s,a,!0),l=((d,c,u,f)=>{var m;const g=d.dom,h=Te(d);if(!g.is(c,h))return[];const p=null!==(m=c.textContent)&&void 0!==m?m:"";return((v,b)=>{const C=ns(v,(x,E)=>E.start.length-x.start.length),w=b.replace(Zt," ");return Vt(C,k=>0===b.indexOf(k.start)||0===w.indexOf(k.start))})(u.blockPatterns,p).map(v=>H.trim(p).length===v.start.length?[]:[{pattern:v,range:Em(g,g.getRoot(),c,0,c,0,!0)}]).getOr([])})(t,o,a);return(l.length>0||i.length>0)&&(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{t.insertContent("\ufeff"),K1(t,i),((u,f)=>{if(0===f.length)return;const m=u.selection.getBookmark();j(f,g=>((h,p)=>{const b=p.pattern,C=M1(h.dom.getRoot(),p.range).getOrDie("Unable to resolve path range");return Nm(h,C).each(w=>{"block-format"===b.type?((k,x)=>{const E=x.get(k);return jt(E)&&_e(E).exists(S=>gt(S,"block"))})(b.format,h.formatter)&&h.undoManager.transact(()=>{U1(h.dom,w,b),h.formatter.apply(b.format)}):"block-command"===b.type&&h.undoManager.transact(()=>{U1(h.dom,w,b),h.execCommand(b.cmd,!1,b.value)})}),!0})(u,g)),u.selection.moveToBookmark(m)})(t,l);const d=t.selection.getRng(),c=Qu(d.startContainer,d.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),c.each(u=>{const f=u.container;"\ufeff"===f.data.charAt(u.offset-1)&&(f.deleteData(u.offset-1,1),qr(t.dom,f.parentNode,m=>m===t.dom.getRoot()))})}),!0)}).getOr(!1)})(i,g)&&m.preventDefault()}},!0);const f=()=>{if(i.selection.isCollapsed()){const m=c();(m.inlinePatterns.length>0||u())&&((g,h)=>{const p=g.selection.getRng();Nm(g,p).map(v=>{const b=Math.max(0,p.startOffset-1),C=F1(g.dom,v,p.startContainer,b),w=I1(h,v,C),k=W1(g,v,p.startContainer,b,w,!1);k.length>0&&g.undoManager.transact(()=>{K1(g,k)})})})(i,m)}};i.on("keyup",m=>{G1(d,m,(g,h)=>g===h.keyCode&&!ot.modifierPressed(h))&&f()}),i.on("keypress",m=>{G1(l,m,(g,h)=>g.charCodeAt(0)===h.charCode)&&$e.setEditorTimeout(i,f)})})(a)})(t));const r=PR(t);((t,e)=>{t.addCommand("delete",()=>{var n;$y(n=t,e,!1).fold(()=>{Wb(n),Bc(n)},Jr)}),t.addCommand("forwardDelete",()=>{var n;$y(n=t,e,!0).fold(()=>qb(n,"ForwardDelete"),Jr)})})(t,r),(a=>{a.on("NodeChange",et(BN,a))})(t),(a=>{var i;const l=a.dom,d=Te(a),c=null!==(i=Nk(a))&&void 0!==i?i:"",u=(f,m)=>{if((p=>{if(Kv(p)){const v=p.keyCode;return!Gv(p)&&(ot.metaKeyPressed(p)||p.altKey||v>=112&&v<=123||Et(XE,v))}return!1})(f))return;const g=a.getBody(),h=!(Kv(p=f)&&!(Gv(p)||"keyup"===p.type&&229===p.keyCode))&&((p,v,b)=>{if(te(R(v),!1)){const C=v.firstElementChild;return!C||!p.getStyle(v.firstElementChild,"padding-left")&&!p.getStyle(v.firstElementChild,"padding-right")&&b===C.nodeName.toLowerCase()}return!1})(l,g,d);var p;(""!==l.getAttrib(g,Wv)!==h||m)&&(l.setAttrib(g,Wv,h?c:null),l.setAttrib(g,"aria-placeholder",h?c:null),((p,v)=>{p.dispatch("PlaceholderToggle",{state:v})})(a,h),a.on(h?"keydown":"keyup",u),a.off(h?"keyup":"keydown",u))};hn(c)&&a.on("init",f=>{u(f,!0),a.on("change SetContent ExecCommand",u),a.on("paste",m=>$e.setEditorTimeout(a,()=>u(m)))})})(t),(t=>{const e=Wt(!1),n=Wt(iS(t)?"text":"html"),o=(r=>{const s=Wt(null);return{create:()=>((a,i)=>{const{dom:l,selection:d}=a,c=a.getBody();i.set(d.getRng());const u=l.add(a.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},a1);vt.browser.isFirefox()&&l.setStyle(u,"left","rtl"===l.getStyle(c,"direction",!0)?65535:-65535),l.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),d.select(u,!0)})(r,s),remove:()=>((a,i)=>{const l=a.dom;if(ym(a)){let d;const c=i.get();for(;d=ym(a);)l.remove(d),l.unbind(d);c&&a.selection.setRng(c)}i.set(null)})(r,s),getEl:()=>ym(r),getHtml:()=>(a=>{const i=a.dom,l=(f,m)=>{f.appendChild(m),i.remove(m,!0)},[d,...c]=ut(a.getBody().childNodes,IR);j(c,f=>{l(d,f)});const u=i.select("div[id=mcepastebin]",d);for(let f=u.length-1;f>=0;f--){const m=i.create("div");d.insertBefore(m,u[f]),l(m,u[f])}return d?d.innerHTML:""})(r),getLastRng:s.get}})(t);var r,s,a;r=t,(vt.browser.isChromium()||vt.browser.isSafari())&&(a=$R,(s=r).on("PastePreProcess",i=>{i.content=a(s,i.content,i.internal)})),((r,s)=>{r.addCommand("mceTogglePlainTextPaste",()=>{((a,i)=>{"text"===i.get()?(i.set("html"),Dh(a,!1)):(i.set("text"),Dh(a,!0)),a.focus()})(r,s)}),r.addCommand("mceInsertClipboardContent",(a,i)=>{i.html&&ml(r,i.html,i.internal),i.text&&xm(r,i.text)})})(t,n),(r=>{const s=l=>d=>{l(r,d)},a=eS(r);yt(a)&&r.on("PastePreProcess",s(a));const i=nS(r);yt(i)&&r.on("PastePostProcess",s(i))})(t),t.on("PreInit",()=>{(r=>{r.on("cut",(s=>a=>{!a.isDefaultPrevented()&&y1(s)&&h1(a,v1(s),b1(s),()=>{if(vt.browser.isChromium()||vt.browser.isFirefox()){const i=s.selection.getRng();$e.setEditorTimeout(s,()=>{s.selection.setRng(i),s.execCommand("Delete")},0)}else s.execCommand("Delete")})})(r)),r.on("copy",(s=>a=>{!a.isDefaultPrevented()&&y1(s)&&h1(a,v1(s),b1(s),pt)})(r))})(t),((r,s)=>{tS(r)&&r.on("dragend dragover draggesture dragdrop drop drag",a=>{a.preventDefault(),a.stopPropagation()}),oi(r)||r.on("drop",a=>{const i=a.dataTransfer;i&&zt(i.files,d=>/^image\//.test(d.type))&&a.preventDefault()}),r.on("drop",a=>{if(a.isDefaultPrevented()||s.get())return;const i=C1(r,a);if(Ft(i))return;const l=m1(a.dataTransfer),d=$r(l,ul());if((!f1(l)||(f=>{const m=f["text/plain"];return!!m&&0===m.indexOf("file://")})(l))&&g1(r,a,i))return;const c=l[ul()],u=c||l["text/html"]||l["text/plain"];u&&(a.preventDefault(),$e.setEditorTimeout(r,()=>{r.undoManager.transact(()=>{c&&r.execCommand("Delete"),w1(r,i);const f=d1(u);l["text/html"]?ml(r,f,d):xm(r,f)})}))}),r.on("dragstart",a=>{s.set(!0)}),r.on("dragover dragend",a=>{oi(r)&&!s.get()&&(a.preventDefault(),w1(r,C1(r,a))),"dragend"===a.type&&s.set(!1)})})(t,e),((t,e,n)=>{((o,r,s)=>{let a;o.on("keydown",i=>{var l;(ot.metaKeyPressed(l=i)&&86===l.keyCode||l.shiftKey&&45===l.keyCode)&&!i.isDefaultPrevented()&&(a=i.shiftKey&&86===i.keyCode)}),o.on("paste",i=>{if(i.isDefaultPrevented()||(c=i,vt.os.isAndroid()&&0===(null===(f=null===(u=c.clipboardData)||void 0===u?void 0:u.items)||void 0===f?void 0:f.length)))return;var c,u,f;const l="text"===s.get()||a;a=!1;const d=m1(i.clipboardData);!f1(d)&&g1(o,i,r.getLastRng()||o.selection.getRng())||($r(d,"text/html")?(i.preventDefault(),p1(o,d,d["text/html"],l)):(r.create(),$e.setEditorTimeout(o,()=>{const c=r.getHtml();r.remove(),p1(o,d,c,l)},0)))})})(t,e,n),(o=>{const r=a=>ne(a,"webkit-fake-url"),s=a=>ne(a,"data:");o.parser.addNodeFilter("img",(a,i,l)=>{if(!oi(o)&&!0===(null===(c=l.data)||void 0===c?void 0:c.paste))for(const d of a){const c=d.attr("src");lt(c)&&!d.attr("data-mce-object")&&c!==vt.transparentSrc&&(r(c)||!dS(o)&&s(c))&&d.remove()}var c})})(t)})(t,o,n)})})(t);const s=(a=>{const i=a;return(l=a,Rt(l.plugins,"rtc").bind(d=>y.from(d.setup))).fold(()=>(i.rtcInstance=Sv(a),y.none()),l=>(i.rtcInstance=(()=>{const d=G(null),c=G("");return{init:{bindEvents:pt},undoManager:{beforeChange:pt,add:d,undo:d,redo:d,clear:pt,reset:pt,hasUndo:Tt,hasRedo:Tt,transact:d,ignore:pt,extra:pt},formatter:{match:Tt,matchAll:G([]),matchNode:G(void 0),canApply:Tt,closest:c,apply:pt,remove:pt,toggle:pt,formatChanged:G({unbind:pt})},editor:{getContent:c,setContent:G({content:"",html:""}),insertContent:G(""),addVisual:pt},selection:{getContent:c},autocompleter:{addDecoration:pt,removeDecoration:pt},raw:{getModel:G(y.none())}}})(),y.some(()=>l().then(d=>(i.rtcInstance=(c=>{const u=C=>pe(C)?C:{},{init:f,undoManager:m,formatter:g,editor:h,selection:p,autocompleter:v,raw:b}=c;return{init:{bindEvents:f.bindEvents},undoManager:{beforeChange:m.beforeChange,add:m.add,undo:m.undo,redo:m.redo,clear:m.clear,reset:m.reset,hasUndo:m.hasUndo,hasRedo:m.hasRedo,transact:(C,w,k)=>m.transact(k),ignore:(C,w)=>m.ignore(w),extra:(C,w,k,x)=>m.extra(k,x)},formatter:{match:(C,w,k,x)=>g.match(C,u(w),x),matchAll:g.matchAll,matchNode:g.matchNode,canApply:C=>g.canApply(C),closest:C=>g.closest(C),apply:(C,w,k)=>g.apply(C,u(w)),remove:(C,w,k,x)=>g.remove(C,u(w)),toggle:(C,w,k)=>g.toggle(C,u(w)),formatChanged:(C,w,k,x,E)=>g.formatChanged(w,k,x,E)},editor:{getContent:C=>h.getContent(C),setContent:(C,w)=>({content:h.setContent(C,w),html:""}),insertContent:(C,w)=>(h.insertContent(C),""),addVisual:h.addVisual},selection:{getContent:(C,w)=>p.getContent(w)},autocompleter:{addDecoration:v.addDecoration,removeDecoration:v.removeDecoration},raw:{getModel:()=>y.some(b.getRawModel())}}})(d),d.rtc.isRemote)))));var l})(t);(a=>{const i=a.getDoc(),l=a.getBody();a.dispatch("PreInit"),Jk(a)||(i.body.spellcheck=!1,Am.setAttrib(l,"spellcheck","false")),a.quirks=(t=>{const e=H.each,n=ot.BACKSPACE,o=ot.DELETE,r=t.dom,s=t.selection,a=t.parser,i=vt.browser,l=i.isFirefox(),d=i.isChromium()||i.isSafari(),c=vt.deviceType.isiPhone()||vt.deviceType.isiPad(),u=vt.os.isMacOS()||vt.os.isiOS(),f=(_,D)=>{try{t.getDoc().execCommand(_,!1,String(D))}catch(M){}},m=_=>_.isDefaultPrevented(),g=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},h=()=>{t.inline||r.bind(t.getDoc(),"mousedown mouseup",_=>{let D;if(_.target===t.getDoc().documentElement)if(D=s.getRng(),t.getBody().focus(),"mousedown"===_.type){if(Fe(D.startContainer))return;s.placeCaretAt(_.clientX,_.clientY)}else s.setRng(D)})},p=()=>{Range.prototype.getClientRects||t.on("mousedown",_=>{if(!m(_)&&"HTML"===_.target.nodeName){const D=t.getBody();D.blur(),$e.setEditorTimeout(t,()=>{D.focus()})}})},v=()=>{const _=Op(t);t.on("click",D=>{const M=D.target;/^(IMG|HR)$/.test(M.nodeName)&&"false"!==r.getContentEditableParent(M)&&(D.preventDefault(),t.selection.select(M),t.nodeChanged()),"A"===M.nodeName&&r.hasClass(M,_)&&0===M.childNodes.length&&(D.preventDefault(),s.select(M))})},b=()=>{t.on("keydown",_=>{if(!m(_)&&_.keyCode===n&&s.isCollapsed()&&0===s.getRng().startOffset){const D=s.getNode().previousSibling;if(D&&D.nodeName&&"table"===D.nodeName.toLowerCase())return _.preventDefault(),!1}return!0})},C=()=>{Ap(t)||t.on("BeforeExecCommand mousedown",()=>{f("StyleWithCSS",!1),f("enableInlineTableEditing",!1),Np(t)||f("enableObjectResizing",!1)})},w=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},k=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},x=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",_=>{let D;"HTML"===_.target.nodeName&&(D=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(D),t.selection.normalize(),t.nodeChanged())}))},E=()=>{u&&t.on("keydown",_=>{!ot.metaKeyPressed(_)||_.shiftKey||37!==_.keyCode&&39!==_.keyCode||(_.preventDefault(),t.selection.getSel().modify("move",37===_.keyCode?"backward":"forward","lineboundary"))})},S=()=>{t.on("click",_=>{let D=_.target;do{if("A"===D.tagName)return void _.preventDefault()}while(D=D.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},O=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",_=>{_.preventDefault()})})},B=pt;return On(t)?(d&&(h(),v(),O(),g(),c&&(k(),x(),S())),l&&(p(),C(),w(),E())):(t.on("keydown",_=>{if(m(_)||_.keyCode!==ot.BACKSPACE)return;let D=s.getRng();const M=D.startContainer,U=D.startOffset,K=r.getRoot();let Y=M;if(D.collapsed&&0===U){for(;Y.parentNode&&Y.parentNode.firstChild===Y&&Y.parentNode!==K;)Y=Y.parentNode;"BLOCKQUOTE"===Y.nodeName&&(t.formatter.toggle("blockquote",void 0,Y),D=r.createRng(),D.setStart(M,0),D.setEnd(M,0),s.setRng(D))}}),(()=>{const _=D=>{const M=r.create("body"),U=D.cloneContents();return M.appendChild(U),s.serializer.serialize(M,{format:"html"})};t.on("keydown",D=>{const M=D.keyCode;if(!m(D)&&(M===o||M===n)){const U=t.selection.isCollapsed(),K=t.getBody();if(U&&!r.isEmpty(K)||!U&&!(Y=>{const V=_(Y),st=r.createRng();return st.selectNode(t.getBody()),V===_(st)})(t.selection.getRng()))return;D.preventDefault(),t.setContent(""),K.firstChild&&r.isBlock(K.firstChild)?t.selection.setCursorLocation(K.firstChild,0):t.selection.setCursorLocation(K,0),t.nodeChanged()}})})(),vt.windowsPhone||t.on("keyup focusin mouseup",_=>{ot.modifierPressed(_)||(D=>{const M=D.getBody(),U=D.selection.getRng();return U.startContainer===U.endContainer&&U.startContainer===M&&0===U.startOffset&&U.endOffset===M.childNodes.length})(t)||s.normalize()},!0),d&&(h(),v(),t.on("init",()=>{f("DefaultParagraphSeparator",Te(t))}),O(),b(),a.addNodeFilter("br",_=>{let D=_.length;for(;D--;)"Apple-interchange-newline"===_[D].attr("class")&&_[D].remove()}),c?(k(),x(),S()):g()),l&&(t.on("keydown",_=>{if(!m(_)&&_.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&0===s.getRng().startOffset){const D=s.getNode(),M=D.previousSibling;if("HR"===D.nodeName)return r.remove(D),void _.preventDefault();M&&M.nodeName&&"hr"===M.nodeName.toLowerCase()&&(r.remove(M),_.preventDefault())}}}),p(),(()=>{const _=()=>{const M=r.getAttribs(s.getStart().cloneNode(!1));return()=>{const U=s.getStart();U!==t.getBody()&&(r.setAttrib(U,"style",null),e(M,K=>{U.setAttributeNode(K.cloneNode(!0))}))}},D=()=>!s.isCollapsed()&&r.getParent(s.getStart(),r.isBlock)!==r.getParent(s.getEnd(),r.isBlock);t.on("keypress",M=>{let U;return!(!(m(M)||8!==M.keyCode&&46!==M.keyCode)&&D()&&(U=_(),t.getDoc().execCommand("delete",!1),U(),M.preventDefault(),1))}),r.bind(t.getDoc(),"cut",M=>{if(!m(M)&&D()){const U=_();$e.setEditorTimeout(t,()=>{U()})}})})(),C(),t.on("SetContent ExecCommand",_=>{"setcontent"!==_.type&&"mceInsertLink"!==_.command||e(r.select("a"),D=>{var M;let U=D.parentNode;const K=r.getRoot();if((null==U?void 0:U.lastChild)===D){for(;U&&!r.isBlock(U);){if((null===(M=U.parentNode)||void 0===M?void 0:M.lastChild)!==U||U===K)return;U=U.parentNode}r.add(U,"br",{"data-mce-bogus":1})}})}),w(),E(),b())),{refreshContentEditable:B,isHidden:()=>{if(!l||t.removed)return!1;const _=t.selection.getSel();return!_||!_.rangeCount||0===_.rangeCount}}})(a),a.dispatch("PostRender");const d=Sk(a);void 0!==d&&(l.dir=d);const c=Zk(a);c&&a.on("BeforeSetContent",u=>{H.each(c,f=>{u.content=u.content.replace(f,m=>"\x3c!--mce:protected "+escape(m)+"--\x3e")})}),a.on("SetContent",()=>{a.addVisual(a.getBody())}),a.on("compositionstart compositionend",u=>{a.composing="compositionstart"===u.type})})(t),s.fold(()=>{J1(t).then(()=>Tm(t))},a=>{t.setProgressState(!0),J1(t).then(()=>{a().then(i=>{t.setProgressState(!1),Tm(t),_v(t)},i=>{t.notificationManager.open({type:"error",text:String(i)}),Tm(t),_v(t)})})})},tw=(t,e)=>{if(t.inline||(t.getElement().style.visibility=t.orgVisibility),e||t.inline)Z1(t);else{const o=t.iframeElement,r=((t,e,n,o)=>((r,s,a,i,l)=>{const d=(c=a,u=i,f=>{c(f)&&u((m=>{const g=R(zf(m).getOr(m.target)),h=()=>m.stopPropagation(),p=()=>m.preventDefault(),v=wo(p,h);return{target:g,x:m.clientX,y:m.clientY,stop:h,prevent:p,kill:v,raw:m}})(f))});var c,u;return r.dom.addEventListener(s,d,!1),{unbind:et(mx,r,s,d,!1)}})(t,"load",n,o))(R(o),0,jE,()=>{r.unbind(),t.contentDocument=o.contentDocument,Z1(t)});if(vt.browser.isFirefox()){const s=t.getDoc();s.open(),s.write(t.iframeHTML),s.close()}else o.srcdoc=t.iframeHTML}},Bm=_t.DOM,ew=_t.DOM,nw=(t,e)=>({editorContainer:t,iframeContainer:e,api:{}}),ow=t=>{const e=t.getElement();return t.inline?nw(null):(n=>{const o=ew.create("div");return ew.insertAfter(o,n),nw(o,o)})(e)},Jo=_t.DOM,rw=t=>"-"===t.charAt(0),sw=(t,e,n)=>y.from(e).filter(o=>hn(o)&&!Hi.has(o)).map(o=>({url:`${t.editorManager.baseURL}/icons/${o}/icons${n}.js`,name:y.some(o)})),aw=_o().deviceType,iw=aw.isPhone(),uA=aw.isTablet(),ha=t=>{if(Ft(t))return[];{const e=jt(t)?t:t.split(/[ ,]/),n=bt(e,ir);return ut(n,hn)}},Dm=(t,e)=>gt(t.sections(),e),fA=(t,e)=>it({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Rt(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},e?{menubar:!1}:{}),gA=(t,e)=>{var n;const o=null!==(n=e.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?H.extend({},t.external_plugins,o):o},bA=(t,e)=>{const n=t.selection,o=t.dom;return/^ | $/.test(e)?((r,s,a)=>{const i=R(r.getRoot());return a=Gs(i,F.fromRangeStart(s))?a.replace(/^ /,"&nbsp;"):a.replace(/^&nbsp;/," "),Ys(i,F.fromRangeEnd(s))?a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),e):e},hl=(t,e)=>{const{content:n,details:o}=(r=>{if("string"!=typeof r){const s=H.extend({paste:r.paste,data:{paste:r.paste}},r);return{content:r.content,details:s}}return{content:r,details:{}}})(e);vu(t,kt(it({},o),{content:bA(t,n),format:"html",set:!1,selection:!0})).each(r=>{const s=(i=r.content,l=o,_u(t).editor.insertContent(i,l));var i,l;yu(t,s,r),t.addVisual()})},vA={"font-size":"size","font-family":"face"},yA=Gl("font"),lw=t=>(e,n)=>y.from(n).map(R).filter(Qe).bind(o=>{return(r=t,s=e,a=o.dom,Yc(R(a),i=>{return Pa(l=i,r).orThunk(()=>yA(l)?Rt(vA,r).bind(d=>In(l,d)):y.none());var l},i=>wt(R(s),i))).or(((r,s)=>y.from(_t.DOM.getStyle(s,r,!0)))(t,o.dom));var r,s,a}).getOr(""),CA=lw("font-size"),wA=wo(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),lw("font-family")),xA=t=>we(t.getBody()).bind(e=>{const n=e.container();return y.from(z(n)?n.parentNode:n)}),Pm=(t,e)=>{return n=t,o=Km(y.some,e),(r=n,y.from(r.selection.getRng()).bind(s=>{const a=r.getBody();return s.startContainer===a&&0===s.startOffset?y.none():y.from(r.selection.getStart(!0))})).orThunk(et(xA,n)).map(R).filter(Qe).bind(o);var n,o,r},dw=(t,e)=>{if(/^[0-9.]+$/.test(e)){const n=parseInt(e,10);if(n>=1&&n<=7){const o=H.explode(t.options.get("font_size_style_values")),r=H.explode(t.options.get("font_size_classes"));return r.length>0?r[n-1]||e:o[n-1]||e}return e}return e},kA=t=>{const e=t.split(/\s*,\s*/);return bt(e,n=>-1===n.indexOf(" ")||ne(n,'"')||ne(n,"'")?n:`'${n}'`).join(",")};class cw{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,n=!1,o,r){const s=this.editor,a=e.toLowerCase(),i=null==r?void 0:r.skip_focus;if(s.removed||("mcefocus"!==a&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?hc(d=s).each(c=>d.selection.setRng(c)):s.focus()),s.dispatch("BeforeExecCommand",{command:e,ui:n,value:o}).isDefaultPrevented()))return!1;var d;const l=this.commands.exec[a];return!!yt(l)&&(l(a,n,o),s.dispatch("ExecCommand",{command:e,ui:n,value:o}),!0)}queryCommandState(e){if(this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=e.toLowerCase(),o=this.commands.state[n];return!!yt(o)&&o(n)}queryCommandValue(e){if(this.editor.quirks.isHidden()||this.editor.removed)return"";const n=e.toLowerCase(),o=this.commands.value[n];return yt(o)?o(n):""}addCommands(e,n="exec"){const o=this.commands;Nt(e,(r,s)=>{j(s.toLowerCase().split(","),a=>{o[n][a]=r})})}addCommand(e,n,o){const r=e.toLowerCase();this.commands.exec[r]=(s,a,i)=>n.call(null!=o?o:this.editor,a,i)}queryCommandSupported(e){const n=e.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(e,n,o){this.commands.state[e.toLowerCase()]=()=>n.call(null!=o?o:this.editor)}addQueryValueHandler(e,n,o){this.commands.value[e.toLowerCase()]=()=>n.call(null!=o?o:this.editor)}}const Wr="data-mce-contenteditable",Lm=(t,e,n)=>{try{t.getDoc().execCommand(e,!1,String(n))}catch(o){}},bl=(t,e)=>{t.dom.contentEditable=e?"true":"false"},Zo=t=>t.readonly,uw=t=>{t.parser.addAttributeFilter("contenteditable",e=>{Zo(t)&&j(e,n=>{n.attr(Wr,n.attr("contenteditable")),n.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(Wr,e=>{Zo(t)&&j(e,n=>{n.attr("contenteditable",n.attr(Wr))})}),t.serializer.addTempAttr(Wr)},EA=["copy"],NA=H.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Mm{constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Tt}static isNative(e){return!!NA[e.toLowerCase()]}fire(e,n){return this.dispatch(e,n)}dispatch(e,n){const o=e.toLowerCase(),r=yd(o,null!=n?n:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);const s=this.bindings[o];if(s)for(let a=0,i=s.length;a<i;a++){const l=s[a];if(!l.removed){if(l.once&&this.off(o,l.func),r.isImmediatePropagationStopped())return r;if(!1===l.func.call(this.scope,r))return r.preventDefault(),r}}return r}on(e,n,o,r){if(!1===n&&(n=Tt),n){const s={func:n,removed:!1};r&&H.extend(s,r);const a=e.toLowerCase().split(" ");let i=a.length;for(;i--;){const l=a[i];let d=this.bindings[l];d||(d=[],this.toggleEvent(l,!0)),d=o?[s,...d]:[...d,s],this.bindings[l]=d}}return this}off(e,n){if(e){const o=e.toLowerCase().split(" ");let r=o.length;for(;r--;){const s=o[r];let a=this.bindings[s];if(!s)return Nt(this.bindings,(i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(a){if(n){const i=Zr(a,l=>l.func===n);a=i.fail,this.bindings[s]=a,j(i.pass,l=>{l.removed=!0})}else a.length=0;a.length||(this.toggleEvent(e,!1),delete this.bindings[s])}}}else Nt(this.bindings,(o,r)=>{this.toggleEvent(r,!1)}),this.bindings={};return this}once(e,n,o){return this.on(e,n,o,{once:!0})}has(e){e=e.toLowerCase();const n=this.bindings[e];return!(!n||0===n.length)}}const ba=t=>(t._eventDispatcher||(t._eventDispatcher=new Mm({scope:t,toggleEvent:(e,n)=>{Mm.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher),Im={fire(t,e,n){return this.dispatch(t,e,n)},dispatch(t,e,n){const o=this;if(o.removed&&"remove"!==t&&"detach"!==t)return yd(t.toLowerCase(),null!=e?e:{},o);const r=ba(o).dispatch(t,e);if(!1!==n&&o.parent){let s=o.parent();for(;s&&!r.isPropagationStopped();)s.dispatch(t,r,!1),s=s.parent?s.parent():void 0}return r},on(t,e,n){return ba(this).on(t,e,n)},off(t,e){return ba(this).off(t,e)},once(t,e){return ba(this).once(t,e)},hasEventListeners(t){return ba(this).has(t)}},vl=_t.DOM;let tr;const yl=(t,e)=>{if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(e))return t.getDoc().documentElement;const n=Rp(t);return n?(t.eventRoot||(t.eventRoot=vl.select(n)[0]),t.eventRoot):t.getBody()},mw=(t,e,n)=>{var o;(o=t).hidden||Zo(o)?Zo(t)&&((o,r)=>{if("click"!==r.type||ot.metaKeyPressed(r))Et(EA,r.type)&&o.dispatch(r.type,r);else{const s=R(r.target);(a=o,i=s,To(i,"a",l=>wt(l,R(a.getBody()))).bind(l=>In(l,"href"))).each(a=>{if(r.preventDefault(),/^#/.test(a)){const l=o.dom.select(`${a},[name="${i=a,ne(i,"#")?(d=i,d.substring(1)):i}"]`);l.length&&o.selection.scrollIntoView(l[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes");var d,i})}var a,i})(t,n):t.dispatch(e,n)},fw=(t,e)=>{if(t.delegates||(t.delegates={}),t.delegates[e]||t.removed)return;const n=yl(t,e);if(Rp(t)){if(tr||(tr={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||tr&&(Nt(tr,(r,s)=>{t.dom.unbind(yl(t,s))}),tr=null)})),tr[e])return;const o=r=>{const s=r.target,a=t.editorManager.get();let i=a.length;for(;i--;){const l=a[i].getBody();(l===s||vl.isChildOf(s,l))&&mw(a[i],e,r)}};tr[e]=o,vl.bind(n,e,o)}else{const o=r=>{mw(t,e,r)};vl.bind(n,e,o),t.delegates[e]=o}},gw=kt(it({},Im),{bindPendingEventDelegates(){const t=this;H.each(t._pendingNativeEvents,e=>{fw(t,e)})},toggleNativeEvent(t,e){const n=this;"focus"!==t&&"blur"!==t&&(n.removed||(e?n.initialized?fw(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(yl(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,e=t.getBody(),n=t.dom;t.delegates&&(Nt(t.delegates,(o,r)=>{t.dom.unbind(yl(t,r),r,o)}),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}}),RA=t=>lt(t)?{value:t.split(/[ ,]/),valid:!0}:or(t,lt)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},pw=(t,e)=>t+(as(e.message)?"":`. ${e.message}`),hw=t=>t.valid,Fm=(t,e,n="")=>{const o=e(t);return Co(o)?o?{value:t,valid:!0}:{valid:!1,message:n}:o},AA=["design","readonly"],bw=(t,e,n,o)=>{const r=n[e.get()],s=n[o];try{s.activate()}catch(a){return void console.error(`problem while activating editor mode ${o}:`,a)}var a;r.deactivate(),r.editorReadOnly!==s.editorReadOnly&&((t,e)=>{const n=R(t.getBody());var o,r,s;s=e,Xl(o=n,r="mce-content-readonly")&&!s?Oa(o,r):s&&ds(o,r),e?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),(o=>{y.from(o.selection.getNode()).each(r=>{r.removeAttribute("data-mce-selected")})})(t),t.readonly=!0,bl(n,!1),j(ye(n,'*[contenteditable="true"]'),o=>{Qt(o,Wr,"true"),bl(o,!1)})):(t.readonly=!1,bl(n,!0),j(ye(n,'*[data-mce-contenteditable="true"]'),o=>{se(o,Wr),bl(o,!0)}),Lm(t,"StyleWithCSS",!1),Lm(t,"enableInlineTableEditing",!1),Lm(t,"enableObjectResizing",!1),(o=>qo(o)||(r=>{const s=Jn(R(r.getElement()));return gc(s).filter(a=>!(i=>{const l=i.classList;return void 0!==l&&(l.contains("tox-edit-area")||l.contains("tox-edit-area__iframe")||l.contains("mce-content-body"))})(a.dom)&&xi(r,a.dom)).isSome()})(o))(t)&&t.focus(),(o=>{o.selection.setRng(o.selection.getRng())})(t),t.nodeChanged())})(t,s.editorReadOnly),e.set(o),(a=t).dispatch("SwitchMode",{mode:o})},Um=H.each,zm=H.explode,OA={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},vw=H.makeMap("alt,ctrl,shift,meta,access"),TA=t=>{const e={},n=vt.os.isMacOS()||vt.os.isiOS();Um(zm(t.toLowerCase(),"+"),s=>{s in vw?e[s]=!0:/^[0-9]{2,}$/.test(s)?e.keyCode=parseInt(s,10):(e.charCode=s.charCodeAt(0),e.keyCode=OA[s]||s.toUpperCase().charCodeAt(0))});const o=[e.keyCode];let r;for(r in vw)e[r]?o.push(r):e[r]=!1;return e.id=o.join(","),e.access&&(e.alt=!0,n?e.ctrl=!0:e.shift=!0),e.meta&&(n?e.meta=!0:(e.ctrl=!0,e.meta=!1)),e};class yw{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const n=this;e.on("keyup keypress keydown",o=>{!n.hasModifier(o)&&!n.isFunctionKey(o)||o.isDefaultPrevented()||(Um(n.shortcuts,r=>{n.matchShortcut(o,r)&&(n.pendingPatterns=r.subpatterns.slice(0),"keydown"===o.type&&n.executeShortcutAction(r))}),n.matchShortcut(o,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===o.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(e,n,o,r){const s=this,a=s.normalizeCommandFunc(o);return Um(zm(H.trim(e)),i=>{const l=s.createShortcut(i,n,a,r);s.shortcuts[l.id]=l}),!0}remove(e){const n=this.createShortcut(e);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(e){const n=this,o=e;return"string"==typeof o?()=>{n.editor.execCommand(o,!1,null)}:H.isArray(o)?()=>{n.editor.execCommand(o[0],o[1],o[2])}:o}createShortcut(e,n,o,r){const s=H.map(zm(e,">"),TA);return s[s.length-1]=H.extend(s[s.length-1],{func:o,scope:r||this.editor}),H.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,n){return!!n&&n.ctrl===e.ctrlKey&&n.meta===e.metaKey&&n.alt===e.altKey&&n.shift===e.shiftKey&&!!(e.keyCode===n.keyCode||e.charCode&&e.charCode===n.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const BA=()=>{const t=(()=>{const e={},n={},o={},r={},s={},a={},i={},l=(d,c)=>(u,f)=>{d[u.toLowerCase()]=kt(it({},f),{type:c})};return{addButton:l(e,"button"),addGroupToolbarButton:l(e,"grouptoolbarbutton"),addToggleButton:l(e,"togglebutton"),addMenuButton:l(e,"menubutton"),addSplitButton:l(e,"splitbutton"),addMenuItem:l(n,"menuitem"),addNestedMenuItem:l(n,"nestedmenuitem"),addToggleMenuItem:l(n,"togglemenuitem"),addAutocompleter:l(o,"autocompleter"),addContextMenu:l(s,"contextmenu"),addContextToolbar:l(a,"contexttoolbar"),addContextForm:l(a,"contextform"),addSidebar:l(i,"sidebar"),addIcon:(d,c)=>r[d.toLowerCase()]=c,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:s,contextToolbars:a,sidebars:i})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,getAll:t.getAll}},er=_t.DOM,Cw=H.extend,DA=H.each;class Cl{constructor(e,n,o){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this.editorManager=o,this.documentBaseUrl=o.documentBaseURL,Cw(this,gw);const r=this;this.id=e,this.hidden=!1;const s=((t,e,n,o,r)=>{var s;const a=t?{mobile:fA(null!==(s=r.mobile)&&void 0!==s?s:{},e)}:{},i=((t,e)=>{const n=((s,a)=>{const i={},l={};return Jm(s,(d,c)=>Et(t,c),Ul(i),Ul(l)),{t:i,f:l}})(e);return r=n.f,{sections:G(n.t),options:G(r)};var r})(["mobile"],om(a,r)),l=H.extend(n,o,i.options(),t&&Dm(i,"mobile")?((d,c,u={})=>{const f=d.sections(),m=Rt(f,c).getOr({});return H.extend({},u,m)})(i,"mobile"):{},{external_plugins:gA(o,i.options())});return((d,c,u,f)=>{const m=ha(u.forced_plugins),g=ha(f.plugins),h=Dm(b=c,"mobile")?b.sections().mobile:{},p=((b,C,w,k)=>b&&Dm(C,"mobile")?k:w)(d,c,g,h.plugins?ha(h.plugins):g),v=((b,C)=>[...ha(b),...ha(C)])(m,p);var b;return H.extend(f,{forced_plugins:m,plugins:v})})(t,i,o,l)})(iw||uA,iw,m=n,o.defaultOptions,m);var m;this.options=((f,m)=>{const g={},h={},p=(b,C,w)=>{const k=Fm(C,w);return hw(k)?(h[b]=k.value,!0):(console.warn(pw(`Invalid value passed for the ${b} option`,k)),!1)},v=b=>gt(g,b);return{register:(b,C)=>{const w=lt(C.processor)?(x=>{const E=(()=>{switch(x){case"array":return jt;case"boolean":return Co;case"function":return yt;case"number":return on;case"object":return pe;case"string":return lt;case"string[]":return RA;case"object[]":return S=>or(S,pe);case"regexp":return S=>xa(S,RegExp);default:return Ut}})();return S=>Fm(S,E,`The value must be a ${x}.`)})(C.processor):C.processor,k=((x,E,S)=>{if(!Se(E)){const O=Fm(E,S);if(hw(O))return O.value;console.error(pw(`Invalid default value passed for the "${x}" option`,O))}})(b,C.default,w);g[b]=kt(it({},C),{default:k,processor:w}),Rt(h,b).orThunk(()=>Rt(m,b)).each(x=>p(b,x,w))},isRegistered:v,get:b=>Rt(h,b).orThunk(()=>Rt(g,b).map(C=>C.default)).getOrUndefined(),set:(b,C)=>{if(v(b)){const w=g[b];return w.immutable?(console.error(`"${b}" is an immutable option and cannot be updated`),!1):p(b,C,w.processor)}return console.warn(`"${b}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:b=>{const C=v(b);return C&&delete h[b],C},isSet:b=>gt(h,b)}})(0,s),(f=>{const m=f.options.register;m("id",{processor:"string",default:f.id}),m("selector",{processor:"string"}),m("target",{processor:"object"}),m("suffix",{processor:"string"}),m("cache_suffix",{processor:"string"}),m("base_url",{processor:"string"}),m("referrer_policy",{processor:"string",default:""}),m("language_load",{processor:"boolean",default:!0}),m("inline",{processor:"boolean",default:!1}),m("iframe_attrs",{processor:"object",default:{}}),m("doctype",{processor:"string",default:"<!DOCTYPE html>"}),m("document_base_url",{processor:"string",default:f.documentBaseUrl}),m("body_id",{processor:vp(f,"tinymce"),default:"tinymce"}),m("body_class",{processor:vp(f),default:""}),m("content_security_policy",{processor:"string",default:""}),m("br_in_pre",{processor:"boolean",default:!0}),m("forced_root_block",{processor:g=>{const h=lt(g)&&hn(g);return h?{value:g,valid:h}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),m("forced_root_block_attrs",{processor:"object",default:{}}),m("newline_behavior",{processor:g=>{const h=Et(["block","linebreak","invert","default"],g);return h?{value:g,valid:h}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),m("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),m("no_newline_selector",{processor:"string",default:""}),m("keep_styles",{processor:"boolean",default:!0}),m("end_container_on_empty_block",{processor:g=>Co(g)||lt(g)?{valid:!0,value:g}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),m("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),m("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),m("font_size_classes",{processor:"string",default:""}),m("automatic_uploads",{processor:"boolean",default:!0}),m("images_reuse_filename",{processor:"boolean",default:!1}),m("images_replace_blob_uris",{processor:"boolean",default:!0}),m("icons",{processor:"string",default:""}),m("icons_url",{processor:"string",default:""}),m("images_upload_url",{processor:"string",default:""}),m("images_upload_base_path",{processor:"string",default:""}),m("images_upload_credentials",{processor:"boolean",default:!1}),m("images_upload_handler",{processor:"function"}),m("language",{processor:"string",default:"en"}),m("language_url",{processor:"string",default:""}),m("entity_encoding",{processor:"string",default:"named"}),m("indent",{processor:"boolean",default:!0}),m("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),m("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),m("indent_use_margin",{processor:"boolean",default:!1}),m("indentation",{processor:"string",default:"40px"}),m("content_css",{processor:g=>{const h=!1===g||lt(g)||or(g,lt);return h?lt(g)?{value:bt(g.split(","),ir),valid:h}:jt(g)?{value:g,valid:h}:!1===g?{value:[],valid:h}:{value:g,valid:h}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Id(f)?[]:["default"]}),m("content_style",{processor:"string"}),m("content_css_cors",{processor:"boolean",default:!1}),m("font_css",{processor:g=>{const h=lt(g)||or(g,lt);return h?{value:jt(g)?g:bt(g.split(","),ir),valid:h}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),m("inline_boundaries",{processor:"boolean",default:!0}),m("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),m("object_resizing",{processor:g=>{const h=Co(g)||lt(g);return h?!1===g||Dd.isiPhone()||Dd.isiPad()?{value:"",valid:h}:{value:!0===g?"table,img,figure.image,div,video,iframe":g,valid:h}:{valid:!1,message:"Must be boolean or a string"}},default:!ek}),m("resize_img_proportional",{processor:"boolean",default:!0}),m("event_root",{processor:"object"}),m("service_message",{processor:"string"}),m("theme",{processor:g=>!1===g||lt(g)||yt(g),default:"silver"}),m("theme_url",{processor:"string"}),m("formats",{processor:"object"}),m("format_empty_lines",{processor:"boolean",default:!1}),m("format_noneditable_selector",{processor:"string",default:""}),m("preview_styles",{processor:g=>{const h=!1===g||lt(g);return h?{value:!1===g?"":g,valid:h}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),m("custom_ui_selector",{processor:"string",default:""}),m("hidden_input",{processor:"boolean",default:!0}),m("submit_patch",{processor:"boolean",default:!0}),m("encoding",{processor:"string"}),m("add_form_submit_trigger",{processor:"boolean",default:!0}),m("add_unload_trigger",{processor:"boolean",default:!0}),m("custom_undo_redo_levels",{processor:"number",default:0}),m("disable_nodechange",{processor:"boolean",default:!1}),m("readonly",{processor:"boolean",default:!1}),m("plugins",{processor:"string[]",default:[]}),m("external_plugins",{processor:"object"}),m("forced_plugins",{processor:"string[]"}),m("model",{processor:"string",default:f.hasPlugin("rtc")?"plugin":"dom"}),m("model_url",{processor:"string"}),m("block_unsupported_drop",{processor:"boolean",default:!0}),m("visual",{processor:"boolean",default:!0}),m("visual_table_class",{processor:"string",default:"mce-item-table"}),m("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),m("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),m("setup",{processor:"function"}),m("init_instance_callback",{processor:"function"}),m("url_converter",{processor:"function",default:f.convertURL}),m("url_converter_scope",{processor:"object",default:f}),m("urlconverter_callback",{processor:"function"}),m("allow_conditional_comments",{processor:"boolean",default:!1}),m("allow_html_data_urls",{processor:"boolean",default:!1}),m("allow_svg_data_urls",{processor:"boolean"}),m("allow_html_in_named_anchor",{processor:"boolean",default:!1}),m("allow_script_urls",{processor:"boolean",default:!1}),m("allow_unsafe_link_target",{processor:"boolean",default:!1}),m("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),m("fix_list_elements",{processor:"boolean",default:!1}),m("preserve_cdata",{processor:"boolean",default:!1}),m("remove_trailing_brs",{processor:"boolean"}),m("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),m("element_format",{processor:"string",default:"html"}),m("entities",{processor:"string"}),m("schema",{processor:"string",default:"html5"}),m("convert_urls",{processor:"boolean",default:!0}),m("relative_urls",{processor:"boolean",default:!0}),m("remove_script_host",{processor:"boolean",default:!0}),m("custom_elements",{processor:"string"}),m("extended_valid_elements",{processor:"string"}),m("invalid_elements",{processor:"string"}),m("invalid_styles",{processor:Pd}),m("valid_children",{processor:"string"}),m("valid_classes",{processor:Pd}),m("valid_elements",{processor:"string"}),m("valid_styles",{processor:Pd}),m("verify_html",{processor:"boolean",default:!0}),m("auto_focus",{processor:g=>lt(g)||!0===g}),m("browser_spellcheck",{processor:"boolean",default:!1}),m("protect",{processor:"array"}),m("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),m("deprecation_warnings",{processor:"boolean",default:!0}),m("a11y_advanced_options",{processor:"boolean",default:!1}),m("api_key",{processor:"string"}),m("paste_block_drop",{processor:"boolean",default:!1}),m("paste_data_images",{processor:"boolean",default:!0}),m("paste_preprocess",{processor:"function"}),m("paste_postprocess",{processor:"function"}),m("paste_webkit_styles",{processor:"string",default:"none"}),m("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),m("paste_merge_formats",{processor:"boolean",default:!0}),m("smart_paste",{processor:"boolean",default:!0}),m("paste_as_text",{processor:"boolean",default:!1}),m("paste_tab_spaces",{processor:"number",default:4}),m("text_patterns",{processor:g=>or(g,pe)||!1===g?{value:hp(!1===g?[]:g),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),m("text_patterns_lookup",{processor:g=>{return yt(g)?{value:(h=g,p=>{const v=h(p);return hp(v)}),valid:!0}:{valid:!1,message:"Must be a single function"};var h},default:g=>[]}),m("noneditable_class",{processor:"string",default:"mceNonEditable"}),m("editable_class",{processor:"string",default:"mceEditable"}),m("noneditable_regexp",{processor:g=>or(g,bp)?{value:g,valid:!0}:bp(g)?{value:[g],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),m("table_tab_navigation",{processor:"boolean",default:!0}),f.on("ScriptsLoaded",()=>{m("directionality",{processor:"string",default:ln.isRtl()?"rtl":void 0}),m("placeholder",{processor:"string",default:nk.getAttrib(f.getElement(),"placeholder")})})})(r);const a=this.options.get;a("deprecation_warnings")&&((f,m)=>{((g,h)=>{const p=(t=>{const e=ut(DE,o=>gt(t,o)),n=t.forced_root_block;return!1!==n&&""!==n||e.push("forced_root_block (false only)"),ns(e)})(g),v=(t=>{const e=H.makeMap(t.plugins," "),n=ut(PE,o=>gt(e,o));return ns(n)})(h),b=v.length>0,C=p.length>0,w="mobile"===h.theme;if(b||C||w){const k="\n- ",x=w?`\n\nThemes:${k}mobile`:"",E=b?`\n\nPlugins:${k}${v.join(k)}`:"",S=C?`\n\nOptions:${k}${p.join(k)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+x+E+S)}})(f,m)})(n,s);const i=a("suffix");i&&(o.suffix=i),this.suffix=o.suffix;const l=a("base_url");l&&o._setBaseUrl(l),this.baseUri=o.baseURI;const d=Ld(r);d&&(Hn.ScriptLoader._setReferrerPolicy(d),_t.DOM.styleSheetLoader._setReferrerPolicy(d)),de.languageLoad=a("language_load"),de.baseURL=o.baseURL,this.setDirty(!1),this.documentBaseURI=new fn(yp(r),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Id(r),this.hasVisual=qk(r),this.shortcuts=new yw(this),this.editorCommands=new cw(this),(t=>{var e;(t=>{(e=>{const n=o=>()=>{j("left,center,right,justify".split(","),r=>{o!==r&&e.formatter.remove("align"+r)}),"none"!==o&&(e.formatter.toggle("align"+o,void 0),e.nodeChanged())};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(e=>{const n=o=>()=>{const r=e.selection,s=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return zt(s,a=>Q(e.formatter.matchNode(a,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(t)})(t),(e=t).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch(s){r=!0}if("paste"!==n||o.queryCommandEnabled(n)||(r=!0),r||!o.queryCommandSupported(n)){let s=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(vt.os.isMacOS()||vt.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:s,type:"error"})}}}),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(t),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let s=0;e.dom.getParent(e.selection.getNode(),a=>!J(a)||s++!==r||(e.selection.select(a),!1),e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),Cn);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})})(t),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{hl(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{hl(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{hl(e,r)},mceInsertContent:(n,o,r)=>{hl(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})})(t),(e=>{const n=(o,r,s)=>{const a=lt(s)?{href:s}:s,i=e.dom.getParent(e.selection.getNode(),"a");pe(a)&&lt(a.href)&&(a.href=a.href.replace(/ /g,"%20"),i&&a.href||e.formatter.remove("link"),a.href&&e.formatter.apply("link",a,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0)}else e.formatter.remove("link")},mceInsertLink:n,createLink:n})})(t),(e=>{e.editorCommands.addCommands({Indent:()=>{zy(e,"indent")},Outdent:()=>{jy(e)}}),e.editorCommands.addCommands({Outdent:()=>Iy(e)},"state")})(t),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{cl(KC,e)},mceInsertNewLine:(n,o,r)=>{t1(e,r)},InsertLineBreak:(n,o,r)=>{cl(XC,e)}})})(t),(e=>{var n;(n=e).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{n.getDoc().execCommand(o);const r=n.dom.getParent(n.selection.getNode(),"ol,ul");if(r){const s=r.parentNode;if(s&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const a=n.selection.getBookmark();n.dom.split(s,r),n.selection.moveToBookmark(a)}}}}),(n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{const r=n.dom.getParent(n.selection.getNode(),"ul,ol");return r&&("insertunorderedlist"===o&&"UL"===r.tagName||"insertorderedlist"===o&&"OL"===r.tagName)}},"state")})(e)})(t),(e=>{(n=>{const o=(r,s)=>{n.formatter.toggle(r,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>{o(r)},"ForeColor,HiliteColor":(r,s,a)=>{o(r,{value:a})},BackColor:(r,s,a)=>{o("hilitecolor",{value:a})},FontName:(r,s,a)=>{((i,l)=>{const d=dw(i,l);i.formatter.toggle("fontname",{value:kA(d)}),i.nodeChanged()})(n,a)},FontSize:(r,s,a)=>{var i;(i=n).formatter.toggle("fontsize",{value:dw(i,a)}),i.nodeChanged()},LineHeight:(r,s,a)=>{var i;(i=n).formatter.toggle("lineheight",{value:String(a)}),i.nodeChanged()},Lang:(r,s,a)=>{var i;o(r,{value:a.code,customValue:null!==(i=a.customCode)&&void 0!==i?i:null})},RemoveFormat:r=>{n.formatter.remove(r)},mceBlockQuote:()=>{o("blockquote")},FormatBlock:(r,s,a)=>{o(lt(a)?a:"p")},mceToggleFormat:(r,s,a)=>{o(a)}})})(e),(n=>{const o=r=>n.formatter.match(r);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>o(r),mceBlockQuote:()=>o("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return Pm(r=n,s=>wA(r.getBody(),s.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return Pm(r=n,s=>CA(r.getBody(),s.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return Pm(r=n,s=>{const a=R(r.getBody());return Yc(s,l=>Pa(l,"line-height"),et(wt,a)).getOrThunk(()=>{const l=parseFloat(yn(s,"line-height")),d=parseFloat(yn(s,"font-size"));return String(l/d)})}).getOr("");var r})})(e)})(t),(e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const s=null!=r?r:e.selection.getNode();if(s!==e.getBody()){const a=e.selection.getBookmark();e.dom.remove(s,!0),e.selection.moveToBookmark(a)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{var s;(s=e).removed||(!0===r?yc(s):(i=>{const l=i.selection,d=i.getBody();let c=l.getRng();i.quirks.refreshContentEditable(),Q(i.bookmark)&&!qo(i)&&hc(i).each(f=>{i.selection.setRng(f),c=f});const u=(f=i,m=l.getNode(),f.dom.getParent(m,g=>"true"===f.dom.getContentEditable(g)));var f,m;if(u&&i.dom.isChildOf(u,d))return vc(u),sb(i,c),void yc(i);i.inline||(vt.browser.isOpera()||vc(d),i.getWin().focus()),(vt.browser.isFirefox()||i.inline)&&(vc(d),sb(i,c)),yc(i)})(s))},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(t)})(this);const c=a("cache_suffix");c&&(vt.cacheSuffix=c.replace(/^[\?\&]+/,"")),this.ui={registry:BA(),styleSheetLoader:void 0,show:pt,hide:pt,setEnabled:pt,isEnabled:Ut},this.mode=(f=>{const m=Wt("design"),g=Wt({design:{activate:pt,deactivate:pt,editorReadOnly:!1},readonly:{activate:pt,deactivate:pt,editorReadOnly:!0}});return(h=f).serializer?uw(h):h.on("PreInit",()=>{uw(h)}),(h=>{h.on("ShowCaret",p=>{Zo(h)&&p.preventDefault()}),h.on("ObjectSelected",p=>{Zo(h)&&p.preventDefault()})})(f),{isReadOnly:()=>Zo(f),set:h=>((p,v,b,C)=>{if(C!==b.get()){if(!gt(v,C))throw new Error(`Editor mode '${C}' is invalid`);p.initialized?bw(p,b,v,C):p.on("init",()=>bw(p,b,v,C))}})(f,g.get(),m,h),get:()=>m.get(),register:(h,p)=>{g.set(((v,b,C)=>{if(Et(AA,b))throw new Error(`Cannot override default mode ${b}`);return kt(it({},v),{[b]:kt(it({},C),{deactivate:()=>{try{C.deactivate()}catch(w){console.error(`problem while deactivating editor mode ${b}:`,w)}}})})})(g.get(),h,p))}};var h})(r),o.dispatch("SetupEditor",{editor:this});const u=Gk(r);yt(u)&&u.call(r,r)}render(){(e=>{const n=e.id;ln.setCode(Sp(e));const o=()=>{Jo.unbind(window,"ready",o),e.render()};if(!Mo.Event.domLoaded)return void Jo.bind(window,"ready",o);if(!e.getElement())return;const r=R(e.getElement()),s=Nf(r);var l;e.on("remove",()=>{Ym(r.dom.attributes,i=>se(r,i.name)),Qn(r,s)}),e.ui.styleSheetLoader=ig.forElement(r,{contentCssCors:Hk(l=e),referrerPolicy:Ld(l)}),Id(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const a=e.getElement().form||Jo.getParent(n,"form");a&&(e.formElement=a,Mk(e)&&!od(e.getElement())&&(Jo.insertAfter(Jo.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},Jo.bind(a,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!Ik(e)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),a._mceOldSubmit(a)))),e.windowManager=Lv(e),e.notificationManager=Pv(e),"xml"===e.options.get("encoding")&&e.on("GetContent",i=>{i.save&&(i.content=Jo.encode(i.content))}),Fk(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Uk(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),((t,e)=>{const n=Hn.ScriptLoader,o=()=>{!t.removed&&(r=>{const s=xr(r);return!lt(s)||Q(Qo.get(s))})(t)&&(r=>{const s=Md(r);return Q(Ir.get(s))})(t)&&(t=>{t.dispatch("ScriptsLoaded"),(n=>{const o=H.trim(kp(n)),r=n.ui.registry.getAll().icons,s=it(it({},Hi.get("default").icons),Hi.get(o).icons);Nt(s,(a,i)=>{gt(r,i)||n.ui.registry.addIcon(i,a)})})(t),(n=>{const o=xr(n);if(lt(o)){const r=Qo.get(o);n.theme=r(n,Qo.urls[o])||{},yt(n.theme.init)&&n.theme.init(n,Qo.urls[o]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(t),(n=>{const o=Md(n),r=Ir.get(o);n.model=r(n,Ir.urls[o])})(t),(n=>{const o=[];j(ni(n),r=>{((s,a,i)=>{const l=Fr.get(i),d=Fr.urls[i]||s.documentBaseUrl.replace(/\/$/,"");if(i=H.trim(i),l&&-1===H.inArray(a,i)){if(s.plugins[i])return;try{const c=l(s,d)||{};s.plugins[i]=c,yt(c.init)&&(c.init(s,d),a.push(i))}catch(c){((u,f,m)=>{const g=ln.translate(["Failed to initialize plugin: {0}",f]);Rh(u,"PluginLoadError",{message:g}),Vi(g,m),$i(u,g)})(s,i,c)}}})(n,o,r.replace(/^\-/,""))})})(t);const e=(n=>{const o=n.getElement();return n.orgDisplay=o.style.display,lt(xr(n))?(r=>{const s=r.theme.renderUI;return s?s():ow(r)})(n):yt(xr(n))?(r=>{const s=r.getElement(),a=xr(r)(r,s);return a.editorContainer.nodeType&&(a.editorContainer.id=a.editorContainer.id||r.id+"_parent"),a.iframeContainer&&a.iframeContainer.nodeType&&(a.iframeContainer.id=a.iframeContainer.id||r.id+"_iframecontainer"),a.height=a.iframeHeight?a.iframeHeight:s.offsetHeight,a})(n):ow(n)})(t);var n,o;((n,o)=>{const r={show:y.from(o.show).getOr(pt),hide:y.from(o.hide).getOr(pt),isEnabled:y.from(o.isEnabled).getOr(Ut),setEnabled:s=>{n.mode.isReadOnly()||y.from(o.setEnabled).each(a=>a(s))}};n.ui=it(it({},n.ui),r)})(t,y.from(e.api).getOr({})),t.editorContainer=e.editorContainer,(n=t).contentCSS=n.contentCSS.concat(Iv(o=n,xk(o)),(o=>Iv(o,Ep(o)))(n)),t.inline?tw(t):((n,o)=>{((r,s)=>{const a=r.translate("Rich Text Area"),i=In(R(r.getElement()),"tabindex").bind(Na),l=((d,c,u,f)=>{const m=Jt("iframe");return f.each(g=>Qt(m,"tabindex",g)),Qn(m,u),Qn(m,{id:d+"_ifr",frameBorder:"0",allowTransparency:"true",title:c}),ds(m,"tox-edit-area__iframe"),m})(r.id,a,ok(r),i).dom;l.onload=()=>{l.onload=null,r.dispatch("load")},r.contentAreaContainer=s.iframeContainer,r.iframeElement=l,r.iframeHTML=(d=>{let c=rk(d)+"<html><head>";yp(d)!==d.documentBaseUrl&&(c+='<base href="'+d.documentBaseURI.getURI()+'" />'),c+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const u=sk(d),f=ak(d),m=d.translate(Kk(d));return Cp(d)&&(c+='<meta http-equiv="Content-Security-Policy" content="'+Cp(d)+'" />'),c+=`</head><body id="${u}" class="mce-content-body ${f}" data-id="${d.id}" aria-label="${m}"><br></body></html>`,c})(r),Bm.add(s.iframeContainer,l)})(n,o),o.editorContainer&&(o.editorContainer.style.display=n.orgDisplay,n.hidden=Bm.isHidden(o.editorContainer)),n.getElement().style.display="none",Bm.setAttrib(n.id,"aria-hidden","true"),tw(n)})(t,{editorContainer:e.editorContainer,iframeContainer:e.iframeContainer})})(t)};((r,s)=>{const a=xr(r);if(lt(a)&&!rw(a)&&!gt(Qo.urls,a)){const i=Ak(r),l=i?r.documentBaseURI.toAbsolute(i):`themes/${a}/theme${s}.js`;Qo.load(a,l).catch(()=>{ea(r,"ThemeLoadError",na("theme",l,a))})}})(t,e),((r,s)=>{const a=Md(r);if("plugin"!==a&&!gt(Ir.urls,a)){const i=Ok(r),l=lt(i)?r.documentBaseURI.toAbsolute(i):`models/${a}/model${s}.js`;Ir.load(a,l).catch(()=>{ea(r,"ModelLoadError",na("model",l,a))})}})(t,e),((r,s)=>{const a=Sp(s),i=Ck(s);if(!ln.hasCode(a)&&"en"!==a){const l=hn(i)?i:`${s.editorManager.baseURL}/langs/${a}.js`;r.add(l).catch(()=>{ea(s,"LanguageLoadError",na("language",l,a))})}})(n,t),((r,s,a)=>{const i=sw(s,"default",a),l=(d=s,y.from(gk(d)).filter(hn).map(c=>({url:c,name:y.none()}))).orThunk(()=>sw(s,kp(s),""));var d;j((d=>{const c=[],u=f=>{c.push(f)};for(let f=0;f<d.length;f++)d[f].each(u);return c})([i,l]),d=>{r.add(d.url).catch(()=>{var c,u,f;c=s,u=d.url,f=d.name.getOrUndefined(),ea(c,"IconsLoadError",na("icons",u,f))})})})(n,t,e),((r,s)=>{const a=(i,l)=>{Fr.load(i,l).catch(()=>{ea(r,"PluginLoadError",na("plugin",l,i))})};Nt($k(r),(i,l)=>{a(l,i),r.options.set("plugins",ni(r).concat(l))}),j(ni(r),i=>{!(i=H.trim(i))||Fr.urls[i]||rw(i)||a(i,`plugins/${i}/plugin${s}.js`)})})(t,e),n.loadQueue().then(o,o)})(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return qo(this)}translate(e){return ln.translate(e)}getParam(e,n,o){const r=this.options;return r.isRegistered(e)||(Q(o)?r.register(e,{processor:o,default:n}):r.register(e,{processor:Ut,default:n})),r.isSet(e)||Se(n)?r.get(e):n}hasPlugin(e,n){return!(!Et(ni(this),e)||n&&void 0===Fr.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,n,o){this.editorCommands.addCommand(e,n,o)}addQueryStateHandler(e,n,o){this.editorCommands.addQueryStateHandler(e,n,o)}addQueryValueHandler(e,n,o){this.editorCommands.addQueryValueHandler(e,n,o)}addShortcut(e,n,o,r){this.shortcuts.add(e,n,o,r)}execCommand(e,n,o,r){return this.editorCommands.execCommand(e,n,o,r)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(er.show(e.getContainer()),er.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(er.hide(e.getContainer()),er.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,n){this.dispatch("ProgressState",{state:e,time:n})}load(e={}){const n=this,o=n.getElement();if(n.removed)return"";if(o){const r=kt(it({},e),{load:!0}),s=od(o)?o.value:o.innerHTML,a=n.setContent(s,r);return r.no_events||n.dispatch("LoadContent",kt(it({},r),{element:o})),a}return""}save(e={}){const n=this;let o=n.getElement();if(!o||!n.initialized||n.removed)return"";const r=kt(it({},e),{save:!0,element:o});let s=n.getContent(r);const a=kt(it({},r),{content:s});if(a.no_events||n.dispatch("SaveContent",a),"raw"===a.format&&n.dispatch("RawSaveContent",a),s=a.content,od(o))o.value=s;else{!e.is_removing&&n.inline||(o.innerHTML=s);const i=er.getParent(n.id,"form");i&&DA(i.elements,l=>l.name!==n.id||(l.value=s,!1))}return a.element=r.element=o=null,!1!==a.set_dirty&&n.setDirty(!1),s}setContent(e,n){return Eu(this,e,n)}getContent(e){return((n,o={})=>{const r=(a=o.format?o.format:"html",kt(it({},o),{format:a,get:!0,getInner:!0}));var a;return mv(n,r).fold(he,s=>{const a=(l=s,_u(n).editor.getContent(l));var l;return fv(n,a,s)})})(this,e)}insertContent(e,n){n&&(e=Cw({content:e},n)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?Eu(this,this.startContent,{format:"raw"}):Eu(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const n=!this.isNotDirty;this.isNotDirty=!e,e&&e!==n&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||er.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=er.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const n=e.iframeElement;n&&(e.contentWindow=n.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const n=e.getWin();n&&(e.contentDocument=n.document)}return e.contentDocument}getBody(){var e,n;const o=this.getDoc();return null!==(n=null!==(e=this.bodyElement)&&void 0!==e?e:null==o?void 0:o.body)&&void 0!==n?n:null}convertURL(e,n,o){const r=this,s=r.options.get,a=Xk(r);return yt(a)?a.call(r,e,o,!0,n):!s("convert_urls")||"link"===o||pe(o)&&"LINK"===o.nodeName||0===e.indexOf("file:")||0===e.length?e:s("relative_urls")?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,s("remove_script_host"))}addVisual(e){((n,o)=>{var s;s=o,Pt(this).editor.addVisual(s)})(0,e)}remove(){(e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),s=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Q(null==s?void 0:s.nextSibling)&&zi.remove(s.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&r&&zi.setStyle((a=e).id,"display",a.orgDisplay),(a=>{a.dispatch("detach")})(e),zi.remove(e.getContainer()),ji(n),ji(o),e.destroy()}var a})(this)}destroy(e){((n,o)=>{const{selection:r,dom:s}=n;n.destroyed||(o||n.removed?(o||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),ji(r),ji(s)),(a=>{const i=a.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,delete i._mceOldSubmit),zi.unbind(i,"submit reset",a.formEventDelegate))})(n),(a=>{const i=a;i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null;const l=a.selection;l&&(i.selection=l.win=l.dom=l.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Kr=_t.DOM,wl=H.each;let xl,ww=!1,ke=[];const kl=t=>{const e=t.type;wl(bo.get(),n=>{switch(e){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},xw=t=>{if(t!==ww){const e=_t.DOM;t?(e.bind(window,"resize",kl),e.bind(window,"scroll",kl)):(e.unbind(window,"resize",kl),e.unbind(window,"scroll",kl)),ww=t}},kw=t=>{const e=ke;return ke=ut(ke,n=>t!==n),bo.activeEditor===t&&(bo.activeEditor=ke.length>0?ke[0]:null),bo.focusedEditor===t&&(bo.focusedEditor=null),e.length!==ke.length},PA="CSS1Compat"!==document.compatMode,bo=kt(it({},Im),{baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"2.0",releaseDate:"2022-09-08",i18n:ln,activeEditor:null,focusedEditor:null,setup(){const t=this;let e="",n="",o=fn.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)e=r.base||r.baseURL,n=r.suffix;else{const a=document.getElementsByTagName("script");for(let i=0;i<a.length;i++){const l=a[i].src||"";if(""===l)continue;const d=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==d.indexOf(".min")&&(n=".min"),e=l.substring(0,l.lastIndexOf("/"));break}}if(!e&&document.currentScript){const i=document.currentScript.src;-1!==i.indexOf(".min")&&(n=".min"),e=i.substring(0,i.lastIndexOf("/"))}}var s;t.baseURL=new fn(o).toAbsolute(e),t.documentBaseURL=o,t.baseURI=new fn(t.baseURL),t.suffix=n,(s=t).on("AddEditor",et(o_,s)),s.on("RemoveEditor",et(r_,s))},overrideDefaults(t){const e=t.base_url;e&&this._setBaseUrl(e);const n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;const o=t.plugin_base_urls;void 0!==o&&Nt(o,(r,s)=>{de.PluginManager.urls[s]=r})},init(t){const e=this;let n;const o=H.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let r=a=>{n=a};const s=()=>{let a=0;const i=[];let l;var d;Kr.unbind(window,"ready",s),(d=>{const c=t.onpageload;c&&c.apply(e,[])})(),l=((d,c)=>{const u=[],f=yt(c)?m=>zt(u,g=>c(g,m)):m=>Et(u,m);for(let m=0,g=d.length;m<g;m++){const h=d[m];f(h)||u.push(h)}return u})((d=t,vt.browser.isIE()||vt.browser.isEdge()?(Vi("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):PA?(Vi("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):lt(d.selector)?Kr.select(d.selector):Q(d.target)?[d.target]:[])),H.each(l,d=>{var c;(c=e.get(d.id))&&c.initialized&&!(c.getContainer()||c.getBody()).parentNode&&(kw(c),c.unbindAllNativeEvents(),c.destroy(!0),c.removed=!0)}),l=H.grep(l,d=>!e.get(d.id)),0===l.length?r([]):wl(l,d=>{t.inline&&d.tagName.toLowerCase()in o?Vi("Could not initialize inline editor on invalid inline target element",d):((c,u,f)=>{const m=new Cl(c,u,e);i.push(m),m.on("init",()=>{++a===l.length&&r(i)}),m.targetElm=m.targetElm||f,m.render()})((c=>{let u=c.id;return u||(u=Rt(c,"name").filter(f=>!Kr.get(f)).getOrThunk(Kr.uniqueId),c.setAttribute("id",u)),u})(d),t,d)})};return Kr.bind(window,"ready",s),new Promise(a=>{n?a(n):r=i=>{a(i)}})},get(t){return 0===arguments.length?ke.slice(0):lt(t)?Vt(ke,e=>e.id===t).getOr(null):on(t)&&ke[t]?ke[t]:null},add(t){const e=this,n=e.get(t.id);return n===t||(null===n&&ke.push(t),xw(!0),e.activeEditor=t,e.dispatch("AddEditor",{editor:t}),xl||(xl=o=>{const r=e.dispatch("BeforeUnload");if(r.returnValue)return o.preventDefault(),o.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",xl))),t},createEditor(t,e){return this.add(new Cl(t,e,this))},remove(t){const e=this;let n;if(t){if(!lt(t))return n=t,yo(e.get(n.id))?null:(kw(n)&&e.dispatch("RemoveEditor",{editor:n}),0===ke.length&&window.removeEventListener("beforeunload",xl),n.remove(),xw(ke.length>0),n);wl(Kr.select(t),o=>{n=e.get(o.id),n&&e.remove(n)})}else for(let o=ke.length-1;o>=0;o--)e.remove(ke[o])},execCommand(t,e,n){var o;const r=this,s=pe(n)?null!==(o=n.id)&&void 0!==o?o:n.index:n;switch(t){case"mceAddEditor":return r.get(s)||new Cl(s,n.options,r).render(),!0;case"mceRemoveEditor":{const a=r.get(s);return a&&a.remove(),!0}case"mceToggleEditor":{const a=r.get(s);return a?(a.isHidden()?a.show():a.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}}return!!r.activeEditor&&r.activeEditor.execCommand(t,e,n)},triggerSave:()=>{wl(ke,t=>{t.save()})},addI18n:(t,e)=>{ln.add(t,e)},translate:t=>ln.translate(t),setActive(t){const e=this.activeEditor;this.activeEditor!==t&&(e&&e.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new fn(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new fn(this.baseURL)}});bo.setup();const LA=(()=>{const t=so();return{FakeClipboardItem:e=>({items:e,types:Pe(e),getType:n=>Rt(e,n).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),Sw=Math.min,Gr=Math.max,Sl=Math.round,_w=(t,e,n)=>{let o=e.x,r=e.y;const s=t.w,a=t.h,i=e.w,l=e.h,d=(n||"").split("");return"b"===d[0]&&(r+=l),"r"===d[1]&&(o+=i),"c"===d[0]&&(r+=Sl(l/2)),"c"===d[1]&&(o+=Sl(i/2)),"b"===d[3]&&(r-=a),"r"===d[4]&&(o-=s),"c"===d[3]&&(r-=Sl(a/2)),"c"===d[4]&&(o-=Sl(s/2)),Yr(o,r,s,a)},Yr=(t,e,n,o)=>({x:t,y:e,w:n,h:o}),MA={inflate:(t,e,n)=>Yr(t.x-e,t.y-n,t.w+2*e,t.h+2*n),relativePosition:_w,findBestRelativePosition:(t,e,n,o)=>{for(let r=0;r<o.length;r++){const s=_w(t,e,o[r]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return o[r]}return null},intersect:(t,e)=>{const n=Gr(t.x,e.x),o=Gr(t.y,e.y),r=Sw(t.x+t.w,e.x+e.w),s=Sw(t.y+t.h,e.y+e.h);return r-n<0||s-o<0?null:Yr(n,o,r-n,s-o)},clamp:(t,e,n)=>{let o=t.x,r=t.y,s=t.x+t.w,a=t.y+t.h;const i=e.x+e.w,l=e.y+e.h,d=Gr(0,e.x-o),c=Gr(0,e.y-r),u=Gr(0,s-i),f=Gr(0,a-l);return o+=d,r+=c,n&&(s+=d,a+=c,o-=u,r-=f),s-=u,a-=f,Yr(o,r,s-o,a-r)},create:Yr,fromClientRect:t=>Yr(t.left,t.top,t.width,t.height)},IA=(()=>{const t={},e={};return{load:(n,o)=>{const r=`Script at URL "${o}" failed to load`,s=`Script at URL "${o}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==t[n])return t[n];{const a=new Promise((i,l)=>{const d=((c,u,f=1e3)=>{let m=!1,g=null;const h=b=>(...C)=>{m||(m=!0,null!==g&&(clearTimeout(g),g=null),b.apply(null,C))},p=h(c),v=h(u);return{start:(...b)=>{m||null!==g||(g=setTimeout(()=>v.apply(null,b),f))},resolve:p,reject:v}})(i,l);e[n]=d.resolve,Hn.ScriptLoader.loadScript(o).then(()=>d.start(s),()=>d.reject(r))});return t[n]=a,a}},add:(n,o)=>{void 0!==e[n]&&(e[n](o),delete e[n]),t[n]=Promise.resolve(o)},unload:n=>{delete t[n]}}})();let va;try{const t="__storage_test__";va=window.localStorage,va.setItem(t,t),va.removeItem(t)}catch(t){va=(()=>{let e={},n=[];const o={getItem:r=>e[r]||null,setItem:(r,s)=>{n.push(r),e[r]=String(s)},key:r=>n[r],removeItem:r=>{n=n.filter(s=>s===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})()}const FA={geom:{Rect:MA},util:{Delay:$e,Tools:H,VK:ot,URI:fn,EventDispatcher:Mm,Observable:Im,I18n:ln,LocalStorage:va,ImageUploader:t=>{const e=Fv(),n=zv(t,e);return{upload:(o,r=!0)=>n.upload(o,r?Uv(t):void 0)}}},dom:{EventUtils:Mo,TreeWalker:Ht,TextSeeker:Fo,DOMUtils:_t,ScriptLoader:Hn,RangeUtils:Br,Serializer:Tv,StyleSheetLoader:ag,ControlSelection:Lh,BookmarkManager:Hs,Selection:Ov,Event:Mo.Event},html:{Styles:vd,Entities:oo,Node:xe,Schema:ro,DomParser:Mr,Writer:bb,Serializer:uo},Env:vt,AddOnManager:de,Annotator:Eh,Formatter:$v,UndoManager:qv,EditorCommands:cw,WindowManager:Lv,NotificationManager:Pv,EditorObservable:gw,Shortcuts:yw,Editor:Cl,FocusManager:rb,EditorManager:bo,DOM:_t.DOM,ScriptLoader:Hn.ScriptLoader,PluginManager:Fr,ThemeManager:Qo,ModelManager:Ir,IconManager:Hi,Resource:IA,FakeClipboard:LA,trim:H.trim,isArray:H.isArray,is:H.is,toArray:H.toArray,makeMap:H.makeMap,each:H.each,map:H.map,grep:H.grep,inArray:H.inArray,extend:H.extend,walk:H.walk,resolve:H.resolve,explode:H.explode,_addCacheSuffix:H._addCacheSuffix},Ew=H.extend(bo,FA);(t=>{window.tinymce=t,window.tinyMCE=t})(Ew),(t=>{if("object"==typeof module)try{module.exports=t}catch(e){}})(Ew)}();
//# sourceMappingURL=scripts.b38633821c92d355.js.map